<chapter type="" id="tl0904000000">
<title><content-text>Protocolos de roteamento do vetor de distância</content-text></title>
<section type="ChapterIntroduction" id="tl0904000000">
<title><content-text>Introdução do capítulo</content-text></title>
<topic type="" id="tl0904000100">
<title><content-text>Introdução do capítulo</content-text></title>
<page type="OneColumn" id="tl0904000101">
<content-media type="StaticGraphic" id="cm9143789873"><title><content-text></content-text></title><media ref="tl0904000000/tl0904000000/tl0904000100/tl0904000101/cm9143789873.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904000000/tl0904000100/tl0904000101/cm9143789873text.xml"/></content-media>
<content-text><p><b>Introdução</b></p> <p>Os capítulos sobre o roteamento dinâmico deste curso estão concentrados nos protocolos IGP. Conforme foi discutido no Capítulo 3, os IGPs são classificados como protocolos de roteamento link-state ou do vetor de distância.</p> <p>Este capítulo descreve as características, as operações e a funcionalidade dos protocolos de roteamento do vetor de distância. Há vantagens e desvantagens de usar qualquer tipo de protocolo de roteamento. Portanto, serão descritas as condições que influenciam a operação dos protocolos do vetor de distância, bem como suas armadilhas e as soluções para superá-las. Entender a operação do roteamento do vetor de distância é essencial para habilitar, verificar e solucionar problemas destes protocolos.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904010000">
<title><content-text>Introdução aos protocolos de roteamento do vetor de distância</content-text></title>
<topic type="" id="tl0904010100">
<title><content-text>Protocolos de roteamento do vetor de distância</content-text></title>
<page type="OneColumn" id="tl0904010101">
<content-media type="StaticGraphic" id="cm5211114105"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010100/tl0904010101/cm5211114105.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010100/tl0904010101/cm5211114105text.xml"/></content-media>
<content-text><p>Os protocolos de roteamento dinâmico ajudam o administrador da rede a superar o processo demorado e exigente de configurar e manter rotas estáticas. Por exemplo, você pode imaginar como é manter as configurações de roteamento estático dos 28 roteadores mostrados na figura? O que acontece quando um link é desativado? Como você garante que os <content-link target="cg2491080382" type="glossary">caminhos redundantes</content-link> estão disponíveis? O roteamento dinâmico é a escolha mais comum para redes grandes como a da figura. </p> <p>Os protocolos de roteamento do vetor de distância incluem RIP, IGRP e EIGRP.</p> <p><b>RIP</b></p> <p>O protocolo de informações de roteamento (RIP, Routing Information Protocol) foi especificado originalmente em RFC 1058. Suas principais características são:</p> <ul><li> A métrica usada para a seleção de caminhos é a contagem de saltos. </li> <li> Se a contagem de saltos de uma rede for maior do que 15, o RIP não poderá fornecer uma rota a essa rede.</li> <li> Por padrão, as atualizações de roteamento são broadcast ou multicast a cada 30 segundos. </li></ul> <p><b>IGRP</b></p> <p>O protocolo de roteamento de gateway interior (IGRP, Interior Gateway Routing Protocol) é um protocolo proprietário desenvolvido pela Cisco. As principais características de design do IGRP são:</p> <ul><li> São usadas largura de banda, atraso, carga e confiabilidade para criar uma métrica composta. </li> <li> Por padrão, as atualizações de roteamento são difundidas a cada 90 segundos. </li> <li> O IGRP é o antecessor do EIGRP e já está obsoleto.</li></ul> <p><b>EIGRP</b></p> <p>O IGRP aprimorado (EIGRP, Enhanced IGRP) é um protocolo de roteamento do vetor de distância de propriedade da cisco. As principais características do EIGRP são: </p> <ul><li> Ele pode fazer o balanceamento de carga de custo desigual. </li> <li> Usa <content-link target="cg5832746935" type="glossary">Algoritmo de atualização por broadcast (DUAL)</content-link> para calcular o caminho mais curto. </li> <li> Não há nenhuma atualização periódica, ao contrário do RIP e do IGRP. As atualizações de roteamento são enviadas quando há uma mudança na topologia.</li></ul></content-text>
</page>
</topic>
<topic type="" id="tl0904010200">
<title><content-text>Tecnologia do vetor de distância</content-text></title>
<page type="OneColumn" id="tl0904010201">
<content-media type="StaticGraphic" id="cm6393632174"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010200/tl0904010201/cm6393632174.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010200/tl0904010201/cm6393632174text.xml"/></content-media>
<content-text><p><b>O significado de vetor de distância</b></p> <p>Como o próprio nome diz, vetor de distância significa que as rotas são anunciadas como vetores de distância e direção. A distância é definida em termos de uma métrica como contagem de saltos, e a direção é dada simplesmente pelo roteador do próximo salto ou pela interface de saída. </p> <p>Um roteador que usa um protocolo de roteamento do vetor de distância não tem o conhecimento do caminho inteiro para uma rede de destino. O roteador só conhece:</p> <ul><li> A direção ou a interface para a qual os pacotes devem ser encaminhados e</li> <li> A distância até a rede de destino</li></ul> <p>Na figura, por exemplo, o R1 sabe que a distância para alcançar a rede 172.16.3.0/24 é 1 salto e que a direção está fora da interface S0/0/0 para o R2.</p></content-text>
</page>
<page type="OneColumn" id="tl0904010202">
<content-media type="AnimationPartialScreen" id="cm3456621042"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010200/tl0904010202/cm3456621042.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010200/tl0904010202/cm3456621042text.xml"/></content-media>
<content-text><p><b>Operação de protocolos de roteamento do vetor de distância</b></p> <p>Alguns protocolos de roteamento do vetor de distância pedem que o roteador difunda periodicamente a tabela de roteamento inteira para cada um de seus vizinhos. Esse método é ineficiente, pois as atualizações consomem largura de banda e recursos de CPU dos roteadores para processar as atualizações. </p> <p>Os protocolos de roteamento do vetor de distância compartilham determinadas características.</p> <p>As <b>atualizações periódicas </b>são enviadas em intervalos regulares (30 segundos para o RIP e 90 segundos para o IGRP). Mesmo que a topologia não tenha sido alterada nos últimos dias, as atualizações periódicas continuarão sendo enviadas a todos os vizinhos.</p> <p><b>Vizinhos </b>são roteadores que compartilham um link e são configurados para usar o mesmo protocolo de roteamento. O roteador só conhece os endereços de rede de suas próprias interfaces e os endereços de rede remota que pode alcançar através de seus vizinhos. Ele não tem nenhum conhecimento mais amplo da topologia da rede. <b>Os roteadores que usam roteamento do vetor de distância não conhecem a topologia da rede.</b></p> <p>As <b>atualizações de broadcast </b>são enviadas para a 255.255.255.255. Os roteadores vizinhos que estiverem configurados com o mesmo protocolo de roteamento processarão as atualizações. Todos os outros dispositivos processarão a atualização até a Camada 3 e depois a descartarão. Alguns protocolos de roteamento do vetor de distância usam endereços multicast em vez de endereços de broadcast.</p> <p>As <b>atualizações da tabela de roteamento inteira </b>são enviadas periodicamente a todos os vizinhos, com algumas exceções que serão discutidas posteriormente. Os vizinhos que recebem essas atualizações devem processar a atualização inteira para localizar as informações pertinentes e descartar o restante. Alguns protocolos de roteamento do vetor de distância, como o EIGRP, não enviam atualizações periódicas da tabela de roteamento.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904010300">
<title><content-text>Algoritmos de protocolo de roteamento</content-text></title>
<page type="OneColumn" id="tl0904010301">
<content-media type="AnimationPartialScreen" id="cm6606786680"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010300/tl0904010301/cm6606786680.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010300/tl0904010301/cm6606786680text.xml"/></content-media>
<content-text><p><b>A finalidade do algoritmo</b></p> <p>No centro do protocolo do vetor de distância está o algoritmo. O algoritmo é utilizado para calcular os melhores caminhos e enviar essas informações aos vizinhos.</p> <p>Um algoritmo é um procedimento para realizar determinada tarefa, iniciando em determinado estado inicial e finalizando em um estado de término definido. Protocolos de roteamento diferentes usam algoritmos diferentes para instalar rotas na tabela de roteamento, enviar atualizações aos vizinhos e tomar decisões de determinação de caminho.</p> <p>O algoritmo usado para os protocolos de roteamento define os seguintes processos:</p> <ul><li> Mecanismo para enviar e receber informações de roteamento.</li> <li> Mecanismo para calcular os melhores caminhos e instalar rotas na tabela de roteamento. </li> <li> Mecanismo para detectar e reagir a alterações de topologia.</li></ul> <p> </p> <p>Na animação, o R1 e o R2 são configurados com um protocolo de roteamento. O algoritmo envia e recebe atualizações. Então, o R1 e o R2 coletam novas informações da atualização. Nesse caso, cada roteador aprende uma nova rede. O algoritmo de cada roteador faz seus cálculos independentemente e atualiza a tabela de roteamento com as novas informações. Quando a rede local em R2 for desativada, o algoritmo construirá uma atualização "disparada" e a enviará ao R1. Então, o R1 remove a rede da tabela de roteamento. As atualizações disparadas serão discutidas posteriormente neste capítulo.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904010400">
<title><content-text>Características do protocolo de roteamento</content-text></title>
<page type="OneColumn" id="tl0904010401">
<content-media type="StaticGraphic" id="cm5104895888"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010400/tl0904010401/cm5104895888.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010400/tl0904010401/cm5104895888text.xml"/></content-media>
<content-text><p><b>Características dos protocolos de roteamento</b></p> <p>Os protocolos de roteamento podem ser comparados com base nas seguintes características:</p> <ul><li> <b>Tempo de convergência</b> - O tempo de convergência define a rapidez com que os roteadores da topologia de rede compartilham informações de roteamento e alcançam um estado de conhecimento consistente. Quanto mais rápida for a convergência, melhor será o protocolo. Os loops de roteamento podem ocorrer quando as tabelas de roteamento inconsistentes não são atualizadas devido a uma convergência lenta em uma rede variável.</li> <li> <b>Escalabilidade</b> - A escalabilidade define o tamanho máximo que uma rede pode ter com base no protocolo de roteamento implantado. Quanto maior for a rede, mais escalável deverá ser o protocolo de roteamento.</li> <li> <b>Classless (uso de VLSM) ou classful</b> - Os protocolos de roteamento classless incluem a máscara de sub-rede nas atualizações. Esse recurso suporta o uso de <content-link target="cg6461978161" type="glossary">Máscara de sub-rede de tamanho variável (VLSM)</content-link> e melhor sumarização de rota. Os protocolos de roteamento classful não incluem a máscara de sub-rede e não podem suportar VLSMs.</li> <li> <b>Uso de recursos</b> - O uso de recursos inclui os requisitos de um protocolo de roteamento como espaço de memória, utilização de CPU e utilização de largura de banda de link. Os requisitos de recursos mais altos precisam de hardware mais avançado para suportar a operação do protocolo de roteamento, além dos processos de encaminhamento de pacotes.</li> <li> <b>Implantação e manutenção</b> - Implantação e manutenção descreve o nível de conhecimento necessário para que um administrador de rede implante e mantenha a rede com base no protocolo de roteamento implantado.</li></ul> <p>As vantagens e as desvantagens dos protocolos de roteamento do vetor de distância são mostradas na tabela.</p></content-text>
</page>
<page type="OneColumn" id="tl0904010402">
<content-media type="StaticGraphic" id="cm4515860153"><title><content-text></content-text></title><media ref="tl0904000000/tl0904010000/tl0904010400/tl0904010402/cm4515860153.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904010000/tl0904010400/tl0904010402/cm4515860153text.xml"/></content-media>
<content-text><p><b>Verificação de aprendizagem do protocolo de roteamento</b></p> <p>Na figura, todos os protocolos de roteamento discutidos no curso são comparados com base nessas características. Embora o IGRP não seja mais suportado pelo IOS, ele é mostrado aqui para fazer uma comparação com a versão IGRP Aprimorado. Além disso, embora o protocolo de roteamento IS-IS seja abordado em cursos de CCNP, ele é mostrado aqui porque é um protocolo IGP muito usado.</p> <p>Estude a figura e clique no botão de reinicialização para esvaziar a tabela. Arraste e solte as características apropriadas para cada protocolo de roteamento. Com base nas informações discutidas anteriormente, você já deve ser capaz de identificar as vantagens e as desvantagens dos protocolos de roteamento do vetor de distância.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904020000">
<title><content-text>Detecção de rede</content-text></title>
<topic type="" id="tl0904020100">
<title><content-text>Inicialização</content-text></title>
<page type="OneColumn" id="tl0904020101">
<content-media type="AnimationPartialScreen" id="cm6311061526"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020100/tl0904020101/cm6311061526.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020100/tl0904020101/cm6311061526text.xml"/></content-media>
<content-text><p>Quando um roteador é <i>inicializado</i>, ele não sabe nada sobre a topologia da rede. Ele não sabe nem mesmo que há dispositivos na outra extremidade dos seus links. As únicas informações que um roteador tem são as de seu próprio arquivo de configuração salvo armazenado na NVRAM. Quando um roteador é inicializado com êxito, ele aplica a configuração salva. Conforme descrito no Capítulo 1 e no Capítulo 2, se o endereçamento IP for configurado corretamente, o roteador fará a detecção inicial de suas próprias redes diretamente conectadas.</p> <p><b>Detecção inicial da rede</b></p> <p>No exemplo da figura, depois de uma inicialização e antes da troca de informações de roteamento, os roteadores farão a detecção inicial das próprias máscaras de sub-rede e redes diretamente conectadas. Essas informações são adicionadas às suas tabelas de roteamento:</p> <p><b>R1</b></p> <ul><li> 10.1.0.0 disponível através da interface FastEthernet 0/0 </li> <li> 10.2.0.0 disponível através da interface Serial 0/0/0</li></ul> <p><b>R2</b></p> <ul><li> 10.2.0.0 disponível através da interface Serial 0/0/0 </li> <li> 10.3.0.0 disponível através da interface Serial 0/0/1</li></ul> <p><b>R3</b></p> <ul><li> 10.3.0.0 disponível através da interface Serial 0/0/1 </li> <li> 10.4.0.0 disponível através da interface FastEthernet 0/0</li></ul> <p><b>Reproduza a animação para assistir a essa detecção inicial de redes conectadas para R1.</b> Com essas informações iniciais, os roteadores começam a trocar informações de roteamento.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020200">
<title><content-text>Troca inicial de informações de roteamento</content-text></title>
<page type="OneColumn" id="tl0904020201">
<content-media type="AnimationPartialScreen" id="cm2898643623"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020200/tl0904020201/cm2898643623.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020200/tl0904020201/cm2898643623text.xml"/></content-media>
<content-text><p>Se um protocolo de roteamento for configurado, os roteadores começarão a trocar atualizações de roteamento. Inicialmente, essas atualizações só incluem informações sobre suas redes diretamente conectadas. Ao receber uma atualização, o roteador verifica a existência de novas informações nela. Todas as rotas que ainda não estiverem em sua tabela de roteamento serão adicionadas.</p> <p><b>Troca inicial</b></p> <p>Reproduza a animação para visualizar o R1, o R2 e o R3 fazendo a troca inicial. Os três roteadores enviam suas tabelas de roteamento aos seus vizinhos que, nesse momento, contêm somente as redes diretamente conectadas. Cada roteador processa as atualizações da seguinte maneira:</p> <p><b>R1</b></p> <ul><li> Envia uma atualização sobre a rede 10.1.0.0 pela interface Serial0/0/0</li> <li> Envia uma atualização sobre a rede 10.2.0.0 pela interface FastEthernet0/0</li> <li> Recebe a atualização do R2 sobre a rede 10.3.0.0 com uma métrica de 1</li> <li> Armazena a rede 10.3.0.0 na tabela de roteamento com uma métrica de 1</li></ul> <p><b>R2</b></p> <ul><li> Envia uma atualização sobre a rede 10.3.0.0 pela interface Serial 0/0/0</li> <li> Envia uma atualização sobre a rede 10.2.0.0 pela interface Serial 0/0/1</li> <li> Recebe uma atualização do R1 sobre a rede 10.1.0.0 com uma métrica de 1</li> <li> Armazena a rede 10.1.0.0 na tabela de roteamento com uma métrica de 1</li> <li> Recebe uma atualização do R3 sobre a rede 10.4.0.0 com uma métrica de 1</li> <li> Armazena a rede 10.4.0.0 na tabela de roteamento com uma métrica de 1</li></ul> <p><b>R3</b></p> <ul><li> Envia uma atualização sobre a rede 10.4.0.0 pela interface Serial 0/0/1</li> <li> Envia uma atualização sobre a rede 10.3.0.0 pela interface FastEthernet0/0</li> <li> Recebe uma atualização do R2 sobre a rede 10.2.0.0 com uma métrica de 1</li> <li> Armazena a rede 10.2.0.0 na tabela de roteamento com uma métrica de 1</li></ul> <p>Depois dessa primeira sessão de trocas de atualizações, cada roteador conhece as redes conectadas dos seus vizinhos diretamente conectados. No entanto, você notou que o R1 ainda não conhece a 10.4.0.0 e que o R3 ainda não conhece a 10.1.0.0? O conhecimento total e uma rede convergida não acontecerão até que haja outra troca de informações de roteamento.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020300">
<title><content-text>Troca de informações de roteamento</content-text></title>
<page type="OneColumn" id="tl0904020301">
<content-media type="AnimationPartialScreen" id="cm2009435717"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020300/tl0904020301/cm2009435717.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020300/tl0904020301/cm2009435717text.xml"/></content-media>
<content-text><p>Neste ponto, os roteadores têm conhecimento sobre suas próprias redes diretamente conectadas e sobre as redes conectadas de seus vizinhos imediatos. Continuando o processo que resultará na convergência, os roteadores trocam a próxima sessão de atualizações periódicas. Novamente, cada roteador verifica a existência de novas informações nas atualizações.</p> <p><b>Próxima atualização</b></p> <p>Reproduza a animação para visualizar o R1, o R2 e o R3 enviando a tabela de roteamento mais recente aos seus vizinhos. Cada roteador processa as atualizações da seguinte maneira:</p> <p><b>R1</b></p> <ul><li> Envia uma atualização sobre a rede 10.1.0.0 pela interface Serial 0/0/0.</li> <li> Envia uma atualização sobre as redes 10.2.0.0 e 10.3.0.0 pela interface FastEthernet0/0.</li> <li> Recebe uma atualização do R2 sobre a rede 10.4.0.0 com uma métrica de 2.</li> <li> Armazena a rede 10.4.0.0 na tabela de roteamento com uma métrica de 2.</li> <li> A mesma atualização do R2 contém informações sobre a rede 10.3.0.0 com uma métrica de 1. Não há nenhuma alteração; portanto, as informações de roteamento permanecem as mesmas.</li></ul> <p><b>R2</b></p> <ul><li> Envia uma atualização sobre as redes 10.3.0.0 e 10.4.0.0 pela interface Serial 0/0/0.</li> <li> Envia uma atualização sobre as redes 10.1.0.0 e 10.2.0.0 pela interface Serial 0/0/1.</li> <li> Recebe uma atualização do R1 sobre a rede 10.1.0.0. Não há nenhuma alteração; portanto, as informações de roteamento permanecem as mesmas.</li> <li> Recebe uma atualização do R3 sobre a rede 10.4.0.0. Não há nenhuma alteração; portanto, as informações de roteamento permanecem as mesmas.</li></ul> <p><b>R3</b></p> <ul><li> Envia uma atualização sobre a rede 10.4.0.0 pela interface Serial 0/0/1.</li> <li> Envia uma atualização sobre as redes 10.2.0.0 e 10.3.0.0 pela interface FastEthernet0/0.</li> <li> Recebe uma atualização do R2 sobre a rede 10.1.0.0 com uma métrica de 2.</li> <li> Armazena a rede 10.1.0.0 na tabela de roteamento com uma métrica de 2.</li> <li> A mesma atualização do R2 contém informações sobre a rede 10.2.0.0 com uma métrica de 1. Não há nenhuma alteração; portanto, as informações de roteamento permanecem as mesmas.</li></ul> <p><b>Nota:</b> Os protocolos de roteamento do vetor de distância geralmente implantam uma técnica conhecida como <content-link target="cg3251675130" type="glossary">split horizon</content-link>. O split horizon impede o envio das informações pela mesma interface da qual foram recebidas. Por exemplo, o R2 não enviaria uma atualização pela Serial 0/0/0 que contém a rede 10.1.0.0, pois o R2 aprendeu aquela rede através da Serial 0/0/0. Esse mecanismo será explicado em mais detalhes posteriormente neste capítulo.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904020400">
<title><content-text>Convergência</content-text></title>
<page type="OneColumn" id="tl0904020401">
<content-media type="AnimationPartialScreen" id="cm4322105010"><title><content-text></content-text></title><media ref="tl0904000000/tl0904020000/tl0904020400/tl0904020401/cm4322105010.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904020000/tl0904020400/tl0904020401/cm4322105010text.xml"/></content-media>
<content-text><p>A quantidade de tempo que uma rede leva para convergir é diretamente proporcional ao tamanho dessa rede. Na animação, um roteador de filial na Região 4 (B2-R4) está sendo inicializado. A animação mostra a propagação de novas informações de roteamento à medida que as atualizações são enviadas entre roteadores vizinhos. São necessárias cinco sessões de intervalos de atualização periódicos para que a maioria dos roteadores de filial nas Regiões 1, 2 e 3 aprendam as novas rotas anunciadas pela B2-R4. Os protocolos de roteamento são comparados com base na velocidade com a qual podem propagar essas informações - sua velocidade de convergência.</p> <p>A velocidade de obtenção da convergência consiste em:</p> <ul><li> Velocidade com a qual os roteadores propagam uma mudança na topologia em uma atualização de roteamento para seus vizinhos. </li> <li> A velocidade do cálculo das melhores rotas usando as novas informações de roteamento coletadas.</li></ul> <p>Para que uma rede seja completamente operável, é necessário que haja convergência nela. Portanto, os administradores de rede preferem protocolos de roteamento com tempos de convergência menores.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904030000">
<title><content-text>Manutenção da tabela de roteamento</content-text></title>
<topic type="" id="tl0904030100">
<title><content-text>Atualizações periódicas: RIPv1 e IGRP</content-text></title>
<page type="OneColumn" id="tl0904030101">
<content-media type="AnimationPartialScreen" id="cm4501148513"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030100/tl0904030101/cm4501148513.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030100/tl0904030101/cm4501148513text.xml"/></content-media>
<content-text><p><b>Manutenção da tabela de roteamento</b></p> <p>Muitos protocolos do vetor de distância empregam atualizações periódicas para trocar informações de roteamento com seus vizinhos e para manter informações de roteamento atualizadas na tabela de roteamento. RIP e IGRP são exemplos desses protocolos. </p> <p>Na animação, os roteadores estão enviando a tabela de roteamento periodicamente aos seus vizinhos. O termo <i>atualizações periódicas</i> se refere ao fato de que um roteador envia a tabela de roteamento completa aos seus vizinhos em um intervalo predefinido. Para o RIP, essas atualizações são enviadas a cada 30 segundos como um broadcast (255.255.255.255), havendo ou não alterações na topologia. Esse intervalo de 30 segundos é um temporizador de atualização de rota que também ajuda no acompanhamento da idade das informações de roteamento na tabela de roteamento. </p> <p>A idade das informações de roteamento em uma tabela de roteamento é atualizada sempre que uma atualização é recebida. Desse modo, as informações da tabela de roteamento poderão ser mantidas quando houver uma alteração na topologia. As alterações podem ocorrer por várias razões, incluindo:</p> <ul><li> Falha de um link</li> <li> Introdução de um novo link</li> <li> Falha de um roteador</li> <li> Alteração de parâmetros de link</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0904030102">
<content-media type="InteractiveGraphicHotspots" id="cm8821870465"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030100/tl0904030102/cm8821870465.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030100/tl0904030102/cm8821870465text.xml"/></content-media>
<content-text><p><b>Temporizadores de RIP</b></p> <p>Além do temporizador de atualização, o IOS implementa três temporizadores adicionais para o RIP:</p> <ul><li> Inválido</li> <li> Descarga</li> <li> Hold-down</li></ul> <p><b>Temporizador inválido.</b> Se uma atualização não foi recebida para atualizar uma rota existente depois de 180 segundos (o padrão), a rota será marcada como inválida definindo a métrica como 16. A rota será retida na tabela de roteamento até que o temporizador de descarga expire.</p> <p><b>Temporizador de descarga. </b>Por padrão, o temporizador de descarga é definido para 240 segundos, 60 segundos a mais que o temporizador inválido. Quando o temporizador de descarga expira, a rota é removida da tabela de roteamento.</p> <p><b>Temporizador de hold-down.</b> Esse temporizador estabiliza as informações de roteamento e ajuda a impedir loops de roteamento durante períodos em que a topologia está convergindo em novas informações. Quando uma rota é marcada como inalcançável, ela deve ficar em hold-down pelo tempo suficiente para que todos os roteadores na topologia aprendam a rede inalcançável. Por padrão, o temporizador de hold-down é definido para 180 segundos. O temporizador de hold-down é discutido com mais detalhes posteriormente neste capítulo.</p> <p><b>Clique em <span class="cmd">show ip route </span>na figura.</b></p> <p>Os valores do temporizador podem ser verificados com dois comandos: <span class="cmd"><b>show ip route</b></span> e <span class="cmd"><b>show ip protocols</b></span>. Na saída de comando de <span class="cmd"><b>show ip route</b></span>, observe que cada rota aprendida através do RIP mostra o tempo decorrido desde a última atualização, expresso em segundos. </p> <p><b>Clique em <span class="cmd">show ip protocols</span> na figura.</b></p> <p>Essas informações também são repetidas no comando <span class="cmd">show ip protocols</span> gerado com o título <span class="cmd">Última atualização</span>. O comando <span class="cmd"><b>show ip protocols</b></span> mostra quando esse roteador, R1, está pronto para enviar sua próxima sessão de atualizações. Ele também lista os valores padrão do temporizador inválido, de hold-down e de descarga.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030200">
<title><content-text>Atualizações associadas: EIGRP</content-text></title>
<page type="OneColumn" id="tl0904030201">
<content-media type="AnimationPartialScreen" id="cm2852931343"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030200/tl0904030201/cm2852931343.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030200/tl0904030201/cm2852931343text.xml"/></content-media>
<content-text><p>Ao contrário do que ocorre com outros protocolos de roteamento do vetor de distância, o EIGRP não envia atualizações periódicas. Em vez disso, o EIGRP enviará <content-link target="cg4471473624" type="glossary">atualizações associadas</content-link> sobre uma rota quando um caminho for alterado ou a métrica dessa rota for alterada. Quando uma nova rota fica disponível ou quando uma rota precisar ser removida, o EIGRP envia somente uma atualização sobre essa rede, e não sobre a tabela inteira. Essas informações são enviadas somente aos roteadores que precisam delas.</p> <p>O protocolo EIGRP usa atualizações que são:</p> <ul><li> Não periódicas, pois não são enviadas regularmente.</li> <li> Parciais, enviadas somente quando houver uma mudança na topologia que influencie as informações de roteamento. </li> <li> Limitadas, o que significa que a propagação das atualizações parciais são limitadas automaticamente para que somente os roteadores que precisam das informações sejam atualizados.</li></ul> <p><b>Nota: </b>Mais detalhes sobre como o EIGRP opera serão apresentados no Capítulo 9.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030300">
<title><content-text>Atualizações disparadas</content-text></title>
<page type="OneColumn" id="tl0904030301">
<content-media type="AnimationPartialScreen" id="cm7549282981"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030300/tl0904030301/cm7549282981.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030300/tl0904030301/cm7549282981text.xml"/></content-media>
<content-text><p>Para acelerar a convergência quando há uma mudança na topologia, o RIP usa atualizações disparadas. Uma atualização disparada é uma atualização da tabela de roteamento enviada imediatamente em resposta a uma alteração de roteamento. As atualizações disparadas não esperam que os temporizadores de atualização expirem. O roteador de detecção envia imediatamente uma mensagem de atualização aos roteadores adjacentes. Os roteadores de recebimento, por sua vez, geram atualizações disparadas que notificam seus vizinhos sobre a alteração. </p> <p>As atualizações disparadas são enviadas quando:</p> <ul><li> Uma interface alterar seu estado (ativada ou desativada)</li> <li> Uma rota tiver entrado (ou saído) do estado "inalcançável"</li> <li> Uma rota é instalada na tabela de roteamento</li></ul> <p>Se houvesse uma garantia de que a onda de atualizações alcançaria todos os roteadores apropriados imediatamente, o uso de atualizações disparadas seria suficiente. No entanto, há dois problemas com as atualizações disparadas:</p> <ul><li> Pacotes que contêm a mensagem de atualização podem ser descartados ou corrompidos por algum link na rede.</li> <li> As atualizações disparadas não acontecem instantaneamente. É possível que um roteador que ainda não recebeu a atualização disparada emita uma atualização regular no tempo errada, fazendo com que a rota incorreta seja reinserida em um vizinho que já havia recebido a atualização disparada.</li></ul> <p><b>Reproduza a animação para visualizar como uma mudança na topologia de rede é propagada por toda a rede.</b> Quando a rede 10.4.0.0 fica indisponível e roteador 3 fica ciente disso, ele envia as informações aos seus vizinhos. Então, as informações são propagadas por toda a rede.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904030400">
<title><content-text>Atraso do sincronismo aleatório</content-text></title>
<page type="OneColumn" id="tl0904030401">
<content-media type="AnimationPartialScreen" id="cm7343288441"><title><content-text></content-text></title><media ref="tl0904000000/tl0904030000/tl0904030400/tl0904030401/cm7343288441.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904030000/tl0904030400/tl0904030401/cm7343288441text.xml"/></content-media>
<content-text><p><b>Problemas com atualizações sincronizadas</b></p> <p>Quando vários roteadores transmitem atualizações de roteamento ao mesmo tempo em segmentos de rede local de multiacesso (conforme mostrado na animação), os pacotes de atualização podem colidir e causar atrasos ou consumir muita largura de banda. </p> <p><b>Nota</b>: As colisões são apenas um problema com hubs e não com switches.</p> <p>O processo de enviar atualizações ao mesmo tempo é conhecido como sincronização de atualizações. A sincronização pode se tornar uma problema com protocolos de roteamento do vetor de distância devido ao uso que eles fazem de atualizações periódicas. À medida que mais temporizadores de roteadores são sincronizados, mais colisões de atualizações e mais atrasos ocorrem na rede. Inicialmente, as atualizações de roteadores não serão sincronizadas. Mas, com o passar do tempo, os temporizadores em uma rede serão globalmente sincronizados.</p> <p><b>A solução</b></p> <p>Para impedir a sincronização de atualizações entre roteadores, o IOS Cisco usa uma variável aleatória, chamada de RIP_JITTER, que subtrai uma quantidade de tempo variável do intervalo de atualização para cada roteador na rede. Esse atraso do sincronismo, ou quantidade de tempo variável, vai de 0% a 15% do intervalo de atualização especificado. Desse modo, o intervalo de atualização varia aleatoriamente de 25 a 30 segundos para o intervalo padrão de 30 segundos.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904040000">
<title><content-text>Loops de roteamento</content-text></title>
<topic type="" id="tl0904040100">
<title><content-text>Definição e implicações</content-text></title>
<page type="OneColumn" id="tl0904040101">
<content-media type="AnimationPartialScreen" id="cm7226242261"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040100/tl0904040101/cm7226242261.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040100/tl0904040101/cm7226242261text.xml"/></content-media>
<content-text><p><b>O que é um loop de roteamento?</b></p> <p>Um loop de roteamento é uma condição em que um pacote é transmitido continuamente em uma série de roteadores sem sequer alcançar sua rede de destino desejada. Um loop de roteamento pode ocorrer quando dois ou mais roteadores têm informações de roteamento que indicam de forma incorreta que um caminho válido para um destino inalcançável existe.</p> <p>O loop pode ser resultado de:</p> <p> </p> <ul><li> Rotas estáticas configuradas incorretamente</li> <li> Rota configurada incorretamente <content-link target="cg6329240526" type="glossary">redistribuição</content-link> (redistribuição é o processo de entregar as informações de roteamento de um protocolo de roteamento para outro. Ele é discutido em cursos de nível CCNP)</li> <li> Tabelas de roteamento inconsistentes que não estão sendo atualizadas devido a uma convergência lenta em uma rede variável</li> <li> Rotas de descarte incorretamente instaladas ou configuradas </li></ul> <p>Os protocolos de roteamento do vetor de distância são fáceis de operar. Sua simplicidade resulta em desvantagens de protocolo, como loops de roteamento. Os loops de roteamento não chegam a ser um problema em protocolos de roteamento link-state, mas podem ocorrer em determinadas situações.</p> <p><b>Nota: </b>O protocolo IP tem seu próprio mecanismo para impedir a possibilidade de um pacote atravessar a rede indefinidamente. O IP tem um campo Tempo de vida (TTL, Time To Live) e seu valor é reduzido de 1 em cada roteador. Se o TTL for zero, o roteador irá descartar o pacote.</p> <p><b>Quais são as implicações dos loops de roteamento?</b></p> <p>Um loop de roteamento pode ter um efeito devastador em uma rede, resultando em um desempenho de rede inferior ou até mesmo em uma indisponibilidade de rede. </p> <p>Um loop de roteamento pode criar as seguintes condições:</p> <p> </p> <ul><li> A largura de banda de link será usada para loops de tráfego alternado de um lado para outro entre os roteadores em um loop.</li> <li> A CPU de um roteador será estendida porque os pacotes entraram em loop.</li> <li> A CPU de um roteador será sobrecarregada com encaminhamentos de pacote inúteis que afetarão a convergência da rede de forma negativa.</li> <li> As atualizações de roteamento podem ser perdidas ou não ser processadas em tempo hábil. Essas condições introduziriam loops de roteamento adicionais, piorando a situação.</li> <li> Os pacotes podem ser perdidos em "buracos negros".</li></ul> <p>Reproduza a animação para exibir um possível cenário de loop de roteamento no qual os mecanismos para impedir tais loops não existem.</p> <p>Como você pode ver, os loops de roteamento consomem largura de banda e recursos do roteador, resultando em uma rede lenta ou que não responde.</p> <p>Há vários mecanismos disponíveis para eliminar loops de roteamento, principalmente com protocolos de roteamento do vetor de distância. Esses mecanismos incluem: </p> <ul><li> Definição de uma métrica máxima para impedir a <content-link target="cg9223787049" type="glossary">contagem até o infinito</content-link></li> <li> Temporizadores de hold-down</li> <li> Split horizon</li> <li> <content-link target="cg5926288786" type="glossary">Route poisoning</content-link> ou <content-link target="cg8124883934" type="glossary">poison reverse</content-link></li> <li> Atualizações disparadas</li></ul> <p>As atualizações disparadas foram discutidas na seção anterior. Os outros mecanismos de prevenção de loops são discutidos posteriormente neste capítulo.</p></content-text>
</page>
<page type="OneColumn" id="tl0904040102">
<content-media type="ActivityPKA" id="cm1797405272"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040100/tl0904040102/cm1797405272/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904040000/tl0904040100/tl0904040102/cm1797405272/icontext.xml"/></content-media>
<content-text><p>Use a Atividade do Packet Tracer para saber como um loop de roteamento pode ocorrer com rotas estáticas configuradas incorretamente.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0904040200">
<title><content-text>Problema: Contagem até o infinito</content-text></title>
<page type="OneColumn" id="tl0904040201">
<content-media type="AnimationPartialScreen" id="cm4594421111"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040200/tl0904040201/cm4594421111.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040200/tl0904040201/cm4594421111text.xml"/></content-media>
<content-text><p><b>A contagem até o infinito é uma condição que existe quando as atualizações de roteamento imprecisas aumentam o valor da métrica para "infinito" para uma rede que não é mais alcançável.</b> A animação mostra o que acontece com as tabelas de roteamento quando os três roteadores continuam enviando atualizações imprecisas entre si.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040300">
<title><content-text>Definindo um valor máximo</content-text></title>
<page type="OneColumn" id="tl0904040301">
<content-media type="StaticGraphic" id="cm4704444237"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040300/tl0904040301/cm4704444237.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040300/tl0904040301/cm4704444237text.xml"/></content-media>
<content-text><p>Com a finalidade de parar o aumento da métrica, <b>"infinito" é definido configurando um valor máximo para a métrica</b>. Por exemplo, o RIP define o infinito como 16 saltos – uma métrica "inalcançável". Quando os roteadores fizerem a "contagem até o infinito", eles marcarão a rota como inalcançável.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040400">
<title><content-text>Impedindo loops de roteamento com temporizadores de hold-down</content-text></title>
<page type="OneColumn" id="tl0904040401">
<content-media type="AnimationPartialScreen" id="cm4646952885"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040400/tl0904040401/cm4646952885.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040400/tl0904040401/cm4646952885text.xml"/></content-media>
<content-text><p>Anteriormente, você aprendeu que os protocolos do vetor de distância empregam atualizações disparadas para acelerar o processo de convergência. Lembre-se de que, além das atualizações disparadas, os roteadores que usam protocolos de roteamento do vetor de distância também enviam atualizações periódicas. Imagine que uma rede específica é instável. A interface é redefinida como <b>ativada</b>, <b>desativada</b> e <b>ativada</b> rapidamente. A rota está oscilando. Usando as atualizações disparadas, os roteadores podem reagir muito rapidamente e criar um loop de roteamento involuntariamente. Um loop de roteamento também pode ser criado por uma atualização periódica enviada pelos roteadores durante a instabilidade. Os temporizadores de hold-down impedem que os loops de roteamento sejam criados por essas condições. Os temporizadores de hold-down também ajudam a impedir a condição de contagem até o infinito.</p> <p><b>Os temporizadores de hold-down são usados para impedir que as mensagens de atualização regulares restabeleçam incorretamente uma rota que pode ter apresentado uma falha.</b> Eles instruem os roteadores a manter todas as alterações que podem afetar rotas durante um período especificado. Se uma rota for identificada como <b>desativada</b>, ou possivelmente desativada, todas as outras informações dessa rota que contiverem o mesmo status, ou um status pior, serão ignoradas por um período pré-determinado (o período de hold-down). Isso significa que os roteadores deixarão uma rota marcada como <i>inalcançável</i> nesse estado por um período longo o suficiente para que as atualizações propaguem as tabelas de roteamento com as informações mais recentes.</p> <p><b>Os temporizadores de hold-down funcionam da seguinte maneira:</b></p> <p>1. Um roteador recebe uma atualização de um vizinho indicando que determinada rede não está mais acessível.</p> <p>2. O roteador marca a rede como possivelmente desativada e inicia o temporizador de hold-down.</p> <p>3. Se uma atualização com uma métrica melhor para essa rede for recebida de qualquer roteador vizinho durante o período de hold-down, a rede será restabelecida e o temporizador de hold-down será removido.</p> <p>4. Se uma atualização de qualquer outro vizinho for recebida durante o período de hold-down com a mesma métrica ou com uma métrica pior para essa rede, tal atualização será ignorada. Desse modo, haverá mais tempo para a propagação das informações sobre a alteração.</p> <p>5. Os roteadores ainda encaminham pacotes para redes de destino marcadas como possivelmente desativadas. Isso permite que o roteador supere qualquer problema associado à conectividade intermitente. Se a rede de destino estiver mesmo indisponível e os pacotes forem encaminhados, será criado um roteamento de buraco negro que irá durar até que o temporizador de hold-down expire. </p> <p><b>Reproduza a animação para visualizar um exemplo do processo de hold-down.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0904040500">
<title><content-text>Regra split horizon</content-text></title>
<page type="OneColumn" id="tl0904040501">
<content-media type="AnimationPartialScreen" id="cm6472667750"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040500/tl0904040501/cm6472667750.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040500/tl0904040501/cm6472667750text.xml"/></content-media>
<content-text><p>O split horizon é outro método usado para impedir loops de roteamento causados pela convergência lenta de um protocolo de roteamento do vetor de distância. <b>A regra do split horizon diz que um roteador não deve anunciar uma rede através da interface da qual veio a atualização.</b> </p> <p>Se você aplicar o split horizon ao exemplo anterior da rota 10.4.0.0, as seguintes ações serão geradas:</p> <ul><li> O R3 anuncia a rede 10.4.0.0 para o R2.</li> <li> O R2 recebe as informações e atualiza sua tabela de roteamento.</li> <li> Em seguida, o R2 anuncia a rede 10.4.0.0 para o R1 pela S0/0/0. O R2 não anuncia a rede 10.4.0.0 para o R3 pela S0/0/1, pois a rota originou dessa interface.</li> <li> O R1 recebe as informações e atualiza sua tabela de roteamento.</li> <li> Por causa do split horizon, o R1 também não anuncia as informações sobre a rede 10.4.0.0 novamente para o R2.</li></ul> <p>São trocadas atualizações de roteamento completas, com exceção de rotas que violam a regra split horizon. Os resultados têm esta aparência:</p> <ul><li> O R2 anuncia as redes 10.3.0.0 e 10.4.0.0 para o R1.</li> <li> O R2 anuncia as redes 10.1.0.0 e 10.2.0.0 para o R3.</li> <li> O R1 anuncia a rede 10.1.0.0 para o R2.</li> <li> O R3 anuncia a rede 10.4.0.0 para o R2.</li></ul> <p><b>Reproduza a animação para visualizar esse processo.</b></p> <p>Observe que o R2 envia atualizações de roteamento diferentes para o R1 e o R3.</p> <p><b>Nota:</b> O split horizon pode ser desabilitado por um administrador. Em determinadas condições, isso tem que ser feito para que o roteamento apropriado seja obtido. Essas condições são discutidas em cursos posteriores.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040600">
<title><content-text>Split horizon com poison reverse ou route poisoning</content-text></title>
<page type="OneColumn" id="tl0904040601">
<content-media type="AnimationPartialScreen" id="cm4645000737"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040600/tl0904040601/cm4645000737.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040600/tl0904040601/cm4645000737text.xml"/></content-media>
<content-text><p><b>Route poisoning </b></p> <p>O route poisoning é outro método empregado pelos protocolos de roteamento do vetor de distância para impedir loops de roteamento. <b>O route poisoning é usado para marcar a rota como inalcançável em uma atualização de roteamento enviada para outros roteadores. </b>Inalcançável é interpretado como uma métrica definida como máximo. Para o RIP, uma rota envenenada tem uma métrica de 16.</p> <p><b>Reproduza a animação para visualizar o route poisoning em vigor. </b></p> <p> </p> <p>Ocorre o seguinte processo:</p> <ul><li> A rede 10.4.0.0 fica indisponível devido a uma falha de link. </li> <li> O R3 envenena a métrica com um valor de 16 e, em seguida, envia uma <content-link target="cg7301905064" type="glossary">atualização disparada</content-link> (triggered update) informando que a rede 10.4.0.0 está indisponível.</li> <li> O R2 processa a atualização. Como a métrica é 16, o R2 invalida a entrada de roteamento em sua tabela de roteamento. </li> <li> Então, o R2 envia a atualização de poison ao R1, indicando que a rota está indisponível, novamente definindo o valor da métrica como 16. </li> <li> O R1 processa a atualização e invalida a entrada de roteamento da rede 10.4.0.0 em sua tabela de roteamento.</li></ul> <p>O route poisoning acelera o processo de convergência à medida que as informações sobre a rede 10.4.0.0 são difundidas na rede com mais rapidez do que ao esperar que a contagem de saltos alcance o "infinito".</p></content-text>
</page>
<page type="OneColumn" id="tl0904040602">
<content-media type="AnimationPartialScreen" id="cm5691241443"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040600/tl0904040602/cm5691241443.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040600/tl0904040602/cm5691241443text.xml"/></content-media>
<content-text><p><b>Split horizon com poison reverse</b></p> <p>O poison reverse pode ser combinado com a técnica do split horizon. O método é chamado de split horizon com poison reverse. <b>A regra para o split horizon com o poison reverse determina que, ao enviar atualizações por uma interface específica, designe todas as redes que foram aprendidas nessa interface como inalcançáveis.</b></p> <p>O conceito de split horizon com poison reverse é: instruir explicitamente um roteador a ignorar uma rota é melhor do que não instruí-lo preventivamente sobre a rota.</p> <p><b>Reproduza a animação para visualizar um exemplo do split horizon com o poison reverse em vigor.</b></p> <p>Ocorre o seguinte processo:</p> <ul><li> A rede 10.4.0.0 fica indisponível devido a uma falha de link. </li> <li> O R3 envenena a métrica com um valor de 16 e, em seguida, envia uma atualização disparada informando que a rede 10.4.0.0 está indisponível. </li> <li> O R2 processa essa atualização, invalida a entrada de roteamento em sua tabela de roteamento e envia imediatamente um poison reverse ao R3. </li></ul> <p>Poison reverse é uma circunstância específica que substitui o split horizon. Ocorre para garantir que o R3 não esteja suscetível a atualizações incorretas sobre rede 10.4.0.0. </p> <p><b>Nota</b>: O split horizon é habilitado por padrão. No entanto, o split horizon com o poison reverse pode não ser o padrão em todas as implementações de IOS.</p></content-text>
</page>
</topic>
<topic type="" id="tl0904040700">
<title><content-text>IP e TTL</content-text></title>
<page type="OneColumn" id="tl0904040701">
<content-media type="AnimationPartialScreen" id="cm6043053576"><title><content-text></content-text></title><media ref="tl0904000000/tl0904040000/tl0904040700/tl0904040701/cm6043053576.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904040000/tl0904040700/tl0904040701/cm6043053576text.xml"/></content-media>
<content-text><p><b>O tempo de vida (TTL, Time To Live) é um campo de 8 bits no cabeçalho do IP que limita o número de saltos que um pacote pode atravessar pela rede antes de ser descartado. </b>A finalidade do campo TTL é evitar uma situação na qual um pacote que não pode ser entregue continue circulando indefinidamente na rede. Com o TTL, o campo de 8 bits é definido com um valor pelo dispositivo de origem do pacote. O TTL diminuído em um por todos os roteadores na rota para seu destino. Se o campo TTL alcançar zero antes que o pacote chegue ao seu destino, o pacote será descartado e o roteador enviará uma mensagem de erro do protocolo ICMP à origem do pacote IP. </p> <p>A animação mostra que, mesmo que ocorram loops de roteamento, os pacotes não permanecerão em loop indefinidamente na rede. Finalmente, o valor do TTL diminuirá até alcançar 0 e o pacote será descartado pelo roteador.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904050000">
<title><content-text>Protocolos de roteamento do vetor de distância hoje</content-text></title>
<topic type="" id="tl0904050100">
<title><content-text>RIP e EIGRP</content-text></title>
<page type="OneColumn" id="tl0904050101">
<content-media type="ActivityDnDCheckReset" id="cm2106242849"><title><content-text></content-text></title><media ref="tl0904000000/tl0904050000/tl0904050100/tl0904050101/cm2106242849.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904050000/tl0904050100/tl0904050101/cm2106242849text.xml"/></content-media>
<content-text><p>Para os protocolos de roteamento do vetor de distância, há apenas duas escolhas: RIP ou EIGRP. A decisão sobre o protocolo de roteamento a ser utilizado em determinada situação é influenciada por vários fatores, incluindo: </p> <ul><li> O tamanho da rede</li> <li> Compatibilidade entre modelos de roteadores</li> <li> Conhecimento administrativo necessário</li></ul> <p><b>RIP</b></p> <p>Ao longo dos anos, o RIP evoluiu de um protocolo de roteamento classful (RIPv1) para um protocolo de roteamento classless (RIPv2). O RIPv2 é um protocolo de roteamento padronizado que funciona em um ambiente misto de roteadores de fornecedores. Os roteadores feitos por empresas diferentes podem comunicar-se usando o RIP. Ele é um dos protocolos de roteamento mais fáceis de configurar. Por isso, é uma boa opção para redes pequenas. No entanto, o RIPv2 ainda possui limitações. O RIPv1 e o RIPv2 têm uma métrica de rota baseada somente na contagem de saltos e limitada a 15 saltos.</p> <p>Características do RIP:</p> <ul><li> Suporta split horizon e split horizon com poison reverse para impedir loops.</li> <li> É capaz de fazer o balanceamento de carga de até seis caminhos de custo iguais. O padrão é quatro caminhos de custo iguais.</li></ul> <p>O RIPv2 introduziu seguintes as melhorias no RIPv1:</p> <ul><li> Inclui a máscara de sub-rede nas atualizações de roteamento, tornando-o um protocolo de roteamento classless.</li> <li> Tem mecanismo de autenticação para proteger atualizações da tabela de roteamento.</li> <li> Suporta a máscara de sub-rede de tamanho variável (VLSM).</li> <li> Utiliza endereços de multicast em vez de broadcast.</li> <li> Suporta a sumarização manual de rota.</li></ul> <p><b>EIGRP</b></p> <p>O Enhanced IGRP (EIGRP) foi desenvolvido a partir do IGRP, outro protocolo do vetor de distância. O EIGRP é um, protocolo de roteamento do vetor de distância classless e com recursos encontrados em protocolos de roteamento link-state. No entanto, ao contrário do RIP ou do OSPF, o EIGRP é um protocolo proprietário desenvolvido pela Cisco e executado somente em roteadores Cisco.</p> <p>Os recursos do EIGRP incluem:</p> <ul><li> Atualizações disparadas (o EIGRP não tem nenhuma atualização periódica).</li> <li> Uso de uma <content-link target="cg4943667766" type="glossary">tabela de topologia</content-link> para manter todas as rotas recebidas de vizinhos (não só os melhores caminhos).</li> <li> Estabelecimento de adjacências com roteadores vizinhos que usam o protocolo hello EIGRP.</li> <li> Suporte ao VLSM e à sumarização manual de rota. Eles permitem que o EIGRP crie grandes redes hierarquicamente estruturadas.</li></ul> <p>Vantagens do EIGRP:</p> <ul><li> Embora as rotas sejam propagadas como um vetor de distância, a métrica é baseada em largura de banda mínima e atraso cumulativo do caminho, e não na contagem de saltos.</li> <li> Convergência rápida devido ao cálculo de rota do Algoritmo de atualização por broadcast. O DUAL permite a inserção de rotas de backup na tabela de topologia do EIGRP. Elas serão usadas se a rota principal falhar. Como é um procedimento local, a alteração para a rota de backup é imediata e não envolve a ação em nenhum outro roteador.</li> <li> O termo atualizações associadas significa que o EIGRP usa menos largura de banda, principalmente em redes grandes com muitas rotas. </li> <li> O EIGRP suporta vários protocolos de camada de Rede através de módulos dependentes do protocolo, que incluem suporte a IP, IPX e AppleTalk.</li></ul></content-text>
</page>
</topic>
</section>
<section type="" id="tl0904060000">
<title><content-text>Atividades de laboratório</content-text></title>
<topic type="" id="tl0904060100">
<title><content-text>Atividades de laboratório</content-text></title>
<page type="OneColumn" id="tl0904060101">
<content-media type="ActivityLab" id="cm5872906315"><title><content-text></content-text></title><media ref="tl0904000000/tl0904060000/tl0904060100/tl0904060101/cm5872906315/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904060000/tl0904060100/tl0904060101/cm5872906315/icontext.xml"/></content-media>
<content-text><p>Nesta atividade do laboratório, você recriará uma rede com base apenas nas saídas de comando <span class="cmd"><b>show ip route</b></span>. Em seguida, para verificar a sua resposta, você configurará os roteadores e fará uma comparação da tabela de roteamento real com a tabela de roteamento mostrada na documentação do laboratório.</p><p><b>Clique no ícone do laboratório para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0904070000">
<title><content-text>Resumo</content-text></title>
<topic type="" id="tl0904070100">
<title><content-text>Resumo e revisão</content-text></title>
<page type="OneColumn" id="tl0904070101">
<content-media type="ChapterSummary" id="cm4424452996"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070101/cm4424452996.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070101/cm4424452996text.xml"/></content-media>
<content-text><p><b>Resumo</b></p> <p>Um modo de classificar os protocolos de roteamento é pelo tipo de algoritmo que eles usam para determinar o melhor caminho para uma rede de destino. Os protocolos de roteamento podem ser classificados como link-state, do vetor de distância ou de vetor de caminho. Vetor de distância significa que as rotas são anunciadas como vetores de distância e direção. A distância é definida em termos de uma métrica como contagem de saltos, e a direção é dada simplesmente pelo roteador do próximo salto ou pela interface de saída. </p> <p>Os protocolos de roteamento do vetor de distância incluem:</p> <ul><li> RIPv1</li> <li> RIPv2</li> <li> IGRP</li> <li> EIGRP</li> </ul> <p>Os roteadores que usam protocolos de roteamento do vetor de distância determinam o melhor caminho para redes remotas com base nas informações que aprendem com seus vizinhos. Se o roteador X aprender dois caminhos para a mesma rede, um através do roteador Y a 7 saltos e outra rota através do roteador Z a 10 saltos, o roteador escolherá o caminho mais curto que usa o roteador Y como roteador do próximo salto. O roteador X não conhece a aparência da rede além dos roteadores Y e Z, e só pode tomar a decisão sobre o melhor caminho com base nas informações enviadas a ele por esses dois roteadores. Os protocolos de roteamento do vetor de distância não têm um mapa da topologia como os protocolos de roteamento link-state.</p> <p>A detecção da rede é um processo importante de qualquer protocolo de roteamento. Alguns protocolos de roteamento do vetor de distância, como o RIP, passam por um processo passo a passo de aprendizado e compartilhamento de informações de roteamento com seus vizinhos. Como as rotas são aprendidas com um vizinho, essas informações são passadas a outros vizinhos com um aumento na métrica de roteamento.</p> <p>Os protocolos de roteamento também precisam manter suas tabelas de roteamento para que permaneçam atualizados e precisos. O RIP troca informações da tabela de roteamento com seus vizinhos a cada 30 segundos. O EIGRP, outro protocolo de roteamento do vetor de distância, não envia essas atualizações periódicas. Ele envia somente uma atualização "limitada" quando há uma mudança na topologia e somente aos roteadores que precisam dessas informações. O EIGRP é discutido em um capítulo posterior.</p> <p>O RIP também usa temporizadores para determinar quando um roteador vizinho não está mais disponível, ou quando alguns dos roteadores podem não ter informações de roteamento atuais. Isso ocorre normalmente porque a rede ainda não convergiu devido a uma recente mudança na topologia. Os protocolos de roteamento do vetor de distância também usam atualizações disparadas para ajudar a acelerar o tempo de convergência.</p> <p>Uma desvantagem dos protocolos de roteamento do vetor de distância é o potencial para loops de roteamento. Os loops de roteamento podem ocorrer quando a rede não estiver convergida. Os protocolos de roteamento do vetor de distância usam temporizadores de hold-down para impedir o roteador de usar outra rota para uma rede recentemente desativada até que todos os roteadores tenham tempo suficiente para aprender essa mudança na topologia. </p> <p>O split horizon e o split horizon com poison reverse também são utilizados pelos roteadores para ajudar a impedir loops de roteamento. A regra de split horizon diz que um roteador nunca deve anunciar uma rota através da interface da qual veio a atualização. Split horizon com poison reverse significa que é melhor informar explicitamente que esse roteador não tem uma rota para essa rede envenenando a rota com uma métrica que informa que a rota é inalcançável.</p> <p>Às vezes, os protocolos de roteamento do vetor de distância são chamados de "roteamento por rumor", embora esse termo possa ser errôneo. Os protocolos de roteamento do vetor de distância são muito populares entre muitos administradores de rede, pois geralmente são entendidos com facilidade e sua implementação é simples. Isso não significa necessariamente que os protocolos de roteamento link-state são mais complicados ou difíceis de configurar. Infelizmente, os protocolos de roteamento link-state são conhecidos injustamente dessa forma. Você aprenderá em capítulos posteriores que os protocolos de roteamento link-state são tão fáceis de entender e configurar quanto os protocolos de roteamento do vetor de distância.</p></content-text>
</page>
<page type="FullScreen" id="tl0904070102">
<content-media type="ChapterSummary" id="cm9797318836"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070102/cm9797318836.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070102/cm9797318836text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0904070103">
<content-media type="ActivityPKA" id="cm9101922813"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070103/cm9101922813/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0904000000/tl0904070000/tl0904070100/tl0904070103/cm9101922813/icontext.xml"/></content-media>
<content-text><p>A Atividade Avançada de Integração das Habilidades no Packet Tracer deste capítulo é muito semelhante à atividade que você concluiu no final do Capítulo 3. O cenário é um pouco diferente, permitindo que você pratique melhor as suas habilidades. Nesta atividade, você cria uma rede do zero. Começando com um espaço de endereçamento e requisitos de rede, você deve implementar um design de rede que atenda às especificações. Em seguida, implemente uma configuração de roteamento estático efetiva.</p> <p><content-link target="E2_PTAct_4_7_1_Directions.pdf" type="internalfile">Instruções de integração das habilidades no Packet Tracer (PDF)</content-link></p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0904070104">
<content-media type="ChapterSummary" id="cm4803813685"><title><content-text></content-text></title><media ref="tl0904000000/tl0904070000/tl0904070100/tl0904070104/cm4803813685.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0904000000/tl0904070000/tl0904070100/tl0904070104/cm4803813685text.xml"/></content-media>
<content-text><p><b>Para Saber Mais</b></p> <p>Entender o algoritmo do vetor de distância não é difícil. Há muitos livros e fontes on-line que mostram como os algoritmos, como o Bellman-Ford, são usados em redes. Há vários sites dedicados a explicar como esses algoritmos funcionam. Procure alguns dos recursos e familiarize-se com o funcionamento do algoritmo.</p> <p>Aqui estão alguns recursos sugeridos:</p> <ul><li> <i>Interconnections, Bridges, Routers, Switches, and Internetworking Protocols</i>, de Radia Perlman</li> <li> <i>Cisco IP Routing</i>, de Alex Zinin</li> <li> <i>Routing in the Internet</i>, de Christian Huitema</li></ul></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0904080000">
<title><content-text>Teste</content-text></title>
<topic type="" id="tl0904080100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl0904080101">
<content-media type="ChapterQuiz" id="cm6089441792"><title><content-text></content-text></title><media ref="tl0904000000/tl0904080000/tl0904080100/tl0904080101/cm6089441792/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0904000000/tl0904080000/tl0904080100/tl0904080101/cm6089441792/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>

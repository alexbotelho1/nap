<chapter type="" id="tl0907000000">
<title><content-text>RIPv2</content-text></title>
<section type="ChapterIntroduction" id="tl0907000000">
<title><content-text>Introdução do capítulo</content-text></title>
<topic type="" id="tl0907000100">
<title><content-text>Introdução do capítulo</content-text></title>
<page type="OneColumn" id="tl0907000101">
<content-media type="StaticGraphic" id="cm5416580540"><title><content-text></content-text></title><media ref="tl0907000000/tl0907000000/tl0907000100/tl0907000101/cm5416580540.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907000000/tl0907000100/tl0907000101/cm5416580540text.xml"/></content-media>
<content-text><p>O RIP Versão 2 (RIPv2) é definido na RFC 1723. É o primeiro protocolo de roteamento classless discutido neste curso. A figura coloca o RIPv2 em sua perspectiva apropriada com outros protocolos de roteamento. Embora o RIPv2 seja um protocolo de roteamento adequado para alguns ambientes, ele perdeu a popularidade quando comparado a outros protocolos de roteamento como o protocolo EIGRP, OSPF, e IS-IS, que oferecem mais recursos e que são mais escaláveis. </p> <p>Embora ele possa ser menos popular do que outros protocolos de roteamento, ambas as versões de RIP ainda são apropriadas em algumas situações. Embora falte ao RIP os recursos de muitos dos protocolos mais novos, sua absoluta simplicidade e uso difundido em diversos sistemas operacionais o torna um candidato ideal para redes menores e homogêneas, onde o suporte a diversos fornecedores é necessário - principalmente dentro de ambientes UNIX. </p> <p>Como você precisará entender o RIPv2 - mesmo se não utilizá-lo - este capítulo se concentrará nas diferenças entre um protocolo de roteamento classful (RIPv1) e um protocolo de roteamento classless (RIPv2) em vez de abordar apenas os detalhes do RIPv2. A limitação principal do RIPv1 é que ele é um protocolo de roteamento classful. Como você sabe, os protocolos de roteamento classful não incluem a máscara de sub-rede com o endereço de rede em atualizações de roteamento, o que pode causar problemas com redes ou sub-redes descontíguas que utilizam Mascaramento de Sub-rede de Tamanho Variável (VLSM, Variable-Length Subnet Masking). Como o RIPv2 é um protocolo de roteamento classless, são incluídas máscaras de sub-rede nas atualizações de roteamento, tornando o RIPv2 mais compatível com ambientes de roteamento modernos.</p> <p>O RIPv2 é, de fato, mais um aprimoramento dos recursos e extensões do RIPv1 do que um protocolo completamente novo. Algumas destas características aprimoradas incluem:</p> <ul><li> Endereços do próximo salto incluídos nas atualizações de roteamento</li> <li> Uso de endereços de multicast nas atualizações enviadas</li> <li> Opção de autenticação disponível</li></ul> <p>Como o RIPv1, o RIPv2 é um protocolo de roteamento do vetor de distância. Ambas as versões de RIP compartilham as seguintes características e limitações:</p> <ul><li> Uso de holddown e outros temporizadores para ajudar a impedir loops de roteamento.</li> <li> Uso de split horizon ou split horizon com poison reverse para ajudar também a evitar loops de roteamento.</li> <li> Uso de atualizações disparadas (triggered updates) quando há uma mudança na topologia para uma convergência mais rápida.</li> <li> Limite máximo de contagem de 15 saltos, com a contagem de saltos de 16 significando uma rede inalcançável.</li></ul></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907010000">
<title><content-text>Limitações de RIPv1</content-text></title>
<topic type="" id="tl0907010100">
<title><content-text>Topologia do laboratório</content-text></title>
<page type="OneColumn" id="tl0907010101">
<content-media type="InteractiveGraphicHotspots" id="cm2868830782"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010101/cm2868830782.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010101/cm2868830782text.xml"/></content-media>
<content-text><p>A figura mostra a topologia e o esquema de endereçamento utilizados neste capítulo. Este cenário é semelhante ao domínio de roteamento com três roteadores que foi utilizado no fim do Capítulo 5, "RIPv1." Lembre-se de que ambos os roteadores R1 e R3 possuem sub-redes que fazem parte da rede classful principal 172.30.0.0/16 (classe B). Lembre-se também de que ambos os roteadores R1 e R3 estão conectados a R2 utilizando sub-redes da rede classful principal 209.165.200.0/24 (classe C). Esta topologia não é contígua e não converge porque 172.30.0.0/16 está dividida pela 209.165.200.0/24. </p> <p><b>Clique em R1, R2 e R3 para ver a configuração inicial para cada roteador.</b></p> <p><b>Rota de sumarização</b></p> <p>A topologia mostra que R2 possui uma rota de sumarização estática para a rede 192.168.0.0/16. A configuração desta rota de sumarização será exibida posteriormente nesta seção. </p> <p>O conceito e a configuração de rotas de sumarizadas estáticas foram discutidos no Capítulo 2, "Roteamento estático". Nós podemos acrescentar informações da rota estática nas atualizações de protocolo de roteamento. Isto é chamado de redistribuição e também será discutido posteriormente nesta seção. Por enquanto, entenda que esta rota de sumarização causará problemas com RIPv1 porque 192.168.0.0/16 não é um endereço classful principal e inclui todas as /24 versões de 192.168.0.0/16, conforme mostrado na topologia.</p> <p>Finalmente, observe que os roteadores R1 e R3 contêm redes de VLSM e estão compartilhando espaço de endereço da rede classful principal 172.30.0.0/16. A seguir, observaremos o esquema de endereçamento de VLSM.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010102">
<content-media type="StaticGraphic" id="cm4902730884"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010102/cm4902730884.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010102/cm4902730884text.xml"/></content-media>
<content-text><p><b>VLSM</b></p> <p>Reveja o esquema de endereçamento de VLSM na figura. Como mostrado no gráfico da parte superior, R1 e R3 tiveram a rede 172.30.0.0/16 dividida em /24 sub-redes. Quatro destas /24 sub-redes são atribuídas: duas para R1 (172.30.1.0/24 e 172.30.2.0/24) e duas para R3 (172.30.100.0/24 e 172.30.110.0/24). </p> <p>No gráfico da parte inferior, nós subdividimos a rede 172.30.200.0/24 e a dividimos em sub-redes novamente, utilizando os primeiros quatro bits para sub-redes e os últimos quatro bits para hosts. O resultado é uma máscara 255.255.255.240 ou /28. A sub-rede 1 e a sub-rede 2 são atribuídas a R3. Isto significa que a sub-rede 172.30.200.0/24 já não pode ser utilizada apesar de as /28 sub-redes restantes poderem ser utilizadas.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010103">
<content-media type="InteractiveGraphicHotspots" id="cm2916585555"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010103/cm2916585555.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010103/cm2916585555text.xml"/></content-media>
<content-text><p><b>Endereços privados da RFC 1918</b></p> <p>Você já deve estar familiarizado com a RFC 1918 e o raciocínio relacionado ao endereçamento privado. Todos os exemplos no currículo utilizam endereços IP privados para o exemplo de endereçamento interior. </p> <p>Os endereços referentes à RFC 1918 são mostrados na tabela. Mas quando o tráfego IP é roteado através dos links de WAN por um ISP, ou quando usuários internos precisam acessar sites externos, um endereço IP público deve ser utilizado. </p> <p><b>Exemplos de endereços IP da Cisco</b></p> <p>Você pode ter notado que os links de WAN entre R1, R2 e R3 estão utilizando endereços IP públicos. Embora estes endereços IP não sejam endereços privados de acordo com a RFC 1918, a Cisco adquiriu alguns espaços de endereço público para serem utilizados como exemplos. </p> <p>Os endereços mostrados na figura são todos os endereços IP públicos válidos que podem ser roteados na Internet. A Cisco reservou estes endereços para propósitos educacionais. Portanto, este curso e futuros cursos utilizarão estes endereços quando houver uma necessidade de utilizar endereços públicos. </p> <p>Na figura, R1, R2 e R3 estão conectados utilizando o espaço de endereçamento público da Cisco de 209.165.200.224/27. Como os links de WAN precisam somente de dois endereços, a 209.165.200.224/27 é dividida em sub-rede com uma máscara de /30. Na topologia, a sub-rede 1 é atribuída ao link de WAN entre R1 e R2. A sub-rede 2 é atribuída ao link de WAN entre R2 e R3.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010104">
<content-media type="StaticGraphic" id="cm2411978428"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010100/tl0907010104/cm2411978428.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010100/tl0907010104/cm2411978428text.xml"/></content-media>
<content-text><p><b>Interfaces de loopback</b></p> <p>Note que R3 está utilizando interfaces de loopback (Lo0, Lo1 e Lo2). Uma interface de loopback é uma interface somente de software que é utilizada para emular uma interface física. Como outras interfaces, pode-se atribuir a ela um endereço IP. As interfaces de loopback também são utilizadas por outros protocolos de roteamento, tais como OSPF, para propósitos diferentes. Estes usos serão discutidos no Capítulo 11 OSPF. </p> <p>Em um ambiente de laboratório, as interfaces de loopback são úteis para criar redes adicionais sem ter que adicionar mais interfaces físicas no roteador. Uma interface de loopback pode sofrer ping e a sub-rede pode ser anunciada em atualizações de roteamento. Portanto, as interfaces de loopback são ideais para simular diversas redes conectadas ao mesmo roteador. Em nosso exemplo, o R3 não precisa de quatro interfaces de rede local para demonstrar várias sub-redes e VLSM. Em vez disso, nós utilizamos as interfaces de loopback.</p> <p>Links</p> <p>"Internet Assigned Numbers Authority (IANA),” <content-link target="http://www.iana.org/" type="external">http://www.iana.org/</content-link></p> <p>"Configurando Interfaces Lógicas," <content-link target="http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html" type="external">http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0907010200">
<title><content-text>Limitações da topologia de RIPv1</content-text></title>
<page type="OneColumn" id="tl0907010201">
<content-media type="StaticGraphic" id="cm9887372787"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010201/cm9887372787.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010200/tl0907010201/cm9887372787text.xml"/></content-media>
<content-text><p><b>Rotas estáticas e interfaces nulas</b></p> <p>Para configurar a rota de super-rede estática em R2, utiliza-se o seguinte comando:</p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 </b><b><span class="blue">Null0</span></b></p></span> <p>Lembre-se de que a sumarização de rota permite uma única entrada de rota de alto nível para representar muitas rotas de nível menor, reduzindo assim o tamanho das tabelas de roteamento. A rota estática em R2 utiliza uma máscara /16 para sumarizar todas as 256 redes entre 192.168.0.0/24 e 192.168.255.0/24. </p> <p>O espaço de endereço representado pela rota de sumarização estática 192.168.0.0/16 não existe verdadeiramente. Para simular esta rota estática, nós utilizamos uma <content-link target="cg7693750233" type="glossary">interface nula </content-link> (null interface) como a interface de saída. Você não precisa digitar nenhum comando para criar ou configurar a interface nula. Ela está sempre ativa, mas não encaminha ou recebe tráfego. O tráfego enviado à interface nula é descartado. Para nossos propósitos, a interface nula servirá como a interface de saída para nossa rota estática. Lembre-se do Capítulo 2, "Roteamento estático", que uma rota estática deve ter uma interface de saída ativa antes de ser instalada na tabela de roteamento. Utilizar a interface nula permitirá que R2 anuncie a rota estática através do RIP embora as redes que pertencem à rede sumarizadas 192.168.0.0/16 não existam de fato.</p> <p><b>Redistribuição de rota</b></p> <p>O segundo comando que precisa ser digitado é o comando <span class="cmd"><b>redistribute static</b></span>:</p> <span class="cmd"><p>R2(config-router)#<b><span class="blue">redistribute static</span></b></p></span> <p>A redistribuição envolve levar as rotas de uma origem de roteamento para outra. Em nossa topologia de exemplo, desejamos que o processo RIP em R2 redistribua nossa rota estática (192.168.0.0/16) importando a rota para RIP e a enviando, então, para R1 e R3, utilizando o processo RIP. Nós veremos se isto realmente está acontecendo e, se não, por quê.</p> <p><b>Links</b></p> <p>"Configurando Interfaces Lógicas," <content-link target="http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html" type="external">http://www.cisco.com/en/US/docs/ios/12_2/interface/configuration/guide/icflogin.html</content-link></p></content-text>
</page>
<page type="OneColumn" id="tl0907010202">
<content-media type="InteractiveGraphicHotspots" id="cm2600402693"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010202/cm2600402693.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010200/tl0907010202/cm2600402693text.xml"/></content-media>
<content-text><p><b>Verificando e testando a conectividade</b></p> <p>Para testar se a topologia possui conectividade completa ou não, nós verificamos primeiro se ambos os links seriais em R2 estão ativos utilizando <span class="cmd"><b>show ip interface brief</b></span>, conforme mostrado na figura para Links de R2. Se um link estiver inativo, o campo de Status ou o campo de Protocolo (ou ambos os campos) exibirão <b>down</b> (inativo) na saída do comando. Se um link estiver ativo, ambos os campos exibirão <b>up</b> (ativo), conforme mostrado aqui. R2 possui conectividade direta com R1 e R3 através dos links seriais. </p> <p>Mas R2 pode executar ping nas redes locais em R1 e R3? Há algum problema de conectividade com um protocolo de roteamento classful e com as sub-redes descontíguas de 172.30.0.0? Testemos as comunicações entre os roteadores que utilizam <span class="cmd"><b>ping</b></span>.</p> <p><b>Clique em Pings de R2 na figura.</b></p> <p>Esta saída mostra R2 tentando executar ping na interface de 172.30.1.1 em R1 e na interface de 172.30.100.1 em R3. Sempre que R2 executar ping em qualquer sub-rede de 172.30.0.0 em R1 ou R3, somente por volta de 50% das mensagens de ICMP serão bem-sucedidas.</p> <p><b>Clique em Pings de R1 na figura.</b></p> <p>Esta saída do comando mostra que R1 pode executar ping em 10.1.0.1, mas é malsucedido ao tentar executar ping na interface de 172.30.100.1 em R3. </p> <p><b>Clique em Pings de R3 na figura.</b></p> <p>Esta saída do comando mostra que R3 pode executar ping em 10.1.0.1, mas é malsucedido ao tentar executar ping na interface de 172.30.1.1 em R1. </p> <p>Como você pode ver, há um problema óbvio ao tentar comunicar-se com as sub-redes descontíguas de 172.30.0.0. Nas seções seguintes nós examinaremos as tabelas de roteamento e atualizações de roteamento para investigar mais a fundo este problema e tentar resolvê-lo.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010203">
<content-media type="ActivityPKT" id="cm4452329343"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010200/tl0907010203/cm4452329343/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907010000/tl0907010200/tl0907010203/cm4452329343/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para praticar suas habilidades de configuração de roteador, inclusive configurações de RIPv1.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907010300">
<title><content-text>RIPv1: Redes descontíguas</content-text></title>
<page type="OneColumn" id="tl0907010301">
<content-media type="StaticGraphic" id="cm5550705729"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010301/cm5550705729.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010301/cm5550705729text.xml"/></content-media>
<content-text><p>Você já sabe que o RIPv1 é um protocolo de roteamento classful. Como você pode ver no formato de mensagem de RIPv1, ela não inclui as máscaras de sub-rede em suas atualizações de roteamento. Portanto, RIPv1 não pode suportar redes descontíguas, VLSM ou super-redes de Roteamento entre Domínios com Endereços Classless (CIDR, Classless Inter-Domain Routing). No entanto, pode haver espaço para expandir o formato de mensagem de RIPv1 para incluir a máscara de sub-rede de forma que nós possamos ter realmente uma configuração de rede descontígua? Como você alteraria o formato desta mensagem na figura para incluir a máscara de sub-rede?</p></content-text>
</page>
<page type="OneColumn" id="tl0907010302">
<content-media type="StaticGraphic" id="cm1973029446"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010302/cm1973029446.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010302/cm1973029446text.xml"/></content-media>
<content-text><p>Como a máscara de sub-rede não está incluída na atualização, RIPv1 e outros protocolos de roteamento classful devem sumarizar as redes a limites de rede principal. Como você pode ver na figura, RIPv1 em ambos os roteadores R1 e R3 irá sumarizar suas sub-redes de 172.30.0.0 para o endereço de rede classful principal de 172.30.0.0 ao enviar atualizações de roteamento para R2. Da perspectiva de R2, ambas as atualizações possuem um custo igual de 1 salto para alcançar a rede 172.30.0.0/16. Como você verá, R2 instala ambos os caminhos na tabela de roteamento. </p></content-text>
</page>
<page type="OneColumn" id="tl0907010303">
<content-media type="InteractiveGraphicHotspots" id="cm6667716874"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010300/tl0907010303/cm6667716874.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010300/tl0907010303/cm6667716874text.xml"/></content-media>
<content-text><p><b>Examinando as tabelas de roteamento</b></p> <p>Como você viu, R2 obtém resultados inconsistentes ao tentar executar ping em um endereço em uma das sub-redes de 172.30.0.0. </p> <p><b>Clique em Rotas de R2 na figura.</b></p> <p>Note que R2 possui duas rotas  para a rede 172.30.0.0/16 com custos iguais. Isto porque R1 e R3 estão enviando para R2 uma atualização de RIPv1 para a rede classful 172.30.0.0/16 com uma métrica de 1 salto. Como R1 e R3 sumarizaram automaticamente as sub-redes individuais, a tabela de roteamento de R2 contém somente o endereço classful principal de 172.30.0.0/16. </p> <p>Nós podemos examinar o conteúdo das atualizações de roteamento conforme as atualizações são enviadas e recebidas com o comando <span class="cmd"><b>debug ip rip</b></span>.</p> <p><b>Clique em Depur. de R2 1 na figura. </b></p> <p>A saída  deste comando mostra que R2 está recebendo duas rotas de custos iguais de 172.30.0.0 com uma métrica de 1 salto. R2 está recebendo uma rota na Serial 0/0/0 de R1 e a outra rota na Serial 0/0/1 de R3. Observe que a máscara de sub-rede não está incluída junto ao endereço de rede na atualização.</p> <p>E quanto a R1 e R3? Eles estão recebendo cada umas das sub-redes de 172.30.0.0? </p> <p><b>Clique em Rotas de R1 na figura.</b></p> <p>Aqui nós vemos que R1 possui suas próprias rotas para 172.30.0.0: 172.30.2.0/24 e 172.30.1.0/24. Mas R1 não envia para R2 essas sub-redes. R3 possui uma tabela de roteamento semelhante. R1 e R3 são roteadores de borda e estão enviando somente a rede 172.30.0.0 sumarizada para R2 em suas atualizações de roteamento de RIPv1. Como resultado, R2 sabe somente sobre a rede classful 172.30.0.0/16 e não tem ciência de nenhuma sub-rede de 172.30.0.0. </p> <p><b>Clique em Depur. de R2 2 na figura.</b></p> <p>Observe que, na saída do comando <span class="cmd"><b>debug ip rip</b></span> para R2, não está incluída a rede 172.30.0.0 em suas atualizações para R1 ou R3. Por que não? Porque a regra de split horizon é aplicada. R2 obteve informações sobre 172.30.0.0/16 em ambas as interfaces Serial 0/0/0 e Serial 0/0/1. Como R2 obteve informações sobre 172.30.0.0 nestas interfaces, ele não inclui aquela rede nas atualizações que envia para estas mesmas interfaces.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907010400">
<title><content-text>RIPv1: Sem suporte de VLSM</content-text></title>
<page type="OneColumn" id="tl0907010401">
<content-media type="StaticGraphic" id="cm5639082266"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010400/tl0907010401/cm5639082266.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010400/tl0907010401/cm5639082266text.xml"/></content-media>
<content-text><p>Como RIPv1 não envia a máscara de sub-rede nas atualizações de roteamento, ele não pode suportar VLSM. O roteador R3 é configurado com sub-redes VLSM, das quais todas são membros da rede de classe B 172.30.0.0/16:</p> <ul><li> 172.30.100.0/<b>24 </b>(FastEthernet 0/0)</li> <li> 172.30.110.0/<b>24 </b>(Loopback 0)</li> <li> 172.30.200.16/<b>28 </b>(Loopback 1)</li> <li> 172.30.200.32/<b>28 </b>(Loopback 2)</li></ul> <p>Como vimos nas atualizações de 172.30.0.0/16 para R2 por R1 e R3, o RIPv1 sumariza as sub-redes ao limite de classful ou utiliza a máscara de sub-rede da interface de saída para determinar para quais sub-redes deve anunciar. </p> <p><b>Clique na Topologia na figura.</b></p> <p>Para demonstrar como o RIPv1 utiliza a máscara de sub-rede da interface de saída, R4 é adicionado à topologia conectada a R3 através da interface FastEthernet0/0 na rede 172.30.100.0/24. </p> <p>Clique em <b>Saída do comando do roteador</b> na figura.</p> <p>Observe o <span class="cmd"><b>debug ip rip</b></span> na figura. Observe que a única sub-rede de 172.30.0.0 que é enviada ao roteador R4 é 172.30.110.0. Você verá também que R3 está enviando a rede classful principal 172.30.0.0 inteira para a Serial 0/0/1.</p> <p>Por que RIPv1 em R3 não está incluindo as outras sub-redes, 172.30.200.16/28 e 172.30.200.32/28, nas atualizações para R4? Essas sub-redes não possuem a mesma máscara de sub-rede que a FastEthernet 0/0. Esse é o motivo pelo qual todas as sub-redes devem utilizar a mesma máscara de sub-rede quando um protocolo de roteamento classful é implementado na rede.</p> <p><b>Uma explicação mais detalhada</b></p> <p>R3 precisa determinar quais sub-redes de 172.30.0.0 devem ser incluídas nas atualizações partindo de sua interface FastEthernet 0/0 com o endereço IP 172.30.100.1/24. Ele somente incluíra essas rotas de 172.30.0.0 em sua tabela de roteamento com a mesma máscara da interface de saída. Considerando que a interface é 172.30.100.1 com uma máscara /24, ele incluirá somente as sub-redes 172.30.0.0 com uma máscara /24. A única que atende esta condição é 172.30.110.0.</p> <p>As outras sub-redes de 172.30.0.0, 172.30.200.16/28 e 172.30.200.32/28 não são incluídas porque as máscaras /28 não correspondem à máscara /24 da interface de saída. O roteador destino, R4, pode aplicar somente sua própria máscara de interface /24 aos anúncios de rota de RIPv1 com sub-redes 172.30.0.0. R4 aplicaria a máscara errada /24 a estas sub-redes com máscaras /28.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907010500">
<title><content-text>RIPv1: Sem suporte de CIDR</content-text></title>
<page type="OneColumn" id="tl0907010501">
<content-media type="InteractiveGraphicHotspots" id="cm1137743180"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010500/tl0907010501/cm1137743180.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907010000/tl0907010500/tl0907010501/cm1137743180text.xml"/></content-media>
<content-text><p><b>A rota estática de 192.168.0.0/16</b></p> <p>Até o momento, grande parte destas informações devem ser familiares a você pelo Capítulo 5, "RIPv1." Porém, há um problema que nós ainda não abordamos. </p> <p><b>Clique em Roteamento de R2 na figura.</b></p> <p>Nós configuramos uma rota estática para a rede 192.168.0.0/16 em R2 e instruímos RIP a incluir aquela rota em suas atualizações utilizando o comando <span class="cmd"><b>redistribute static</b></span>, como mostrado na figura. Esta rota estática é uma sumarização das sub-redes de 192.168.0.0/24 entre 192.168.0.0/24 e 192.168.255.0/24. </p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 Null0</b></p></span> <p><b>Clique em Rotas de R2 na figura.</b></p> <p>Nós podemos ver que a rota estática está incluída na tabela de roteamento de R2. </p> <p><b>Clique em Rotas de R1 na figura.</b></p> <p>Observando a tabela de roteamento para R1, notamos que R1 não está recebendo esta rota de 192.168.0.0/16 em suas atualizações RIP de R2, embora pudéssemos esperar que o fizesse.</p> <p><b>Clique em Depuração de R2 na figura.</b></p> <p>Utilizando <span class="cmd"><b>debug ip rip</b></span> em R2, observamos que RIPv1 não inclui a rota 192.168.0.0/16 em suas atualizações de RIP para R1 ou R3. Você pode imaginar por que esta rota não é incluída? Observe a rota 192.168.0.0/16. Qual é a classe da rota? Classe A, B ou C? Qual é a máscara utilizada na rota estática? Ela corresponde à classe? A máscara na rota estática é menor do que a máscara classful?</p> <p>Nós configuramos a rota estática 192.168.0.0 com uma máscara /16. Ela tem menos bits do que a máscara classful de classe C /24. Como a máscara não corresponde à classe ou a uma sub-rede da classe, RIPv1 não incluirá esta rota em suas atualizações para outros roteadores.</p> <p>RIPv1 e outros protocolos de roteamento classful não podem suportar rotas de CIDR que são rotas sumarizadas com uma máscara de sub-rede menor do que a máscara classful da rota. RIPv1 ignora estas super-redes na tabela de roteamento e não as inclui nas atualizações para outros roteadores. Isto acontece porque o roteador destino só pode aplicar a maior máscara classful para a atualização e não a máscara /16 mais curta.</p> <p><b>Nota:</b> Se a rota estática de 192.168.0.0 fosse configurada com uma máscara /24 ou maior, esta rota seria incluída nas atualizações RIP. Os roteadores destino aplicariam a máscara classful /24 para esta atualização.</p></content-text>
</page>
<page type="OneColumn" id="tl0907010502">
<content-media type="ActivityPKT" id="cm6564056915"><title><content-text></content-text></title><media ref="tl0907000000/tl0907010000/tl0907010500/tl0907010502/cm6564056915/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907010000/tl0907010500/tl0907010502/cm6564056915/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer no modo de Simulação para verificar se as atualizações não são enviadas através dos limites de rede classful com RIPv1. No modo Tempo real, verifique a não convergência com <span class="cmd"><b>show ip route</b></span>, <span class="cmd"><b>ping</b></span> e <span class="cmd"><b>debug ip rip</b></span>.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907020000">
<title><content-text>Configurando o RIPv2</content-text></title>
<topic type="" id="tl0907020100">
<title><content-text>Habilitando e verificando o RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020101">
<content-media type="StaticGraphic" id="cm9926725123"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020100/tl0907020101/cm9926725123.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020100/tl0907020101/cm9926725123text.xml"/></content-media>
<content-text><p><b>Comparando os formatos de mensagem de RIPv1 e RIPv2</b></p> <p>O RIPv2 está definido na RFC 1723. Como a versão 1, o RIPv2 é encapsulado em um segmento de UDP utilizando a porta 520 e pode carregar até 25 rotas. Embora o RIPv2 possua o mesmo formato de mensagem básico que o RIPv1, são adicionadas duas extensões significativas. </p> <p>A primeira extensão no formato de mensagem de RIPv2 é o campo de máscara de sub-rede, que permite incluir uma máscara de 32 bits na entrada de rota RIP. Como resultado, o roteador destino já não depende da máscara de sub-rede da interface de entrada ou da máscara classful ao determinar a máscara de sub-rede para uma rota.</p> <p>A segunda extensão significativa para o formato de mensagem de RIPv2 é a adição do endereço do próximo salto. O endereço do próximo salto é utilizado para identificar um endereço do próximo salto melhor – caso exista – do que o endereço do roteador de origem. Se o campo for definido como todos os zeros (0.0.0.0), o endereço do roteador origem será o melhor endereço do próximo salto. Informações detalhadas sobre como o endereço do próximo salto é utilizado estão além do escopo deste curso. Entretanto, um exemplo pode ser encontrado na RFC 1722 ou em <i>TCP/IP de Roteamento Volume 1</i> de Jeff Doyle.</p> <p><b>Links</b></p> <p>"RFC 1723: RIP Versão 2," <content-link target="http://www.ietf.org/rfc/rfc1723.txt" type="external">http://www.ietf.org/rfc/rfc1723.txt</content-link></p></content-text>
</page>
<page type="OneColumn" id="tl0907020102">
<content-media type="InteractiveGraphicHotspots" id="cm9098894796"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020100/tl0907020102/cm9098894796.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020100/tl0907020102/cm9098894796text.xml"/></content-media>
<content-text><p><b>Versão 2</b></p> <p>Por padrão, quando um processo de RIP é configurado em um roteador Cisco, isso significa que ele está executando o RIPv1. Entretanto, embora o roteador somente envie mensagens de RIPv1, ele pode interpretar mensagens de RIPv1 e de RIPv2. Um roteador com RIPv1 irá somente ignorar os campos de RIPv2 na entrada de rota.</p> <p><b>Clique em RIPv1 de R2 na figura.</b></p> <p>O comando <span class="cmd"><b>show ip protocols</b></span> verifica se R2 está configurado para RIPv1, mas recebe mensagens de RIP para ambas as versões. </p> <p><b>Clique em Configs de RIPv2 na figura.</b></p> <p>Observe que o comando <span class="cmd"><b>version 2</b></span> é utilizado para modificar o RIP para utilizar a versão 2. Este comando deve ser configurado em todos os roteadores no domínio de roteamento. O processo de RIP incluirá agora a máscara de sub-rede em todas as atualizações, fazendo de RIPv2 um protocolo de roteamento classless. </p> <p><b>Clique em RIPv2 de R2 na figura.</b></p> <p>Como você pode ver na saída do comando, quando um roteador é configurado para a versão 2, somente as mensagens de RIPv2 são enviadas e recebidas.</p> <p><b>Clique em Reverter para RIPv1 na figura.</b></p> <p>O comportamento padrão de RIPv1 pode ser restaurado utilizando o comando <span class="cmd"><b>no version</b></span> no modo de configuração do roteador. Porém, o comando <span class="cmd"><b>version 1</b></span> também pode ser utilizado de forma que somente as mensagens de RIPv1 sejam enviadas e recebidas.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020200">
<title><content-text>Sumarização automática e RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020201">
<content-media type="InteractiveGraphicHotspots" id="cm9908866463"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020200/tl0907020201/cm9908866463.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020200/tl0907020201/cm9908866463text.xml"/></content-media>
<content-text><p><b>Examinando as tabelas de roteamento</b></p> <p>Como RIPv2 é um protocolo de roteamento classless, espera-se que você veja as sub-redes individuais de 172.30.0.0 nas tabelas de roteamento. Porém, quando examinarmos a tabela de roteamento para R2 na figura, ainda veremos a rota de 172.30.0.0/16 sumarizada com os mesmos dois caminhos de custos iguais. Os roteadores R1 e R3 ainda não incluem as sub-redes de 172.30.0.0 do outro roteador. </p> <p><b>Clique em Rotas de R1 na figura.</b></p> <p>A única diferença até o momento entre RIPv1 e RIPV2 é que R1 e R3 possuem, cada um, uma rota para a super-rede 192.168.0.0/16. Esta era a rota estática configurada em R2 e redistribuída por RIP. </p> <p><b>Clique em Depuração de R1 1 na figura.</b></p> <p>Então, o que está acontecendo? Para examinar quais rotas de RIPv2 estão sendo enviadas e recebidas, nós utilizaremos o comando <span class="cmd"><b>debug ip rip</b></span>. A figura mostra a saída do comando <span class="cmd"><b>debug ip rip</b></span> para R1. Note que RIPv2 está enviando o endereço de rede e a máscara de sub-rede:</p> <span class="cmd"><p>RIP: sending v2 update to 224.0.0.9 via Serial0/0 (209.165.200.230)</p></span> <span class="cmd"><p> 172.30.0.0/16 via 0.0.0.0, metric 1, tag 0</p></span> <p>Observe, entretanto, que a rota enviada é o endereço sumarizado de rede classful, 172.30.0.0/16, e não as sub-redes 172.30.1.0/24 e 172.30.2.0/24 individuais. </p> <p><b>Clique em Sumarização automática na figura.</b></p> <p><b>Por padrão, RIPv2 sumariza automaticamente as redes a limites de rede principal, assim como o RIPv1. </b>Ambos os roteadores R1 e R3 ainda estão sumarizando suas sub-redes de 172.30.0.0 ao endereço classe B 172.30.0.0 ao enviar atualizações para fora de suas interfaces nas redes 209.165.200.228 e 209.165.200.232, respectivamente. O comando <span class="cmd"><b>show ip protocols</b></span> mostra que "automatic summarization is in effect." (“sumarização automática está em funcionamento”).</p> <p><b>Clique em Depuração de R1 2 na figura.</b></p> <p>A única alteração resultante do comando <span class="cmd"><b>version 2</b></span> é que R2 está incluindo agora a rede 192.168.0.0/16 em suas atualizações. Isto porque o RIPv2 inclui a máscara 255.255.0.0 com o endereço de rede 192.168.0.0 na atualização. R1 e R3 receberão agora esta rota estática redistribuída por RIPv2 e as inserirão em suas tabelas de roteamento.</p> <p><b>Nota:</b> Lembre-se: a rota 192.168.0.0/16 não pôde ser distribuída com RIPv1 porque a máscara de sub-rede era menor que a máscara classful. Como a máscara não é incluída nas atualizações de RIPv1, não havia nenhum modo do roteador utilizando RIPv1 determinar qual máscara deveria ser. Portanto, a atualização nunca foi enviada.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020300">
<title><content-text>Desabilitando a sumarização automática em RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020301">
<content-media type="StaticGraphic" id="cm6363831877"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020300/tl0907020301/cm6363831877.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020300/tl0907020301/cm6363831877text.xml"/></content-media>
<content-text><p>Como você pode ver na figura, para modificar o comportamento de RIPv2 padrão de sumarização automática, utilize o comando <span class="cmd"><b>no auto-summary</b></span> no modo de configuração do roteador. Este comando não é válido com RIPv1. Embora o IOS Cisco permita que você configure o <span class="cmd"><b>no auto-summary</b></span> para RIPv1, o comando não tem efeito algum. Você também deve configurar a versão 2 antes de o IOS Cisco alterar o modo de envio das atualizações de RIP.</p> <p>Quando a sumarização automática foi desabilitada, o RIPv2 já não sumariza redes para o seu endereço classful em roteadores de borda. O RIPv2 incluirá agora todas as sub-redes e suas máscaras apropriadas em suas atualizações de roteamento. O comando <span class="cmd"><b>show ip protocols</b></span> pode ser utilizado para verificar se "automatic network summarization is not in effect." (“sumarização automática de rede não está em funcionamento”).</p></content-text>
</page>
</topic>
<topic type="" id="tl0907020400">
<title><content-text>Verificando as atualizações de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907020401">
<content-media type="InteractiveGraphicHotspots" id="cm6966142067"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020400/tl0907020401/cm6966142067.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907020000/tl0907020400/tl0907020401/cm6966142067text.xml"/></content-media>
<content-text><p>Agora que nós estamos utilizando o protocolo de roteamento classless RIPv2 e que também desabilitamos a sumarização automática, o que deveremos ver nas tabelas de roteamento? </p> <p>Na figura, a tabela de roteamento para R2 agora contém as sub-redes individuais para 172.30.0.0/16. Observe que não há mais uma rota de sumarização única com dois caminhos de custos iguais. Cada sub-rede e máscara tem sua própria entrada específica, juntamente com a interface de saída e endereço do próximo salto para alcançar aquela sub-rede.</p> <p><b>Clique em Rotas de R1 na figura.</b></p> <p>A tabela de roteamento para R1 contém todas as sub-redes para 172.30.0.0/16, inclusive as sub-redes de R3.</p> <p><b>Clique em Rotas de R3 na figura.</b></p> <p>A tabela de roteamento para R3 contém todas as sub-redes para 172.30.0.0/16, incluindo as sub-redes de R1. Esta rede convergiu.</p> <p><b>Clique em Depuração de R2 na figura.</b></p> <p>Nós podemos verificar se o protocolo de roteamento classless RIPv2 está de fato enviando e recebendo as informações de máscara de sub-rede nas atualizações de roteamento utilizando o comando <span class="cmd"><b>debug ip rip</b></span>. Note que cada entrada de rota inclui agora a notação de corte para a máscara de sub-rede.</p> <p>Nós também podemos ver se uma atualização em uma interface tem sua métrica aumentada antes de ela ser enviada para outra interface. Por exemplo, a atualização que foi recebida na Serial 0/0/1 para a rede 172.30.100.0/24 com 1 salto é enviada para outras interfaces, tais como a Serial 0/0/0, com uma métrica de 2, ou 2 saltos.</p> <span class="cmd"><p>RIP: received v2 update from 209.165.200.234 on Serial0/0/1</p></span> <span class="cmd"><p> 172.30.100.0/24 via 0.0.0.0 in <span class="blue">1 hops</span></p></span> <span class="cmd"><p>RIP: sending v2 update to 224.0.0.9 via Serial0/0/0 (209.165.200.229)</p></span> <span class="cmd"><p> 172.30.100.0/24 via 0.0.0.0, <span class="blue">metric 2</span>, tag 0</p></span> <p>Observe também que as atualizações são enviadas com o uso do endereço de multicast 224.0.0.9. O RIPv1 envia atualizações como um broadcast 255.255.255.255. Existem diversas vantagens de utilizar um endereço de multicast. Detalhes sobre endereçamento multicast estão além do escopo deste curso; porém, em geral multicasts podem consumir menos largura de banda na rede. Além disso, atualizações de multicast exigem menos processamento por dispositivos que não são habilitados para RIP. Sob RIPv2, qualquer dispositivo que não estiver configurado para RIP descartará o quadro na camada de enlace de dados. Com atualizações de broadcast sob configurações de RIPv1, todos os dispositivos em uma rede de broadcast como a Ethernet devem processar uma atualização RIP por todo o caminho até a camada de transporte, onde o dispositivo detecta finalmente que o pacote é destinado para um processo que não existe.</p></content-text>
</page>
<page type="OneColumn" id="tl0907020402">
<content-media type="ActivityPKT" id="cm4407617918"><title><content-text></content-text></title><media ref="tl0907000000/tl0907020000/tl0907020400/tl0907020402/cm4407617918/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907020000/tl0907020400/tl0907020402/cm4407617918/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para configurar RIPv2, desabilitar a sumarização automática e verificar suas configurações.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907030000">
<title><content-text>VLSM e CIDR</content-text></title>
<topic type="" id="tl0907030100">
<title><content-text>RIPv2 e VLSM</content-text></title>
<page type="OneColumn" id="tl0907030101">
<content-media type="StaticGraphic" id="cm4246680612"><title><content-text></content-text></title><media ref="tl0907000000/tl0907030000/tl0907030100/tl0907030101/cm4246680612.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907030000/tl0907030100/tl0907030101/cm4246680612text.xml"/></content-media>
<content-text><p>Como os protocolos de roteamento classless como o RIPv2 podem considerar tanto o endereço de rede quanto a máscara de sub-rede, eles não precisam sumarizar estas redes aos seus endereços classful a limites de rede principal. Portanto, os protocolos de roteamento classless suportam VLSM. Os roteadores que utilizam o RIPv2 já não precisam utilizar a máscara da interface de entrada para determinar a máscara de sub-rede no anúncio da rota. A rede e a máscara são explicitamente incluídas em todas as atualizações de roteamento.</p> <p>Em redes que utilizam um esquema de endereçamento de VLSM, um protocolo de roteamento classless é essencial para propagar todas as redes junto com suas máscaras de sub-rede corretas. Observando a saída do comando <span class="cmd"><b>debug ip rip</b></span> para R3 na figura, nós podemos ver que RIPv2 inclui as redes e suas máscaras de sub-rede em suas atualizações de roteamento. </p> <p>Observe também na figura que nós adicionamos mais uma vez o roteador R4 na topologia. Lembre-se: com RIPv1, R3 enviaria somente para R4 as rotas 172.30.0.0 que tiveram a mesma máscara que a interface de saída FastEthernet 0/0. Como a interface é 172.30.100.1 com uma máscara /24, RIPv1 somente incluiu as sub-redes 172.30.0.0 com uma máscara /24. A única rota que atendeu esta condição foi 172.30.110.0.</p> <p>Porém, com RIPv2, R3 pode incluir agora todas as sub-redes de 172.30.0.0 em suas atualizações do roteamento para R4, como mostrado na saída do comando de depuração na figura. Isto porque o RIPv2 pode incluir a máscara de sub-rede adequada com o endereço de rede na atualização.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907030200">
<title><content-text>RIPv2 e CIDR</content-text></title>
<page type="OneColumn" id="tl0907030201">
<content-media type="InteractiveGraphicHotspots" id="cm7188828208"><title><content-text></content-text></title><media ref="tl0907000000/tl0907030000/tl0907030200/tl0907030201/cm7188828208.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907030000/tl0907030200/tl0907030201/cm7188828208text.xml"/></content-media>
<content-text><p>Uma das metas do Roteamento Entre Domínios com Endereços Classless (CIDR, Classless Inter-Domain Routing), conforme estabelecido pela RFC 1519, é "fornecer um mecanismo para a agregação de informações de roteamento". Esta meta inclui o conceito de criar super-redes. Uma super-rede é um bloco de redes classful contíguas que é tratado como uma única rede. No roteador R2, nós configuramos uma super-rede - uma rota estática para uma única rede que é utilizada para representar diversas redes ou sub-redes. </p> <p>Super-redes possuem máscaras que são menores do que a máscara classful (neste caso /16, em vez da classful /24). Para a super-rede ser incluída em uma atualização de roteamento, o protocolo de roteamento deve ter a capacidade de considerar aquela máscara. Em outras palavras, ela deve ser um protocolo de roteamento classless, como RIPv2.</p> <p>A rota estática em R2 inclui uma máscara que é menor que a máscara classful:</p> <span class="cmd"><p>R2(config)#<b>ip route 192.168.0.0 255.255.0.0 Null0</b></p></span> <p>Em um ambiente classful, o endereço de rede 192.168.0.0 seria associado à máscara de classe C /24 ou 255.255.255.0. Nas redes de hoje, nós não associamos mais os endereços de rede a máscaras classful . Neste exemplo, a rede 192.168.0.0 possui uma máscara /16 ou 255.255.0.0. Esta rota pode representar uma série de redes 192.168.0.0/24 ou qualquer número de intervalos de endereços diferentes. O único modo de esta rota ser incluída em uma atualização de roteamento dinâmico é utilizando um protocolo de roteamento classless que inclua a máscara /16.</p> <p><b>Clique em Depuração de R2 na figura.</b></p> <p>Utilizando o comando <span class="cmd"><b>debug ip rip</b></span>, podemos ver que esta super-rede de CIDR é incluída na atualização de roteamento enviada por R2. A sumarização automática não precisa ser desabilitada em RIPv2 ou em qualquer protocolo de roteamento classless para que as super-redes sejam incluídas nas atualizações.</p> <p><b>Clique em Rotas de R1 na figura.</b></p> <p>A tabela de roteamento para R1 mostra que ele recebeu a rota de super-rede de R2.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907040000">
<title><content-text>Verificação, identificação e solução de problemas de RIPv2</content-text></title>
<topic type="" id="tl0907040100">
<title><content-text>Comandos de verificação, identificação e solução de problemas</content-text></title>
<page type="OneColumn" id="tl0907040101">
<content-media type="InteractiveGraphicHotspots" id="cm7324178988"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040100/tl0907040101/cm7324178988.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040100/tl0907040101/cm7324178988text.xml"/></content-media>
<content-text><p>Existem diversas maneiras para verificar, identificar e solucionar problemas de RIPv2. Muitos dos mesmos comandos utilizados para RIPv2 podem ser utilizados para verificar, identificar e solucionar problemas de outros protocolos de roteamento. </p> <p>É melhor sempre começar com o básico:</p> <p>1. Certifique-se de que todos os links (interfaces) estejam ativos e em funcionamento.</p> <p>2. Verifique o cabeamento. </p> <p>3. Certifique-se de que você tem o endereço IP e máscara de sub-rede corretos em cada interface.</p> <p>4. Remova os comandos de configuração que não sejam mais necessários ou que tenham sido substituídos por outros comandos.</p> <p><b>Clique em </b><span class="cmd"><b>show ip route</b></span><b> na figura. </b></p> <p>Este é o primeiro comando a ser utilizado para verificar a convergência de rede. Conforme você examina a tabela de roteamento, é importante procurar as rotas que você espera que estejam nela e também as que não deveriam estar. </p> <p><b>Clique em </b><span class="cmd"><b>show ip interface brief</b></span><b> na figura. </b></p> <p>Se estiver faltando uma rede na tabela de roteamento, geralmente é porque uma interface está inativa ou configurada incorretamente. Os comando <span class="cmd"><b>show ip interface brief</b></span> verifica rapidamente o status de todas as interfaces.</p> <p><b>Clique em </b><span class="cmd"><b>show ip protocols</b></span><b> na figura.</b></p> <p>O comando <span class="cmd"><b>show ip protocols</b></span> verifica diversos itens críticos, inclusive se o RIP está habilitado, a versão do RIP, o status da sumarização automática e as redes que foram incluídas nos comandos network. As Fontes de Informações de Roteamento listadas na parte inferior da saída do comando são os vizinhos de RIP dos quais este roteador está atualmente recebendo atualizações.</p> <p><b>Clique em </b><span class="cmd"><b>debug ip rip</b></span><b> na figura.</b></p> <p>Conforme demonstrado ao longo do capítulo, o comando <span class="cmd"><b>debug ip rip</b></span> é um excelente comando para examinar o conteúdo das atualizações de roteamento que são enviadas e recebidas por um roteador. Muitas vezes, uma rota pode ser recebida por um roteador mas não ser adicionada à tabela de roteamento. Uma razão para isto pode ser que uma rota estática também está configurada para a mesma rede que está sendo anunciada. Por padrão, uma rota estática possui uma distância administrativa inferior do que qualquer protocolo de roteamento dinâmico e levará vantagem para ser acrescentada na tabela de roteamento.</p> <p><b>Clique em </b><span class="cmd"><b>ping</b></span><b> na figura.</b></p> <p>Um modo fácil de verificar a conectividade de ida-e-volta é com o comando <span class="cmd"><b>ping</b></span>. Se conectividade fim-a-fim não for bem-sucedida, comece executando ping nas interfaces locais. Caso obtenha sucesso, execute ping nas interfaces de roteador nas redes diretamente conectadas. Se isso também obtiver sucesso, continue executando ping nas interfaces em cada roteador sucessivo. Quando o comando ping for malsucedido, examine ambos os roteadores e todos os roteadores intermediários para determinar onde e por que o ping está falhando.</p> <p><b>Clique em </b><span class="cmd"><b>show running-config</b></span><b> na figura.</b></p> <p>O comando <span class="cmd"><b>show running-config</b></span> pode ser utilizado para verificar todos os comandos configurados atualmente. Normalmente, outros comandos são mais eficientes e fornecem mais informações do que uma simples listagem de configurações atuais. Porém, o comando <span class="cmd"><b>show running-config</b></span> é útil para determinar se algo óbvio foi esquecido ou mal configurado.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907040200">
<title><content-text>Problemas comuns do RIPv2</content-text></title>
<page type="OneColumn" id="tl0907040201">
<content-media type="StaticGraphic" id="cm1130444790"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040200/tl0907040201/cm1130444790.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040200/tl0907040201/cm1130444790text.xml"/></content-media>
<content-text><p>Ao identificar e solucionar problemas específicos para RIPv2, existem várias áreas a serem examinadas. </p> <p><b>Versão </b></p> <p>Um bom ponto de partida para começar a identificar e solucionar problemas na rede que está executando o RIP é verificar se a versão 2 está configurada em todos os roteadores. Embora o RIPv1 e o RIPv2 sejam compatíveis, o RIPv1 não suporta sub-redes descontíguas, VLSM ou rotas de super-rede CIDR. É melhor sempre utilizar o mesmo protocolo de roteamento em todos os roteadores a menos que haja uma razão específica para não fazê-lo. </p> <p><b>Comandos network</b></p> <p>Outra fonte de problemas pode ser comandos network rede incorretos ou perdidos. Lembre-se de que um comando network faz duas coisas:</p> <ul><li> Permite que o protocolo de roteamento envie e receba atualizações nas interfaces locais que pertençam àquela rede.</li> <li> Inclui aquela rede em suas atualizações de roteamento para seus roteadores vizinhos.</li></ul> <p>Um comando network incorreto ou que estiver faltando resultará na perda ou não envio de atualizações de roteamento em uma interface. </p> <p><b>Sumarização automática</b></p> <p>Se houver necessidade ou expectativa para enviar sub-redes específicas e não apenas rotas sumarizadas, verifique se a sumarização automática foi desabilitada.</p></content-text>
</page>
</topic>
<topic type="" id="tl0907040300">
<title><content-text>Autenticação</content-text></title>
<page type="OneColumn" id="tl0907040301">
<content-media type="StaticGraphic" id="cm5805533153"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040300/tl0907040301/cm5805533153.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907040000/tl0907040300/tl0907040301/cm5805533153text.xml"/></content-media>
<content-text><p>A maioria dos protocolos de roteamento envia suas atualizações de roteamento e outras informações de roteamento utilizando o IP (em pacotes IP). IS-IS é a exceção notável e é discutido em cursos CCNP. Uma preocupação de segurança de qualquer protocolo de roteamento é a possibilidade de aceitar atualizações de roteamento inválidas. A origem destas atualizações de roteamento inválidas pode ser um invasor tentando atrapalhar o funcionamento da rede ou tentando capturar pacotes enganando o roteador enviando suas atualizações ao destino errado. Outra fonte de atualizações inválidas pode ser um roteador mal configurado. Ou talvez um host esteja conectado à rede executando o protocolo de roteamento da rede local sem o conhecimento de seu usuário.</p> <p>Por exemplo, na figura, R1 está propagando uma rota padrão a todos os outros roteadores neste domínio de roteamento. Porém, alguém adicionou o roteador R4 erroneamente à rede, o qual também está propagando uma rota padrão. Alguns dos roteadores podem encaminhar tráfego padrão para R4 em vez de encaminhar para o roteador gateway real, R1. Estes pacotes podem entrar em um “buraco negro” e nunca mais serem vistos.</p> <p>Qualquer que seja a razão, é uma boa prática autenticar as informações de roteamento transmitidas entre os roteadores. RIPv2, EIGRP, OSPF, IS-IS e BGP podem ser configurados para autenticar suas informações de roteamento. Esta prática assegura que os roteadores somente aceitem informações de roteamento de outros roteadores que foram configurados com a mesma senha ou informações de autenticação. Nota: A autenticação não criptografa a tabela de roteamento. </p> <p><b>Nota: </b>Como o RIP abriu caminho para protocolos de roteamento mais populares, não são discutidas neste capítulo as características detalhadas de configuração para autenticação em RIPv2. Em vez disso, a configuração de protocolos de roteamento para utilizar autenticação será discutida em um curso posterior com outras questões de segurança.</p></content-text>
</page>
<page type="OneColumn" id="tl0907040302">
<content-media type="ActivityPKT" id="cm6018361150"><title><content-text></content-text></title><media ref="tl0907000000/tl0907040000/tl0907040300/tl0907040302/cm6018361150/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907040000/tl0907040300/tl0907040302/cm6018361150/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade de Packet Tracer para ver como as atualizações de roteamento não intencionais podem corromper a tabela de roteamento.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0907050000">
<title><content-text>Laboratórios de configuração RIPv2</content-text></title>
<topic type="" id="tl0907050100">
<title><content-text>Configuração RIPv2 básica</content-text></title>
<page type="OneColumn" id="tl0907050101">
<content-media type="ActivityLab" id="cm3753237663"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050100/tl0907050101/cm3753237663/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050100/tl0907050101/cm3753237663/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você trabalhará com uma <content-link target="cg4461611920" type="glossary">rede descontígua</content-link> que é dividida em sub-redes utilizando o VLSM. Conforme visto ao longo deste capítulo e do Capítulo 5, "RIP versão 1", ele pode ser um problema quando o protocolo de roteamento utilizado não incluir informações suficientes para distinguir as sub-redes individuais. Para resolver este problema, você configurará o RIPv2 como o protocolo de roteamento classless para fornecer informações de máscara de sub-rede nas atualizações de roteamento.</p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050102">
<content-media type="ActivityPKA" id="cm6895014294"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050100/tl0907050102/cm6895014294/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050100/tl0907050102/cm6895014294/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para repetir uma simulação de Laboratório 7.5.1. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907050200">
<title><content-text>Configuração RIPv2 avançada</content-text></title>
<page type="OneColumn" id="tl0907050201">
<content-media type="ActivityLab" id="cm4318206083"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050200/tl0907050201/cm4318206083/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050200/tl0907050201/cm4318206083/icontext.xml"/></content-media>
<content-text><p>Nesta atividade de laboratório, você recebe um endereço de rede que deve ser dividido em sub-redes utilizando o VLSM para concluir o endereçamento da rede. Uma combinação entre roteamentos de RIP versão 2 e estático será obrigatória para que os hosts em redes que não estejam diretamente conectadas possam se comunicar entre si e com a Internet.</p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050202">
<content-media type="ActivityPKA" id="cm6343800598"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050200/tl0907050202/cm6343800598/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050200/tl0907050202/cm6343800598/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para repetir uma simulação de Laboratório 7.5.2. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0907050300">
<title><content-text>Identificação e solução de problemas de RIPv2</content-text></title>
<page type="OneColumn" id="tl0907050301">
<content-media type="ActivityLab" id="cm6443912401"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050300/tl0907050301/cm6443912401/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050300/tl0907050301/cm6443912401/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você começa carregando scripts de configuração em todos os roteadores. Esses scripts contêm erros que impedirão a comunicação fim-a-fim através da rede. Após carregar os scripts corrompidos, identifique e solucione os problemas de cada roteador para determinar os erros de configuração e, em seguida, utilize os comandos apropriados para corrigir as configurações. Quando todos os erros de configuração forem corrigidos, todos os hosts na rede devem poder comunicar-se uns com os outros.</p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907050302">
<content-media type="ActivityPKA" id="cm8190179932"><title><content-text></content-text></title><media ref="tl0907000000/tl0907050000/tl0907050300/tl0907050302/cm8190179932/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907050000/tl0907050300/tl0907050302/cm8190179932/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para repetir uma simulação de Laboratório 7.5.3. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0907060000">
<title><content-text>Resumo do capítulo</content-text></title>
<topic type="" id="tl0907060100">
<title><content-text>Resumo e revisão</content-text></title>
<page type="OneColumn" id="tl0907060101">
<content-media type="StaticGraphic" id="cm7014867842"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060101/cm7014867842.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060101/cm7014867842text.xml"/></content-media>
<content-text><p><b>Resumo</b></p> <p>RIPv2 é o protocolo de roteamento do vetor de distância classless que é definido na RFC 1723. Como o RIPv2 é um protocolo de roteamento classless, ele inclui a máscara de sub-rede com os endereços de rede nas atualizações de roteamento. Assim como ocorre com outros protocolos de roteamento classless, o RIPv2 suporta super-redes CIDR, VLSM e redes descontíguas.</p> <p>Nós vimos que os protocolos de roteamento classful como o RIPv1 não podem suportar redes descontíguas porque eles sumarizam automaticamente a limites de rede principal. Um roteador que recebe atualizações de roteamento de vários roteadores que anunciam a mesma rota de sumarização classful não pode determinar quais sub-redes pertencem a qual rota de sumarização. Esta incapacidade leva a resultados inesperados, por exemplo, pacotes enviados a rotas erradas.</p> <p>A versão padrão de RIP é a versão 1. O comando <span class="cmd"><b>version 2</b></span> é utilizado para modificar o RIP para RIPv2.</p> <p>Semelhante ao RIPv1, o RIPv2 sumariza automaticamente aos limites de rede principal. Entretanto, com RIPv2, a sumarização automática pode ser desabilitada com o comando <span class="cmd"><b>no auto-summary</b></span>. A sumarização automática deve ser desabilitada para suportar redes descontíguas. O RIPv2 também suporta super-redes CIDR e VLSM porque a máscara de sub-rede específica é incluída com o endereço de rede em toda atualização de roteamento. Você pode utilizar o comando <span class="cmd"><b>debug ip rip</b></span> para exibir a atualização RIP que envia a máscara de sub-rede com o endereço de rede como parte da entrada de rota. </p> <p>O comando <span class="cmd"><b>show ip protocols</b></span> mostrará que o RIP está enviando e recebendo agora as atualizações da versão 2 e se a sumarização automática está sendo aplicada ou não.</p></content-text>
</page>
<page type="FullScreen" id="tl0907060102">
<content-media type="ChapterSummary" id="cm7458552167"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060102/cm7458552167.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060102/cm7458552167text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0907060103">
<content-media type="ActivityPKA" id="cm3597071240"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060103/cm3597071240/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0907000000/tl0907060000/tl0907060100/tl0907060103/cm3597071240/icontext.xml"/></content-media>
<content-text><p>A Atividade avançada de integração das habilidades no Packet Tracer integra todo o conhecimento e as habilidades que você adquiriu nos capítulos anteriores deste curso e nos cursos anteriores. As habilidades relacionadas à discussão sobre RIPv2 também estão incluídas. Nesta atividade, você cria uma rede do zero.</p> <p>Começando com um espaço de endereçamento e requisitos de rede, você deve implementar um projeto de rede que satisfaça às especificações para, então, implementar uma configuração de roteamento de RIPv2 efetiva com o roteamento padrão integrado. Instruções detalhadas são fornecidas na atividade. </p> <p><content-link target="E2_PTAct_7_6_1_Directions.pdf" type="internalfile">Instruções de integração das habilidades no Packet Tracer (PDF)</content-link></p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0907060104">
<content-media type="StaticGraphic" id="cm3125995247"><title><content-text></content-text></title><media ref="tl0907000000/tl0907060000/tl0907060100/tl0907060104/cm3125995247.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0907000000/tl0907060000/tl0907060100/tl0907060104/cm3125995247text.xml"/></content-media>
<content-text><p><b>Para saber mais</b></p> <p><b>RFC 1723 RIP versão 2</b></p> <p>RFCs (Request for Comments) é uma série de documentos enviados à IETF (Internet Engineering Task Force) para propor um padrão de Internet ou comunicar novos conceitos, informações ou até mesmo diversão. RFC 1723 é o RFC para o RIP versão 2.</p> <p>As RFCs podem ser acessadas em vários sites, inclusive o <content-link target="http://www.ietf.org" type="external">www.ietf.org</content-link>. Leia tudo ou partes do RFC 1726 para obter mais informações sobre este protocolo de roteamento classless. </p> <p><b>Packet Tracer</b></p> <p>Utilize o Packet Tracer para criar duas redes classful descontíguas. Cada rede descontígua deve ter vários roteadores e sub-redes, um utilizando VLSM. Entre os dois grupos de redes descontíguas, adicione outro roteador que vincule as duas redes descontíguas. Certifique-se de utilizar uma rede principal diferente entre este roteador e cada uma das duas redes descontíguas. </p> <p>Utilize este cenário para examinar os problemas com RIPv1 e como RIPv2 pode ser utilizado para resolver estes problemas de roteamento.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0907070000">
<title><content-text>Teste do capítulo</content-text></title>
<topic type="" id="tl0907070100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl0907070101">
<content-media type="ChapterQuiz" id="cm7936652092"><title><content-text></content-text></title><media ref="tl0907000000/tl0907070000/tl0907070100/tl0907070101/cm7936652092/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0907000000/tl0907070000/tl0907070100/tl0907070101/cm7936652092/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>

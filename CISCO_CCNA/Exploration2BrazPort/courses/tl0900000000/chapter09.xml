<chapter type="" id="tl0909000000">
<title><content-text>EIGRP</content-text></title>
<section type="ChapterIntroduction" id="tl0909000000">
<title><content-text>Introdução do capítulo</content-text></title>
<topic type="" id="tl0909000100">
<title><content-text>Introdução do capítulo</content-text></title>
<page type="OneColumn" id="tl0909000101">
<content-media type="StaticGraphic" id="cm6816439676"><title><content-text></content-text></title><media ref="tl0909000000/tl0909000000/tl0909000100/tl0909000101/cm6816439676.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909000000/tl0909000100/tl0909000101/cm6816439676text.xml"/></content-media>
<content-text><p>O Protocolo de gateway interior aprimorado (EIGRP, Enhanced Interior Gateway Routing Protocol) é um protocolo de roteamento classless de vetor de distância que foi lançado em 1992 com IOS 9.21. Como sugere seu nome, o EIGRP é um aprimoramento do Protocolo de roteamento de gateway interior (IGRP, Interior Gateway Routing Protocol) da Cisco. Ambos são protocolos proprietários da Cisco e operam somente em roteadores Cisco.</p> <p>O propósito principal no desenvolvimento do EIGRP da Cisco era criar uma versão classless do IGRP. O EIGRP inclui diversos recursos que geralmente não são encontrados em outros protocolos de roteamento de vetor de distância como o RIP (RIPv1 e RIPv2) e IGRP. Estes recursos incluem:</p> <ul><li> O Protocolo confiável de transporte (RTP, Reliable Transport Protocol)</li> <li> Atualizações associadas</li> <li> Algoritmo de atualização por difusão (DUAL, Diffuding Update Algorithm)</li> <li> Estabelecimento de adjacências</li> <li> Tabelas de vizinho e topologia</li></ul> <p>Embora o EIGRP possa <i>atuar</i> como um protocolo de roteamento link-state, ele ainda é um protocolo de roteamento do vetor de distância.</p> <p><b>Nota: </b>O termo protocolo de roteamento <i>híbrido</i> é às vezes utilizado para definir o EIGRP. Porém, este termo é impreciso porque o EIGRP não é um híbrido entre os protocolos de roteamento de vetor de distância e link-state – ele é somente um protocolo de roteamento do vetor de distância. Portanto, a Cisco já não está utilizando este termo para referir-se ao EIGRP.</p> <p>Neste capítulo, você aprenderá a configurar o EIGRP e a verificar sua configuração do EIGRP com novos comandos <span class="cmd">show</span>. Você também aprenderá a fórmula utilizada pelo EIGRP para calcular esta métrica composta.</p> <p>O exclusivo protocolo RTP do EIGRP fornece uma entrega confiável e não confiável de pacotes EIGRP. Além disso, o EIGRP estabelece relações com roteadores diretamente conectados que também estão utilizando o EIGRP. São utilizadas relações de vizinhança para monitorar o status destes vizinhos. O RTP e o monitoramento de adjacências de vizinho definem a etapa para o trabalho do EIGRP, o Algoritmo de atualização por difusão (DUAL). </p> <p>Na condição de mecanismo computacional principal do EIGRP, o DUAL permanece no centro do protocolo de roteamento, garantindo caminhos <content-link target="cg1421657329" type="glossary">sem loop</content-link> e caminhos de backup ao longo do domínio de roteamento. Você aprenderá exatamente como o DUAL seleciona uma rota para instalar na tabela de roteamento e o que o DUAL faz com rotas de backup potenciais.</p> <p>Como o RIPv2, o EIGRP pode funcionar com comportamento de roteamento classful ou classless. Você aprenderá como desabilitar a sumarização automática e então como sumarizar manualmente as redes para reduzir o tamanho das tabelas de roteamento. Finalmente, você aprenderá a utilizar o roteamento padrão com o EIGRP.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909010000">
<title><content-text>Introdução ao EIGRP</content-text></title>
<topic type="" id="tl0909010100">
<title><content-text>EIGRP: Um protocolo de roteamento do vetor de distância aprimorado</content-text></title>
<page type="OneColumn" id="tl0909010101">
<content-media type="StaticGraphic" id="cm4569755634"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010100/tl0909010101/cm4569755634.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010100/tl0909010101/cm4569755634text.xml"/></content-media>
<content-text><p>Embora o EIGRP seja descrito como um protocolo de roteamento do vetor de distância aprimorado, ele ainda é um protocolo de roteamento do vetor de distância. Isto pode ser uma fonte de confusão. De modo a valorizar os aprimoramentos do EIGRP e eliminar qualquer confusão, nós devemos olhar primeiro para seu antecessor, o IGRP. </p> <p><b>Raízes do EIGRP: IGRP</b></p> <p>A Cisco desenvolveu o IGRP em 1985, em resposta a algumas das limitações do RIPv1, inclusive o uso da métrica de contagem de saltos e o tamanho de rede máximo de 15 saltos. </p> <p>Em vez da contagem de saltos, o IGRP e EIGRP utilizam métricas compostas de largura de banda, atraso, confiabilidade e carga. Por padrão, ambos os protocolos de roteamento utilizam somente a largura de banda e atraso. Porém, como o IGRP é um protocolo de roteamento classful que utiliza o algoritmo de Bellman-Ford e atualizações periódicas, sua utilidade está limitada em muitas das redes de hoje. </p> <p>Portanto, a Cisco aprimorou o IGRP com um novo algoritmo, o DUAL, e outros recursos. Os comandos para o IGRP e EIGRP são semelhantes e, em muitos casos, idênticos. Isto permite a migração fácil do IGRP para EIGRP. A Cisco descontinuou o IGRP a partir do IOS 12.2 (13) T e 12.2 (R1s4) S.</p> <p>Embora discutido mais detalhadamente ao longo deste capítulo, examinemos algumas das diferenças entre um protocolo de roteamento do vetor de distância tradicional, como o RIP e IGRP, e o protocolo de roteamento do vetor de distância aprimorado, o EIGRP.</p> <p>A figura resume as diferenças principais entre um protocolo de roteamento do vetor de distância tradicional, como o RIP, e o protocolo de roteamento do vetor de distância melhorado, EIGRP.</p> <p><b>O algoritmo</b></p> <p>Todos os protocolos de roteamento de vetor de distância tradicionais utilizam algumas variantes do algoritmo de Bellman-Ford ou Ford-Fulkerson. Nestes protocolos, como o RIP e IGRP, as entradas de roteamento individuais expiram e, portanto, precisam enviar periodicamente atualizações de tabela de roteamento. </p> <p>O EIGRP utiliza o Algoritmo de atualização por difusão (DUAL, Diffusing Update Algorithm). Embora ainda seja um protocolo de roteamento do vetor de distância, o EIGRP com DUAL implementa recursos não encontrados em protocolos de roteamento do vetor de distância tradicionais. O EIGRP não envia atualizações periódicas e as entradas de rota não expiram. Em vez disso, o EIGRP utiliza um protocolo Hello para monitorar o status de conexão com seus vizinhos. Somente alterações nas informações de roteamento, tais como um novo link ou um link tornando-se indisponível, fazem uma atualização de roteamento ocorrer. As atualizações de roteamento EIGRP ainda são vetores de distâncias transmitidas a vizinhos diretamente conectados. </p> <p><b>Determinação do caminho</b></p> <p>Protocolos de roteamento de vetor de distância tradicionais, como o RIP e IGRP, mantêm o monitoramento somente das rotas preferidas; o melhor caminho para uma rede de destino. Se a rota tornar-se indisponível, o roteador esperará por outra atualização de roteamento com um caminho para esta rede remota. </p> <p>O DUAL do EIGRP mantém uma tabela de topologia separada da tabela de roteamento, que inclui o melhor caminho para uma rede de destino e caminhos de backup que o DUAL tenha determinado como sendo caminhos sem loop. Sem loop significa que o vizinho não possui uma rota até a rede de destino que atravesse este roteador. </p> <p>Mais adiante neste capítulo, você verá que, para uma rota ser considerada um caminho de backup sem loop pelo DUAL, ela deverá atender o requisito conhecido como condição de viabilidade. Garante-se que qualquer caminho de backup que atenda esta condição seja um caminho sem loop. Como o EIGRP é um protocolo de roteamento do vetor de distância, é possível que haja caminhos de backup sem loop para uma rede de destino que não atendam a condição de viabilidade. Estes caminhos, portanto, <i>não </i>são incluídos pelo DUAL na tabela de topologia como um caminho de backup sem loop válido. </p> <p>Se uma rota tornar-se indisponível, o DUAL buscará por um caminho de backup válido em sua tabela de topologia. Se existir alguma, aquela rota será imediatamente inserida na tabela de roteamento. Se não existir, o DUAL executará um processo de detecção de rede para ver se houve um caminho de backup que não atendeu o requisito da condição de viabilidade. Este processo é discutido em mais detalhes posteriormente neste capítulo.</p> <p><b>Convergência</b></p> <p>Protocolos de roteamento de vetor de distância tradicionais, como o RIP e IGRP, utilizam atualizações periódicas. Devido à natureza não confiável das atualizações periódicas, os protocolos de roteamento de vetor de distância tradicionais estão propensos a loops de roteamento e a problemas de contagem até o infinito. O RIP e IGRP utilizam vários mecanismos para ajudar a evitar estes problemas, incluindo temporizadores de hold-down, que causam longos períodos de convergência.</p> <p>O EIGRP não utiliza temporizadores de hold-down. Em vez disso, os caminhos sem loop são obtidos através de um sistema de cálculos de rota (computações por difusão) que são executados de uma forma coordenada entre os roteadores. O detalhe de como isto é feito está além do escopo deste curso, mas o resultado é a convergência mais rápida do que os protocolos de roteamento de vetor de distância tradicionais.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010200">
<title><content-text>Formato de mensagem do EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010201">
<content-media type="InteractiveGraphicRollovers" id="cm4267074960"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010200/tl0909010201/cm4267074960.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010200/tl0909010201/cm4267074960text.xml"/></content-media>
<content-text><p><b>Passe o mouse sobre os campos na figura Mensagem EIGRP encapsulada para ver o processo de encapsulamento. </b></p> <p>A porção dos dados de uma mensagem EIGRP é encapsulada em um pacote. Este campo de dados é chamado de Tipo/Tamanho/Valor ou TLV (Type/Length/Value). Como mostrado na figura, os tipos de TLVs relevantes para este curso são os Parâmetros do EIGRP, Rotas IP Internas e Rotas IP Externas. Os componentes do campo de dados de TLV são discutidos mais a fundo na próxima página.</p> <p>O cabeçalho do pacote EIGRP é incluído em todos os pacotes EIGRP, independentemente de seu tipo. Os cabeçalho do pacote EIGRP e TLV são então encapsulados em um pacote IP. No cabeçalho de pacote IP, o campo de protocolo é definido como 88 para indicar EIGRP e o endereço de destino é definido para o endereço de multicast 224.0.0.10. Se o pacote EIGRP for encapsulado em um quadro Ethernet, o endereço MAC de destino também será um endereço multicast: 01-00-5E-00-00-0A.</p></content-text>
</page>
<page type="OneColumn" id="tl0909010202">
<content-media type="AnimationPartialScreen" id="cm4763640792"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010200/tl0909010202/cm4763640792.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010200/tl0909010202/cm4763640792text.xml"/></content-media>
<content-text><p><b>Nota:</b> Na discussão seguinte sobre mensagens do EIGRP, muitos campos estão além do escopo deste curso. Todos os campos são mostrados para fornecer uma imagem precisa do formato de mensagem do EIGRP. Porém, somente os campos relevantes ao candidato de CCNA serão discutidos.</p> <p><b>Clique em Cabeçalho do pacote EIGRP na figura.</b></p> <p>Toda mensagem do EIGRP inclui o cabeçalho. Os campos importantes para nossa discussão incluem o campo Opcode e o campo Número de sistema autônomo. O Opcode especifica o tipo de pacote EIGRP: </p> <ul><li> Atualização</li> <li> Consulta</li> <li> Resposta</li> <li> Hello</li></ul> <p>O Número de <content-link target="cg6494076566" type="glossary">Sistema autônomo (AS</content-link>, Autonomous System) especifica o processo de roteamento EIGRP. Ao contrário do RIP, os roteadores Cisco podem executar múltiplas instâncias do EIGRP. O número de AS é utilizado para monitorar as múltiplas instâncias do EIGRP.</p> <p>Os tipos de pacote EIGRP são discutidos neste capítulo.</p> <p><b>Clique em TLV: Parâmetros do EIGRP na figura.</b></p> <p>A mensagem de parâmetros EIGRP inclui os pesos que o EIGRP utiliza para sua métrica composta. Por padrão, somente a largura de banda e o atraso são considerados. Ambos são igualmente considerados, portanto, o campo K1 para largura de banda e o campo K3 para atraso são ambos definidos como 1. Os outros valores K são definidos como zero. Os cálculos de métrica são discutidos mais a fundo posteriormente neste capítulo.</p> <p>O Tempo de espera (Hold Time) é a quantidade de tempo que o vizinho EIGRP que recebe esta mensagem deve esperar antes de considerar que o roteador que anuncia esteja inativo. O Tempo de espera é discutido em mais detalhes posteriormente neste capítulo.</p> <p><b>Clique em TLV: IP Interno na figura.</b></p> <p>A mensagem IP interno é utilizada para anunciar as rotas do EIGRP dentro de um sistema autônomo. Campos importantes para nossa discussão incluem: os campos de métrica (Atraso e largura de banda), o campo de máscara de sub-rede (Tamanho do prefixo) e o campo Destino. </p> <p>O atraso é calculado como a soma de atrasos da origem para o destino em unidades de 10 microssegundos. A largura de banda é a mais baixa largura de banda configurada de qualquer interface ao longo da rota. </p> <p>A máscara de sub-rede é especificada como o tamanho do prefixo ou o número de bits de rede na máscara de sub-rede. Por exemplo, o tamanho do prefixo para a máscara de sub-rede 255.255.255.0 é 24 porque 24 é o número de bits da rede. </p> <p>O campo Destino armazena o endereço da rede de destino. Embora somente os 24 bits sejam mostrados nesta figura, este campo varia com base no valor da porção da rede do endereço de rede de 32 bits. Por exemplo, a porção da rede de 10.1.0.0/16 é de 10.1. Portanto, o campo Destino armazena os primeiros 16 bits. Uma vez que o comprimento <i>mínimo</i> deste campo é 24 bits, o restante do campo é preenchido com zeros. Se um endereço de rede for mais longo que 24 bits (192.168.1.32/27, por exemplo), então o campo Destino será estendido para outros 32 bits (para um total de 56 bits) e os bits não utilizados são preenchidos com zeros.</p> <p><b>Clique em TLV: IP Externo na figura.</b></p> <p>A mensagem de IP Externo é utilizada quando rotas externas são importadas para o processo de roteamento EIGRP. Neste capítulo, nós importaremos ou redistribuiremos uma rota estática padrão para o EIGRP. Note que a metade inferior do TLV de IP Externo inclui todos os campos utilizados pelo TLV de IP Interno. </p> <p><b>Nota:</b> Algumas literaturas do EIGRP podem declarar incorretamente que a Unidade máxima de transmissão (MTU, Maximum Transmission Unit) é uma das métricas utilizadas pelo EIGRP. O MTU <i>não</i> é uma métrica utilizada pelo EIGRP. O MTU está incluído nas atualizações de roteamento, mas não é utilizado para determinar a métrica de roteamento.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010300">
<title><content-text>Módulos dependentes do protocolo (PDM)</content-text></title>
<page type="OneColumn" id="tl0909010301">
<content-media type="StaticGraphic" id="cm3812279625"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010300/tl0909010301/cm3812279625.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010300/tl0909010301/cm3812279625text.xml"/></content-media>
<content-text><p>O EIGRP possui a capacidade de rotear vários protocolos diferentes inclusive IP, IPX e AppleTalk utilizando Módulos dependentes do protocolo (PDM, Protocol-Dependent Modules). Os PDMs são responsáveis pelas tarefas de roteamento específicas para cada protocolo de camada de rede. </p> <p>Por exemplo:</p> <ul><li> O módulo de IP-EIGRP é responsável por enviar e receber pacotes do EIGRP que são encapsulados em IP e por utilizar DUAL para criar e manter a tabela de roteamento IP. Como você pode ver na figura, o EIGRP utiliza diferentes pacotes EIGRP e mantém vizinho, topologia e tabelas de roteamento separados para cada protocolo de camada de rede. </li> <li> O módulo IPX EIGRP é responsável por trocar informações de roteamento sobre redes IPX com outros roteadores IPX EIGRP. O IPX EIGRP e Appletalk EIGRP não estão incluídos neste curso. </li></ul></content-text>
</page>
</topic>
<topic type="" id="tl0909010400">
<title><content-text>Tipos de pacote RTP e EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010401">
<content-media type="StaticGraphic" id="cm6683622472"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010400/tl0909010401/cm6683622472.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010400/tl0909010401/cm6683622472text.xml"/></content-media>
<content-text><p>O Protocolo de transporte confiável (RTP, Reliable Transport Protocol) é o protocolo utilizado pelo EIGRP para a entrega e o recebimento dos pacotes EIGRP. O EIGRP foi criado como um protocolo de roteamento independente de camada de rede; portanto, não pode utilizar os serviços de UDP ou TCP porque o IPX e Appletalk não utilizam protocolos da pilha TCP/IP. A figura mostra conceitualmente como o RTP funciona. </p> <p>Embora "Confiável" faça parte de seu nome, o RTP inclui entrega confiável e entrega não confiável de pacotes EIGRP, semelhante ao TCP e UDP, respectivamente. O RTP confiável exige que uma confirmação seja confirmada pelo receptor ao remetente. Um pacote RTP não confiável não exige uma confirmação. </p> <p>O RTP pode enviar pacotes como unicast ou multicast. Os pacotes multicast do EIGRP utilizam o endereço de multicast reservado 224.0.0.10.</p></content-text>
</page>
<page type="OneColumn" id="tl0909010402">
<content-media type="InteractiveGraphicHotspots" id="cm5603778361"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010400/tl0909010402/cm5603778361.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010400/tl0909010402/cm5603778361text.xml"/></content-media>
<content-text><p><b>Tipos de pacote EIGRP</b></p> <p>O EIGRP utiliza cinco tipos de pacote diferentes, alguns em pares.</p> <p><b>Clique em Hello na figura.</b></p> <p>Os <b>pacotes Hello</b> são utilizados pelo EIGRP para detectar vizinhos e formar adjacências com esses vizinhos. Os pacotes hello do EIGRP são multicasts e utilizam entrega não confiável. Os pacotes Hello do EIGRP são discutidos em uma seção posterior.</p> <p><b>Clique em Atualização e ACK na figura.</b></p> <p>Os <b>pacotes de atualização</b> são utilizados pelo EIGRP para propagar informações de roteamento. Diferentemente do RIP, o EIGRP não envia atualizações periódicas. Os pacotes de atualização são enviados somente quando necessário. As atualizações do EIGRP contêm apenas as informações de roteamento necessárias e são enviadas somente aos roteadores que as exigem. Os pacotes de atualização EIGRP utilizam entrega confiável. Os pacotes de atualização são enviados como multicast quando exigidos por vários roteadores, ou como unicast quando exigidos somente por um único roteador. Na figura, como os links são ponto-a-ponto, as atualizações são enviadas como unicasts.</p> <p>Os <b>Pacotes de confirmação (ACK, Acknowledgement)</b> são enviados pelo EIGRP quando a entrega confiável é utilizada. O RTP utiliza entrega confiável para pacotes de atualização, consulta e resposta do EIGRP. Os pacotes de confirmação do EIGRP contêm um número de confirmação diferente de zero e sempre são enviados utilizando um endereço unicast.</p> <p>Na figura, o R2 perdeu conectividade à rede local conectada a sua interface FastEthernet. O R2 envia uma Atualização imediatamente a R1 e R3 percebendo a rota inativa. R1 e R3 respondem com uma confirmação.</p> <p><b>Clique em Consulta e resposta na figura.</b></p> <p>Os <b>pacotes consulta e resposta</b> são utilizados pelo DUAL ao procurar redes e ao realizar outras tarefas. Consultas e respostas utilizam entrega confiável. Consultas utilizam multicast, enquanto respostas são sempre enviadas como unicast. O DUAL é discutido em uma seção posterior. Os pacotes de consulta e resposta são discutidos em mais detalhes no CCNP.</p> <p>Na figura, o R2 perdeu conectividade com a rede local e envia consultas a todos os vizinhos EIGRP que procuram possíveis rotas para a rede local. Como as consultas utilizam entrega confiável, o roteador de destino deve devolver uma confirmação EIGRP. (Para manter este exemplo simples, as confirmações foram omitidas no gráfico.)</p> <p>Todos os vizinhos devem enviar uma resposta independentemente de ter ou não uma rota para a rede inativa. Uma vez que as respostas também utilizam entrega confiável, roteadores como R2 devem enviar uma confirmação.</p> <p><b>Nota:</b> Você pode estar se perguntando por que o R2 enviaria uma consulta para uma rede que sabe que está inativa. De fato, somente a interface conectada à rede está inativa. Outro roteador pode estar conectado à mesma rede local. Portanto, R2 consulta para tal roteador antes de remover a rede completamente de seu banco de dados.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010500">
<title><content-text>Protocolo Hello</content-text></title>
<page type="OneColumn" id="tl0909010501">
<content-media type="StaticGraphic" id="cm1582251881"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010500/tl0909010501/cm1582251881.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010500/tl0909010501/cm1582251881text.xml"/></content-media>
<content-text><p>Antes de os pacotes EIGRP poderem ser trocados entre os roteadores, o EIGRP deve primeiro detectar seus vizinhos. Os vizinhos EIGRP são outros roteadores que executam o EIGRP em redes compartilhadas diretamente conectadas.</p> <p>Os roteadores EIGRP detectam vizinhos e estabelecem adjacências com roteadores vizinhos utilizando o pacote Hello. Na maioria das redes, os pacotes Hello do EIGRP são enviados a cada 5 segundos. Em redes ponto-multiponto (NBMA, nonbroadcast multiaccess networks ) como X.25, Frame Relay e interfaces ATM com links de acesso de T1 (1.544 Mbps) ou mais lentas, os Hellos são unicast a cada 60 segundos. Um roteador EIGRP assume que, contanto que esteja recebendo pacotes Hello de um vizinho, o vizinho e suas rotas permanecerão viáveis. </p> <p>O tempo de espera revela ao roteador o tempo máximo que ele deve esperar para receber o próximo Hello antes de declarar o vizinho como inalcançável. Por padrão, o <content-link target="cg6535488659" type="glossary">tempo de espera</content-link> é de três vezes o intervalo Hello ou 15 segundos na maioria das redes e de 180 segundos em redes NBMA de baixa velocidade. Se o tempo de espera expirar, o EIGRP declarará a rota como inativa e o DUAL procurará um novo caminho enviando consultas. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909010600">
<title><content-text>Atualizações associadas do EIGRP</content-text></title>
<page type="OneColumn" id="tl0909010601">
<content-media type="StaticGraphic" id="cm9368639123"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010600/tl0909010601/cm9368639123.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010600/tl0909010601/cm9368639123text.xml"/></content-media>
<content-text><p>O EIGRP utiliza o termo <i>parcial</i> ou <i>associada</i> ao referir-se a seus pacotes de atualização. Diferentemente do RIP, o EIGRP não envia atualizações periódicas. Ao contrário, o EIGRP envia suas atualizações somente quando a métrica para uma rota muda. </p> <p>O termo <i>parcial</i> significa que a atualização somente inclui informações sobre as alterações de rota. O EIGRP envia estas atualizações adicionais quando o estado de um destino muda, em vez de enviar os conteúdos inteiros da tabela de roteamento. </p> <p>O termo <i>associado</i> refere-se à propagação de atualizações parciais enviadas somente a esses roteadores que são afetados pela alteração. A atualização parcial é “associada” automaticamente de forma que somente esses roteadores que precisam das informações sejam atualizados. </p> <p>Por enviar somente as informações de roteamento que são necessárias e somente para esses roteadores que precisam delas, o EIGRP minimiza a largura de banda exigida para enviar pacotes EIGRP.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010700">
<title><content-text>DUAL: Uma introdução</content-text></title>
<page type="OneColumn" id="tl0909010701">
<content-media type="AnimationPartialScreen" id="cm5040324477"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010700/tl0909010701/cm5040324477.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010700/tl0909010701/cm5040324477text.xml"/></content-media>
<content-text><p>O Algoritmo de atualização por difusão (DUAL, Diffusing Update Algorithm) é o algoritmo de convergência utilizado pelo EIGRP em vez dos algoritmos Bellman-Ford ou Ford Fulkerson utilizados por outros protocolos de roteamento de vetor de distância, como o RIP. O DUAL é baseado em uma pesquisa realizada no SRI International, utilizando cálculos que foram propostos primeiramente por E.W. Dijkstra e C.S. Scholten. O trabalho mais bem conhecido com DUAL foi feito por J.J. Garcia-Luna-Aceves.</p> <p>Loops de roteamento, mesmo os temporários, podem ser extremamente prejudiciais para o desempenho da rede. Os protocolos de roteamento de vetor de distância, como o RIP, impedem loops de roteamento com <content-link target="cg3331630841" type="glossary">temporizadores de hold-down</content-link> e split horizon. Embora o EIGRP utilize as duas técnicas, ele as utiliza de um modo um pouco diferente. A principal maneira com a qual o EIGRP impede loops de roteamento é com o algoritmo DUAL. </p> <p><b>Clique em Reproduzir para exibir a operação básica do DUAL.</b></p> <p>O algoritmo DUAL é utilizado para obter liberdade de loop a todo momento ao longo de uma computação de rota. Isto permite que todos os roteadores envolvidos em uma alteração de topologia sincronizem ao mesmo tempo. Os roteadores que não são afetados pelas alterações de topologia não são envolvidos na nova computação. Este método proporciona ao EIGRP tempos de convergência mais rápidos que outros protocolos de roteamento de vetor de distância. </p> <p>O processo de decisão para todas as computações de rota é feito pela Máquina de estado finito DUAL. Em termos gerais, uma máquina de estado finito (FSM, Finite State Machine) é um modelo de comportamento composto de um número finito de estados, transições entre esses estados e eventos ou ações que criam as transições.</p> <p>O FSM DUAL monitora todas as rotas, utiliza sua métrica para escolher caminhos eficientes, sem loop e seleciona as rotas com o caminho de menor custo para inserir na tabela de roteamento. O FSM DUAL será discutido em mais detalhes posteriormente neste capítulo.</p> <p>Como a nova computação do algoritmo DUAL pode ser intensa para o processador, é vantajoso evitá-la sempre que possível. Portanto, o DUAL mantém uma lista de rotas de backup que já determinou como sendo sem loop. Se a rota primária na tabela de roteamento falhar, a melhor rota de backup será adicionada imediatamente à tabela de roteamento. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909010800">
<title><content-text>Distância administrativa</content-text></title>
<page type="OneColumn" id="tl0909010801">
<content-media type="StaticGraphic" id="cm5496832646"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010800/tl0909010801/cm5496832646.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010800/tl0909010801/cm5496832646text.xml"/></content-media>
<content-text><p>Como você aprendeu no Capítulo 3, "Introdução aos protocolos de roteamento dinâmico", a distância administrativa (AD, Administrative Distance) é a confiança (ou preferência) da origem da rota. O EIGRP possui uma distância administrativa padrão de 90 para rotas internas e 170 para rotas externas, como as rotas padrão. Quando comparado a outros protocolos IGP, o EIGRP é o preferido pelo IOS Cisco porque tem a distância administrativa mais baixa. </p> <p>Observe na figura que o EIGRP possui um terceiro valor de distância administrativa, de 5, para rotas de sumarização. Posteriormente neste capítulo, você aprenderá a configurar as rotas de sumarização do EIGRP.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909010900">
<title><content-text>Autenticação</content-text></title>
<page type="OneColumn" id="tl0909010901">
<content-media type="StaticGraphic" id="cm8222038895"><title><content-text></content-text></title><media ref="tl0909000000/tl0909010000/tl0909010900/tl0909010901/cm8222038895.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909010000/tl0909010900/tl0909010901/cm8222038895text.xml"/></content-media>
<content-text><p>Como outros protocolos de roteamento, o EIGRP pode ser configurado para autenticação. RIPv2, EIGRP, OSPF, IS-IS e BGP podem ser configurados para criptografar e autenticar suas informações de roteamento.</p> <p>É uma prática recomendada autenticar informações de roteamento transmitidas. Esta prática assegura que os roteadores somente aceitem informações de roteamento de outros roteadores que foram configurados com a mesma senha ou informações de autenticação. </p> <p><b>Nota:</b> A autenticação não criptografa a tabela de roteamento do roteador.</p> <p>Como dito em capítulos anteriores, a configuração de protocolos de roteamento para utilizar autenticação será discutida em um curso posterior. </p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909020000">
<title><content-text>Configuração EIGRP básica</content-text></title>
<topic type="" id="tl0909020100">
<title><content-text>Topologia de rede EIGRP</content-text></title>
<page type="OneColumn" id="tl0909020101">
<content-media type="InteractiveGraphicHotspots" id="cm5326487712"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020100/tl0909020101/cm5326487712.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020100/tl0909020101/cm5326487712text.xml"/></content-media>
<content-text><p>A figura mostra nossa topologia de capítulos anteriores, mas agora inclui a adição do roteador ISP. Observe que ambos os roteadores R1 e R2 possuem sub-redes que fazem parte da rede classful 172.16.0.0/16, um endereço de classe B. O fato de 172.16.0.0 ser um endereço classe B só é relevante porque o EIGRP sumariza automaticamente em limites classful , semelhante ao RIP. </p> <p><b>Clique em R1, R2 e R3 para ver a configuração inicial de cada roteador.</b></p> <p>Observe que o roteador ISP não existe fisicamente em nossas configurações. A conexão entre R2 e o ISP é representada com uma <content-link target="cg9480679254" type="glossary">interface de loopback</content-link> no roteador R2. Lembre-se do Capítulo 7, "RIPv2", que uma interface de loopback pode ser utilizada para representar uma interface em um roteador que não tem nenhuma conexão real com um link físico na rede. Endereços de loopback podem ser verificados com o comando <span class="cmd"><b>ping</b></span> e incluídos nas atualizações de roteamento.</p> <p><b>Nota:</b> As interfaces de loopback também possuem usos específicos com alguns protocolos de roteamento, como veremos no Capítulo 11, OSPF.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909020200">
<title><content-text>Sistemas autônomos e IDs de processo</content-text></title>
<page type="OneColumn" id="tl0909020201">
<content-media type="StaticGraphic" id="cm1271893935"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020200/tl0909020201/cm1271893935.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020200/tl0909020201/cm1271893935text.xml"/></content-media>
<content-text><p><b>Sistema autônomo</b></p> <p>Um sistema autônomo (AS, Autonomous System) é uma coleção de redes sob o controle administrativo de uma única entidade que apresenta uma política de roteamento comum para a Internet. Na figura, as empresas A, B, C e D estão todas sob o controle administrativo de ISP1. ISP1 “apresenta uma política de roteamento comum" para todas estas empresas ao anunciar rotas para ISP2. </p> <p>As diretrizes para a criação, seleção e registro de um sistema autônomo são descritas na RFC 1930. Os números de AS são atribuídos pela IANA (Internet Assigned Numbers Authority), a mesma autoridade que atribui o espaço de endereço IP. Você aprendeu sobre IANA e seus Registros de Internet Regionais (RIRs, Regional Internet Registries) em um curso anterior. O RIR local é responsável por atribuir um número de AS a uma entidade de seu bloco de números de AS atribuídos. Antes de 2007, os números de AS eram números de 16 bits, variando de 0 até 65535. Agora são atribuídos números de AS de 32 bits, aumentando a quantidade de números de AS disponíveis para mais de 4 bilhões. </p> <p>Quem precisa de um número de sistema autônomo? Normalmente os ISPs (Provedores de Internet), provedores de backbone de Internet e instituições de grande porte que se conectam a outras entidades que também possuem um número de AS. Estes provedores de Internet e instituições de grande porte utilizam o protocolo de roteamento de gateway exterior Border Gateway Protocol, ou BGP, para propagar informações de roteamento. O BGP é o único protocolo de roteamento que utiliza um número de sistema autônomo real em sua configuração. </p> <p>A grande maioria das empresas e instituições com redes IP não precisa de um número de AS porque elas estão sob o controle de uma entidade maior como um provedor de Internet. Estas empresas utilizam protocolos IGP como RIP, EIGRP, OSPF, e IS-IS para rotear pacotes dentro de suas próprias redes. Elas são algumas redes independentes e separadas dentro do sistema autônomo do ISP. O ISP é responsável pelo roteamento de pacotes dentro de seu sistema autônomo e entre outros sistemas autônomos. </p></content-text>
</page>
<page type="OneColumn" id="tl0909020202">
<content-media type="StaticGraphic" id="cm7178461969"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020200/tl0909020202/cm7178461969.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020200/tl0909020202/cm7178461969text.xml"/></content-media>
<content-text><p><b>ID de processo</b></p> <p>EIGRP e OSPF utilizam uma ID de processo para representar uma instância de seu respectivo protocolo de roteamento sendo executado no roteador. </p> <span class="cmd"><p>Router(config)#<b>router eigrp </b><i>autonomous-system</i> </p></span> <p>Embora o EIGRP refira-se ao parâmetro como um número de “sistema autônomo”, na verdade ele funciona como uma ID de processo. Este número <i>não</i> está associado a um número de sistema autônomo previamente discutido e pode receber qualquer valor de 16 bits. </p> <span class="cmd"><p>Router(config)#<b>router eigrp 1</b></p></span> <p>Neste exemplo, o número 1 identifica este processo de EIGRP específico sendo executado neste roteador. Para estabelecer adjacências de vizinho, o EIGRP exige que todos os roteadores no mesmo domínio de roteamento sejam configurados com a mesma ID de processo. Normalmente, só uma única ID de processo de qualquer protocolo de roteamento é configurada em um roteador. </p> <p><b>Nota: </b>O RIP não utiliza IDs de processo; portanto, somente pode suportar uma única instância de RIP. Tanto o EIGRP quanto o OSPF podem suportar múltiplas instâncias de cada protocolo de roteamento, embora este tipo de implementação de protocolo de roteamento múltipla não seja geralmente necessária ou recomendada. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909020300">
<title><content-text>O comando router eigrp</content-text></title>
<page type="OneColumn" id="tl0909020301">
<content-media type="StaticGraphic" id="cm4718440561"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020300/tl0909020301/cm4718440561.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020300/tl0909020301/cm4718440561text.xml"/></content-media>
<content-text><p>O comando de configuração global <span class="cmd"><b>router eigrp </b><i>autonomous-system</i></span> habilita o EIGRP. O parâmetro de sistema autônomo é um número escolhido pelo administrador de rede entre 1 e 65535. O número escolhido é o número de ID do processo e é importante porque todos os roteadores neste domínio de roteamento EIGRP devem utilizar o mesmo número de ID de processo (número de <span class="cmd"><i>sistema autônomo</i></span>).</p> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>Como você pode ver na topologia e na saída do comando do roteador na figura, nós habilitaremos o EIGRP em todos os três roteadores utilizando a ID de processo de 1.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909020400">
<title><content-text>O comando network</content-text></title>
<page type="OneColumn" id="tl0909020401">
<content-media type="StaticGraphic" id="cm8531213541"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020400/tl0909020401/cm8531213541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020400/tl0909020401/cm8531213541text.xml"/></content-media>
<content-text><p>O comando network em EIGRP possui a mesma função que em outros protocolos de roteamento IGP: </p> <ul><li> Qualquer interface neste roteador que corresponda ao endereço de rede no <span class="cmd">comando <b>network</b></span> será habilitado para enviar e receber atualizações de EIGRP.</li> <li> Esta rede (ou sub-rede) será incluída nas atualizações de roteamento EIGRP.</li></ul> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>O comando <span class="cmd"><b>network</b></span> é utilizado no modo de configuração do roteador.</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>network-address</i></p></span> <p>O <span class="cmd"><i>network-address</i></span> é o endereço de rede classful para esta interface. A figura mostra os comandos de rede configurados para R1 e R2. R3 será configurado na próxima página. Na figura, um único comando network classful é utilizado em R1 para incluir ambas as sub-redes 172.16.1.0/24 e 172.16.3.0/30:</p> <span class="cmd"><p>R1(config-router)#<b>network 172.16.0.0</b></p></span>  <p>Quando o EIGRP for configurado em R2, o DUAL enviará uma mensagem de notificação para a console dizendo que uma relação de vizinho com outro roteador de EIGRP foi estabelecida. Esta nova <content-link target="cg3325821460" type="glossary">adjacência</content-link> acontece automaticamente porque R1 e R2 estão utilizando o mesmo processo de roteamento <span class="cmd"><b>eigrp 1</b></span> e ambos os roteadores estão agora enviando atualizações na rede 172.16.0.0.</p> <span class="cmd"><p>R2(config-router)#<b>network 172.16.0.0</b></p></span> <span class="cmd"><p>%DUAL-5-NBRCHANGE: <span class="blue">IP-EIGRP 1</span>: Neighbor 172.16.3.1 (Serial0/0) is up: new adjacency</p></span></content-text>
</page>
<page type="OneColumn" id="tl0909020402">
<content-media type="StaticGraphic" id="cm3761399799"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020400/tl0909020402/cm3761399799.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020400/tl0909020402/cm3761399799text.xml"/></content-media>
<content-text><p><b>O Comando </b><span class="cmd"><b>network</b></span><b> com uma máscara curinga</b></p> <p>Por padrão, ao utilizar o comando <span class="cmd">network</span> e um endereço de rede classful como 172.16.0.0, todas as interfaces no roteador que pertencem a este endereço de rede classful serão habilitadas para EIGRP. Porém, pode haver momentos em que o administrador de rede não deseja incluir todas as interfaces dentro de uma rede ao habilitar o EIGRP. Para configurar o EIGRP para anunciar somente sub-redes específicas, utilize a opção <span class="cmd"><i>wildcard-mask</i></span> com o comando <span class="cmd"><b>network</b></span>:</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>network-address</i> [<i>wildcard-mask</i>] </p></span> <p>Pense em uma <content-link target="cg7157518994" type="glossary">máscara curinga</content-link> como o inverso de uma máscara de sub-rede. O inverso da máscara de sub-rede 255.255.255.252 é 0.0.0.3. Para calcular o inverso da máscara de sub-rede, subtraia a máscara de sub-rede de 255.255.255.255:</p> <span class="cmd"><p> 255.255.255.255 </p></span> <span class="cmd"><p>- 255.255.255.252</p></span> <span class="cmd"><p>Subtraia a máscara de sub-rede</p></span> <span class="cmd"><p>---------------</p></span> <span class="cmd"><p>0. 0. 0. 3</p></span> <span class="cmd"><p>máscara curinga</p></span> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>Na figura, R2 é configurado com a sub-rede 192.168.10.8 e a máscara curinga 0.0.0.3.</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8.0.0.0.3</b></p></span> <p>Algumas versões de IOS também permitem que você simplesmente digite a máscara de sub-rede. Por exemplo, você pode digitar o seguinte:</p> <span class="cmd"><p>R2(config-router)#<b>network 192.168.10.8 255.255.255.252</b></p></span> <p>Porém, o IOS converterá então o comando ao formato de máscara curinga, como pode ser verificado com o comando <span class="cmd"><b>show run</b></span>:</p> <span class="cmd"><p>R2#<b>show run</b></p></span> <span class="cmd"><p>&lt;parte da saída do comando omitida&gt;</p></span> <span class="cmd"><p>!</p></span> <span class="cmd"><p>router eigrp 1</p></span> <span class="cmd"><p>network 172.16.0.0</p></span> <span class="cmd"><p>network 192.168.10.8 <span class="blue">0.0.0.3</span></p></span> <span class="cmd"><p>auto-summary</p></span> <span class="cmd"><p>!</p></span> <p>A figura também mostra a configuração para R3. Assim que a rede classful 192.168.10.0 for configurada, R3 estabelecerá adjacências com R1 e R2. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909020500">
<title><content-text>Verificando o EIGRP</content-text></title>
<page type="OneColumn" id="tl0909020501">
<content-media type="StaticGraphic" id="cm5354599932"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020500/tl0909020501/cm5354599932.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020500/tl0909020501/cm5354599932text.xml"/></content-media>
<content-text><p>Antes de as atualizações poderem ser enviadas ou recebidas por EIGRP, os roteadores deverão estabelecer adjacências com seus vizinhos. Os roteadores de EIGRP estabelecem adjacências com roteadores vizinhos trocando pacotes Hello do EIGRP. </p> <p>Utilize o comando <span class="cmd"><b>show ip eigrp neighbors</b></span> para exibir a tabela de vizinho e verificar se o EIGRP estabeleceu uma adjacência com seus vizinhos. Para cada roteador, você deve poder ver o endereço IP do roteador adjacente e a interface que este roteador utiliza para alcançar o vizinho de EIGRP. Na figura, nós podemos verificar que todos os roteadores estabeleceram as adjacências necessárias. Cada roteador possui dois vizinhos listados na tabela de vizinho.</p> <p>A saída do comando <span class="cmd"><b>show ip eigrp neighbor</b></span> inclui:</p> <ul><li> <span class="cmd"><b>coluna H</b></span> - Lista os vizinhos na ordem em que eles foram reconhecidos.</li> <li> <span class="cmd"><b>Endereço (Address)</b></span> - O endereço IP do vizinho.</li> <li> <span class="cmd"><b>Interface</b></span> - A interface local na qual este pacote Hello foi recebido.</li> <li> <span class="cmd"><b>Espera (Hold)</b></span> - O tempo de espera atual. Sempre que um pacote Hello é recebido, este valor é redefinido para o tempo de espera máximo para aquela interface e então faz contagem regressiva até zero. Se o zero for alcançado, o vizinho será considerado "inativo."</li> <li> <span class="cmd"><b>Tempo de atividade (Uptime)</b></span> - Quantidade de tempo desde que este vizinho foi adicionado à tabela de vizinho.</li> <li> <span class="cmd"><b>SRTT</b></span> (Smooth Round Trip Timer, Temporizador de ida e volta suave) e <span class="cmd"><b>RTO</b></span> (Retransmit Interval, Intervalo de retransmissão) - Utilizado por RTP para gerenciar pacotes de EIGRP confiáveis. O SRTT e RTO são discutidos mais a fundo nos cursos CCNP.</li> <li> <span class="cmd"><b>Contagem de fila</b></span> - Sempre deve ser zero. Se for mais que zero, isso significará que os pacotes de EIGRP estão esperando para serem enviados. A contagem de fila é discutida mais a fundo nos cursos CCNP.</li> <li> <span class="cmd"><b>Número de seqüência</b></span> - Utilizado para monitorar atualizações, consultas e pacotes de resposta. Os números de seqüência são discutidos mais a fundo nos cursos CCNP.</li></ul> <p>O comando <span class="cmd"><b>show ip eigrp neighbors</b></span> é muito útil para verificar, identificar e solucionar problemas do EIGRP. Se um vizinho não for listado depois que as adjacências forem estabelecidas com os vizinhos de um roteador, verifique a interface local para ter certeza de que está ativada com o comando <span class="cmd"><b>show ip interface brief</b></span>. Se a interface estiver ativa, tente executar ping no endereço IP do vizinho. Se o ping falhar, isso significa que a interface de vizinho está inativa e precisa ser ativada. Se o ping tiver êxito e o EIGRP ainda não vir o roteador como um vizinho, examine as seguintes configurações:</p> <ul><li> Ambos os roteadores estão configurados com a mesma ID de processo de EIGRP?</li> <li> A rede diretamente conectada está incluída nos comandos network do EIGRP?</li> <li> O comando <span class="cmd"><b>passive-interface</b></span> está configurado para evitar pacotes Hello do EIGRP na interface?</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0909020502">
<content-media type="StaticGraphic" id="cm8027203070"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020500/tl0909020502/cm8027203070.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020500/tl0909020502/cm8027203070text.xml"/></content-media>
<content-text><p>Assim como ocorre com RIP, o comando <span class="cmd"><b>show ip protocols</b></span> pode ser utilizado para verificar se o EIGRP está habilitado. O comando <span class="cmd"><b>show ip protocols</b></span> exibe tipos diferentes de saída do comando específicos para cada protocolo de roteamento. Nós examinaremos alguns destes detalhes em seções posteriores. </p> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>Observe que a saída do comando especifica a ID de processo utilizada pelo EIGRP: </p> <span class="cmd"><p>Routing Protocol is "<span class="blue">eigrp 1</span>"</p></span> <p>Lembre-se de que a ID de processo deve ser a mesma em todos os roteadores para que EIGRP estabeleça adjacências e compartilhe as informações de roteamento.</p> <p>As distâncias administrativas interna e externa de EIGRP também são exibidas: </p> <span class="cmd"><p>Distance: <span class="blue">internal 90</span> external 170</p></span></content-text>
</page>
</topic>
<topic type="" id="tl0909020600">
<title><content-text>Examinando a tabela de roteamento</content-text></title>
<page type="OneColumn" id="tl0909020601">
<content-media type="InteractiveGraphicHotspots" id="cm6753980030"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020601/cm6753980030.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020601/cm6753980030text.xml"/></content-media>
<content-text><p>Outro modo de verificar se o EIGRP e outras funções do roteador estão adequadamente configurados é examinar as tabelas de roteamento com o comando <span class="cmd"><b>show ip route</b></span>. </p> <p><b>Clique em R1, R2 e R3 na figura.</b></p> <p>Por padrão, o EIGRP sumariza as rotas automaticamente ao limite de rede principal. Nós podemos desabilitar a sumarização automática com o comando <span class="cmd"><b>no auto-summary</b></span>, da mesma maneira que fizemos com o RIPv2. Examinaremos isso mais detalhadamente em uma seção posterior.</p> <p>Observe que as rotas de EIGRP são denotadas na tabela de roteamento com um <b>D</b>, que significa DUAL. </p> <p>Lembre-se, uma vez que o EIGRP é um protocolo de roteamento classless (inclui a máscara de sub-rede na atualização de roteamento), ele suporta VLSM e CIDR. Nós podemos ver na tabela de roteamento para R1 que a rede primária 172.16.0.0/16 é colocada como sub-rede de modo variável com três rotas secundárias utilizando uma máscara /24 ou /30. </p></content-text>
</page>
<page type="OneColumn" id="tl0909020602">
<content-media type="StaticGraphic" id="cm4746051302"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020602/cm4746051302.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020602/cm4746051302text.xml"/></content-media>
<content-text><p><b>Apresentando rota de sumarização Null0</b></p> <p>A figura mostra a tabela de roteamento para R2 com duas entradas destacadas. Observe que o EIGRP incluiu uma rota de sumarização automaticamente para Null0 para as redes classful 192.168.10.0/24 e 172.16.0.0/16. </p> <p>Lembre-se do Capítulo 7, "RIPv2", em que aprendemos que Null0 não é uma interface real. Observe que as rotas de sumarização são originadas de Null0 - isto porque estas rotas são utilizadas com fins de anúncio. As rotas 192.168.10.0/24 e 172.16.0.0/16 não representam, de fato, um caminho para alcançar as redes primárias. Se um pacote não corresponder a uma das rotas secundárias do nível 2, ele será enviado à interface Null0. Em outras palavras, se o pacote corresponder à rota primária do nível 1 - o endereço de rede classful - mas a nenhuma das sub-redes, o pacote será descartado. </p> <p><b>Nota</b>: O EIGRP inclui automaticamente uma rota de sumarização null0 como uma rota secundária sempre que ambas as condições seguintes existirem:</p> <ul><li> Há pelo menos uma sub-rede que foi reconhecida pelo EIGRP.</li> <li> A sumarização automática está habilitada.</li></ul> <p>Nós veremos que a rota de sumarização null0 é removida quando a sumarização automática é desabilitada.</p></content-text>
</page>
<page type="OneColumn" id="tl0909020603">
<content-media type="StaticGraphic" id="cm7071561185"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020603/cm7071561185.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909020000/tl0909020600/tl0909020603/cm7071561185text.xml"/></content-media>
<content-text><p><b>Tabela de roteamento R3</b></p> <p>A tabela de roteamento para R3 mostra que o R1 e o R2 estão sumarizando automaticamente a rede 172.16.0.0/16 e enviando-a como uma única atualização de roteamento. R1 e R2 não estão propagando as sub-redes individuais por causa da sumarização automática. Nós desligaremos a sumarização automática mais tarde. Como o R3 está obtendo duas rotas de custo iguais para 172.16.0.0/16 de R1 e R2, ambas as rotas são incluídas na tabela de roteamento.</p></content-text>
</page>
<page type="OneColumn" id="tl0909020604">
<content-media type="ActivityPKT" id="cm9973251828"><title><content-text></content-text></title><media ref="tl0909000000/tl0909020000/tl0909020600/tl0909020604/cm9973251828/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909020000/tl0909020600/tl0909020604/cm9973251828/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para configurar e verificar o roteamento EIGRP básico.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909030000">
<title><content-text>Cálculo de métrica do EIGRP</content-text></title>
<topic type="" id="tl0909030100">
<title><content-text>Métrica composta de EIGRP e valores de K</content-text></title>
<page type="OneColumn" id="tl0909030101">
<content-media type="StaticGraphic" id="cm4744617533"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030100/tl0909030101/cm4744617533.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030100/tl0909030101/cm4744617533text.xml"/></content-media>
<content-text><p>O EIGRP utiliza os valores seguintes em sua métrica composta para calcular o caminho preferido para uma rede:</p> <ul><li> Largura de banda</li> <li> Atraso</li> <li> Confiabilidade</li> <li> Carga</li></ul> <p><b>Nota: </b>Como mencionado anteriormente neste capítulo, embora o MTU seja incluído nas atualizações da tabela de roteamento, ele não é uma métrica de roteamento utilizada pelo EIGRP ou IGRP. Por padrão, somente a largura de banda e atraso são utilizados para calcular a métrica. A Cisco recomenda que a confiabilidade e a carga não sejam utilizadas a menos que o administrador tenha uma necessidade explícita para fazê-lo. </p> <p><b>A métrica composta</b></p> <p>A figura mostra a fórmula da métrica composta utilizada pelo EIGRP. A fórmula consiste de valores de K1 a K5, conhecidos como pesos de métrica EIGRP. Por padrão, K1 e K3 são definidos como 1 e K2, K4 e K5 são definidos como 0. O resultado é que somente os valores de largura de banda e atraso são utilizados na computação da métrica composta padrão. </p> <p>Os valores de K padrão podem ser alterados com o comando de roteador EIGRP:</p> <span class="cmd"><p>Router(config-router)#<b>metric weights </b><i>tos k1 k2 k3 k4 k5</i></p></span> <p><b>Nota:</b> Modificar os pesos de métrica está além do escopo deste curso, mas sua relevância é importante para estabelecer vizinhos e é discutida em uma seção posterior. O valor <span class="cmd"><b>tipo de serviço</b></span> (TOS, Type of Service) é legado do IGRP e nunca foi implementado. O valor <span class="cmd"><b>tos</b></span> sempre é definido como 0. </p></content-text>
</page>
<page type="OneColumn" id="tl0909030102">
<content-media type="StaticGraphic" id="cm4722514667"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030100/tl0909030102/cm4722514667.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030100/tl0909030102/cm4722514667text.xml"/></content-media>
<content-text><p><b>Verificando os valores de K</b></p> <p>O comando <span class="cmd"><b>show ip protocols</b></span> é utilizado para verificar os valores de K. A saída do comando para R1 é mostrada na figura. Note que os valores de K em R1 são definidos para os valores padrão. Novamente, não é recomendado alterar estes valores para diferente do padrão a menos que o administrador de rede tenha uma razão muito boa para fazê-lo. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909030200">
<title><content-text>Métricas de EIGRP</content-text></title>
<page type="OneColumn" id="tl0909030201">
<content-media type="StaticGraphic" id="cm8842260833"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030201/cm8842260833.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030201/cm8842260833text.xml"/></content-media>
<content-text><p><b>Examinando os valores da métrica</b></p> <p>Agora você conhece os valores padrão de K. Utilizando o comando <span class="cmd"><b>show interface</b></span>, nós podemos examinar os valores <i>reais</i> utilizados para largura de banda, atraso, confiabilidade e carga na computação da métrica de roteamento. </p> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>A saída do comando na figura mostra os valores utilizados na métrica composta para a interface 0/0/0 Serial em R1.</p> <span class="cmd"><p> MTU 1500 bytes, <span class="blue">BW 1544 Kbit, DLY 20000 usec,</span></p></span> <span class="cmd"><p><span class="blue"> reliability 255/255, txload 1/255, rxload 1/255</span></p></span>  <p><b>Largura de banda (Bandwidth)</b></p> <p>A métrica de largura de banda (1544 Kbit) é um valor estático utilizado por alguns protocolos de roteamento como o EIGRP e OSPF para calcular sua métrica de roteamento. A largura de banda é exibida em Kbit (quilobits). A maioria das interfaces seriais utiliza o valor de largura de banda padrão de 1544 Kbit ou 1.544.000 bps (1.544 Mbps). Esta é a largura de banda de uma conexão T1. Porém, algumas interfaces seriais utilizam um valor de largura de banda padrão diferente. Sempre verifique a largura de banda com o comando <span class="cmd"><b>show interface</b></span>.</p> <p>O valor da largura de banda pode ou não refletir na largura de banda física real da interface. <i>Modificar o valor de largura de banda não altera a largura de banda real do link.</i> Se a largura de banda real do link diferir do valor de largura de banda padrão, então você deverá modificar o valor de largura de banda, como veremos em uma seção posterior.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030202">
<content-media type="StaticGraphic" id="cm7941191867"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030202/cm7941191867.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030202/cm7941191867text.xml"/></content-media>
<content-text><p><b>Atraso</b></p> <p>Atraso é uma medida do tempo necessário para um pacote atravessar um caminho. A métrica de atraso (DLY) é um valor estático baseado no tipo de link para o qual a interface é conectada e é expressada em microssegundos. O atraso não é medido dinamicamente. Em outras palavras, o roteador não monitora de fato quanto tempo os pacotes estão levando para alcançar o destino. O valor de atraso, tal como o valor de largura de banda, é um valor padrão que pode ser alterado pelo administrador de rede.</p> <span class="cmd"><p> MTU 1500 bytes, BW 1544 Kbit, <span class="blue">DLY 20000</span> usec,</p></span> <span class="cmd"><p> reliability 255/255, txload 1/255, rxload 1/255</p></span>  <p>A tabela na figura mostra os valores de atraso padrão para várias interfaces. Note que o valor padrão é 20.000 microssegundos para interfaces seriais e 100 microssegundos para interfaces FastEthernet.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030203">
<content-media type="StaticGraphic" id="cm4448111834"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030200/tl0909030203/cm4448111834.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030200/tl0909030203/cm4448111834text.xml"/></content-media>
<content-text><p><b>Confiabilidade</b></p> <p>Confiabilidade (<span class="cmd">confiabilidade</span>) é uma medida da probabilidade de o link falhar ou que diz a freqüência de o link resultar em erro. Ao contrário do atraso, a Confiabilidade é medida dinamicamente com um valor entre 0 e 255, com 1 sendo um link minimamente confiável e 255 cem por cento confiável. A confiabilidade é calculada em uma média ponderada de 5 minutos para evitar o impacto súbito de taxas de erro altas (ou baixas). </p> <p>A confiabilidade é expressada como uma fração de 255 – quanto mais alto o valor, mais confiável o link. Assim, 255/255 seria 100 por cento confiável, considerando que um link de 234/255 seria 91,8 por cento confiável.</p> <p><b>Lembre-se:</b> Por padrão, o EIGRP não utiliza a confiabilidade em seu cálculo de métrica.</p> <p><b>Carga</b></p> <p>A carga (<span class="cmd">carga</span>) reflete a quantidade de tráfego que utiliza o link. Como a confiabilidade, a carga é medida dinamicamente com um valor entre 0 e 255. De maneira semelhante à confiabilidade, a carga é expressada como uma fração de 255. Porém, neste caso, um valor de carga inferior é mais desejável porque indica menos carga no link. Assim, 1/255 seria um link minimamente carregado, 40/255 é um link com 16 por cento de capacidade e 255/255 seria um link que está 100 por cento saturado.</p> <p>A carga é exibida como um valor de carga de saída ou transmissão, (<span class="cmd">txload</span>) e um valor de carga de entrada ou recebimento, (<span class="cmd">rxload</span>). Este valor é calculado em uma média ponderada de 5 minutos para evitar o impacto súbito de utilização de canal alta (ou baixa).</p> <p><b>Lembre-se:</b> por padrão, o EIGRP não utiliza a carga em seu cálculo de métrica.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909030300">
<title><content-text>Utilizando o comando bandwidth</content-text></title>
<page type="OneColumn" id="tl0909030301">
<content-media type="InteractiveGraphicHotspots" id="cm2386363372"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030300/tl0909030301/cm2386363372.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030300/tl0909030301/cm2386363372text.xml"/></content-media>
<content-text><p>Na maioria dos links seriais, a métrica da largura de banda será padronizada como 1544 Kbits. Como o EIGRP e OSPF utilizam a largura de banda em cálculos de métrica padrão, um valor correto para largura de banda é muito importante para a exatidão das informações de roteamento. Mas o que fazer se a largura de banda real do link não corresponder à largura de banda padrão da interface? </p> <p><b>Clique em Configurar largura de banda na figura.</b></p> <p>Utilize o comando de interface <span class="cmd"><b>bandwidth</b></span> para modificar a métrica de largura de banda: </p> <span class="cmd"><p>Router(config-if)#<b>bandwidth </b><i>kilobits</i></p></span>  <p>Utilize o comando de interface <span class="cmd"><b>no bandwidth</b></span> para restaurar o valor padrão.</p> <p>Na figura, o link entre R1 e R2 possui uma largura de banda de 64 kbps e o link entre R2 e R3 possui uma largura de banda de 1024 kbps. A figura mostra as configurações utilizadas em todos os três roteadores para modificar a largura de banda nas interfaces seriais apropriadas.</p> <p><b>Clique em Verificar largura de banda na figura.</b></p> <p>Podemos verificar a alteração utilizando o comando <span class="cmd"><b>show interface</b></span>. É importante modificar a métrica da largura de banda nos dois lados do link para assegurar o roteamento adequado em ambas as direções.</p> <p><b>Nota: </b>Uma concepção errônea comum para alunos novos de rede e do IOS Cisco é presumir que o comando <span class="cmd"><b>bandwidth</b></span> alterará a largura de banda física do link. Como informado na seção anterior, o comando <span class="cmd"><b>bandwidth</b></span> somente modifica a métrica de largura de banda utilizada por protocolos de roteamento como o EIGRP e OSPF. Às vezes, um administrador de rede alterará o valor de largura de banda de modo a ter mais controle sobre a interface de saída escolhida.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909030400">
<title><content-text>Calculando a métrica do EIGRP</content-text></title>
<page type="OneColumn" id="tl0909030401">
<content-media type="StaticGraphic" id="cm5976719281"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030401/cm5976719281.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030400/tl0909030401/cm5976719281text.xml"/></content-media>
<content-text><p>A figura mostra a métrica composta utilizada por EIGRP. Utilizando os valores padrão para K1 e K3, nós podemos simplificar este cálculo para: a largura de banda mais lenta (ou largura de banda mínima) mais a soma cumulativa de todos os atrasos. </p> <p>Em outras palavras, examinando os valores de largura de banda e de atraso para todas as interfaces de saída da rota, nós podemos determinar a métrica de EIGRP. Primeiro, determine o link com a largura de banda mais lenta. Esta largura de banda é utilizada para a parte <b>(10.000.000/largura de banda) * 256</b> da fórmula. Em seguida, determine o valor de atraso para cada interface de saída a caminho do destino. Some os valores de atraso e divida por 10 <b>(soma de atraso/10) </b>e, em seguida, multiplique por 256 <b>(* 256)</b>. Adicione a largura de banda e a soma de valores de atraso para obter a <b>métrica de EIGRP</b>.</p> <p>A saída do comando da tabela de roteamento para R2 mostra que a rota para 192.168.1.0/24 tem uma métrica de EIGRP de 3.014.400. Vejamos exatamente como o EIGRP calculou este valor. </p></content-text>
</page>
<page type="OneColumn" id="tl0909030402">
<content-media type="InteractiveGraphicHotspots" id="cm2875518052"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030402/cm2875518052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909030000/tl0909030400/tl0909030402/cm2875518052text.xml"/></content-media>
<content-text><p><b>Largura de banda</b></p> <p><b>Clique em Cálculo da largura de banda na figura.</b></p> <p>Como o EIGRP utiliza a largura de banda mais lenta em sua métrica de cálculo, nós podemos localizar a largura de banda mais lenta examinando cada interface entre R2 e o destino de rede 192.168.1.0. A interface 0/0/1 Serial em R2 possui uma largura de banda de 1.024 Kbps ou 1.024.000 bps. A interface FastEthernet em R3 possui uma largura de banda de 100.000 Kbps ou 100 Mbps. Portanto, a largura de banda mais lenta é de 1024 Kbps e é utilizada no cálculo da métrica.</p> <p>O EIGRP pega o valor de <content-link target="cg2185396118" type="glossary">largura de banda de referência</content-link> de 10.000.000 e o divide pelo valor de largura de banda em kbps. Isto resultará em valores de largura de banda mais altos que recebem uma métrica mais baixa e valores de largura de banda mais baixos que recebem uma métrica mais alta. </p> <p>O valor de 10.000.000 é dividido por 1024. Se o resultado não for um número inteiro, o valor será arredondado para baixo. Neste caso, 10.000.000 divididos por 1024 é igual a 9765.625 (625 é ignorado antes de multiplicar por 256). A parte de largura de banda da métrica composta é 2.499.840.</p> <p><b>Atraso</b></p> <p>Utilizando as mesmas interfaces de saída, também podemos determinar o valor de atraso.</p> <p><b>Clique em Cálculo do atraso na figura.</b></p> <p>O EIGRP utiliza a soma cumulativa das métricas de atraso de todas as interfaces de saída. A interface Serial 0/0/1 em R2 possui um atraso de 20000 microsegundos. A interface FastEthernet 0/0 em R3 possui um atraso de 100 microsegundos. </p> <p>Cada valor de atraso é dividido por 10 e então somado: 20.000/10 + 100/10 resulta em um valor de 2.010. Este resultado é então multiplicado por 256. A parte de atraso da métrica de composição é 514.560.</p> <p><b>Adicionando a largura de banda e atraso</b></p> <p><b>Clique em Métrica do EIGRP na figura.</b></p> <p>Some simplesmente os dois valores, 2.499.840 + 514.560, para obter a métrica de EIGRP de 3.014.400. Este valor corresponde ao valor mostrado na tabela de roteamento para R2. Este é um resultado da largura de banda mais lenta e da soma dos atrasos.</p></content-text>
</page>
<page type="OneColumn" id="tl0909030403">
<content-media type="ActivityPKT" id="cm5610587491"><title><content-text></content-text></title><media ref="tl0909000000/tl0909030000/tl0909030400/tl0909030403/cm5610587491/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909030000/tl0909030400/tl0909030403/cm5610587491/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade de Packet Tracer para investigar os cálculos de métrica de EIGRP.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909040000">
<title><content-text>DUAL</content-text></title>
<topic type="" id="tl0909040100">
<title><content-text>Conceitos de DUAL</content-text></title>
<page type="OneColumn" id="tl0909040101">
<content-media type="StaticGraphic" id="cm1541901476"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040100/tl0909040101/cm1541901476.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040100/tl0909040101/cm1541901476text.xml"/></content-media>
<content-text><p>Como declarado em uma seção anterior, DUAL (Algoritmo de Atualização por Difusão) é o algoritmo utilizado pelo EIGRP. Esta seção discutirá como o DUAL determina o melhor caminho sem loop e caminhos de backup sem loop.</p> <p>O DUAL utiliza diversos termos que serão discutidos em mais detalhes ao longo desta seção:</p> <ul><li> Sucessor</li> <li> <content-link target="cg3609572796" type="glossary">Distância viável (FD)</content-link></li> <li> <content-link target="cg9630550867" type="glossary">Sucessor viável (FS)</content-link></li> <li> Distância reportada (RD) ou Distância anunciada (AD)</li> <li> Condição viável ou <content-link target="cg2454214713" type="glossary">Condição de viabilidade (FC)</content-link></li></ul> <p>Estes termos e conceitos são fundamentais para o mecanismo que evita loop do DUAL. Vamos examiná-los com mais profundidade.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040200">
<title><content-text>Sucessor e distância viável</content-text></title>
<page type="OneColumn" id="tl0909040201">
<content-media type="StaticGraphic" id="cm6635095626"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040200/tl0909040201/cm6635095626.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040200/tl0909040201/cm6635095626text.xml"/></content-media>
<content-text><p>Um <i><content-link target="cg8388310335" type="glossary">sucessor</content-link></i> é um roteador vizinho que é utilizado para o encaminhamento de pacotes e é a rota de menor custo para a rede de destino. O endereço IP de um sucessor é mostrado em uma entrada da tabela de roteamento depois da palavra <span class="cmd">via</span>. </p> <p><i>Distância viável</i> (FD, Feasible distance) é a métrica calculada mais baixa para alcançar a rede de destino. FD é a métrica listada na entrada da tabela de roteamento como o segundo número dentro dos colchetes. Tal como com outros protocolos de roteamento, isto também é conhecido como a métrica para a rota. </p> <p><b>Clique em Saída do comando do roteador na figura.</b></p> <p>Examinando a tabela de roteamento para R2 na figura, nós podemos ver que o melhor caminho de EIGRP para a rede 192.168.1.0/24 é pelo roteador R3 e que a distância viável (FD) é de 3014400-a mesma métrica que nós calculamos no último tópico: </p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">3014400</span>] via <span class="blue">192.168.10.10</span>, 00:00:31, Serial0/0/1</p></span>  <p>Também são mostrados outros sucessores e distâncias viáveis na figura. Você pode responder às seguintes perguntas?</p> <p><b>Qual é o endereço IP do sucessor para a rede 172.16.1.0/24? </b></p> <p>Resposta: 172.16.3.1, que é R1. </p> <p><b>Qual é a distância viável para 172.16.1.0/24? </b></p> <p>Resposta: 40514560.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040300">
<title><content-text>Sucessores viáveis, condição de viabilidade e distância reportada</content-text></title>
<page type="OneColumn" id="tl0909040301">
<content-media type="InteractiveGraphicHotspots" id="cm3668751889"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040300/tl0909040301/cm3668751889.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040300/tl0909040301/cm3668751889text.xml"/></content-media>
<content-text><p>Uma das razões pela qual o DUAL pode convergir rapidamente depois de uma mudança na topologia é porque ele pode utilizar caminhos de backup para outros roteadores conhecidos como <i>sucessores viáveis</i> sem ter que recomputar o DUAL.</p> <p><b>Clique em Sucessor viável na figura.</b></p> <p>Um<i> sucessor viável</i> (FS, Feasible Successor) é um vizinho que tem um caminho de backup sem loop para a mesma rede que o sucessor porque atende a condição de viabilidade. Em nossa topologia, R2 consideraria R1 como um sucessor viável para a rede 192.168.1.0/24? Para ser um sucessor viável, R1 deve atender a <i>condição de viabilidade </i>(FC). Examinemos o que isso significa.</p> <p><b>Clique em Condição de viabilidade na figura.</b></p> <p>A condição de viabilidade (FC, Feasibility Condition) é atingida quando a <content-link target="cg1726875050" type="glossary">distância reportada (RD</content-link>, Reported Distance) para uma rede é menor que a distância viável do roteador para a mesma rede de destino. A distância reportada (RD) ou distância anunciada é simplesmente uma distância viável do vizinho de EIGRP para a mesma rede de destino. A distância reportada (RD) é a métrica que um roteador relata a um vizinho sobre seu próprio custo para aquela rede. </p> <p>Se R3 é o sucessor, o vizinho R1 pode ser um sucessor viável para esta mesma rede 192.161.0/24? Em outras palavras, se o link entre R2 e R3 falhar, o R1 pode ser utilizado imediatamente como um caminho de backup sem uma nova computação do algoritmo DUAL? R1 somente pode ser um sucessor viável se atingir a condição de viabilidade.</p> <p>Na figura, R1 está relatando a R2 que sua distância de viabilidade para 192.168.1.0/24 é 2172416. Da perspectiva de R2, 2172416 é a distância <i>relatada</i> de R1. Da perspectiva de R1, 2172416 é sua distância <i>viável</i>.</p> <p><b>Clique em Distância reportada na figura.</b></p> <p>R2 examina a distância reportada (RD) de 2172416 para R1. Como a distância reportada (RD) de R1 é menor que a própria distância viável de R2 (FD) de 3014400, R1 atende a condição de viabilidade. R1 é agora um sucessor viável para R2 para a rede 192.168.1.0/24.</p> <p>Por que R1 não é o sucessor se sua distância reportada (RD) é menor que a distância viável (FD) de R2 para 192.168.1.0/24? Porque o custo total para R2, sua distância viável (FD), para alcançar 192.168.1.0/24 é maior por R1 do que é por R3. </p></content-text>
</page>
</topic>
<topic type="" id="tl0909040400">
<title><content-text>Tabela de topologia: Sucessor e sucessor viável</content-text></title>
<page type="OneColumn" id="tl0909040401">
<content-media type="StaticGraphic" id="cm7392579353"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040401/cm7392579353.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040401/cm7392579353text.xml"/></content-media>
<content-text><p>O sucessor, a distância viável e qualquer sucessor viável com suas distâncias relatadas são mantidos por um roteador em sua tabela de topologia de EIGRP ou <content-link target="cg6545469832" type="glossary">banco de dados de topologia</content-link>. Como mostrado na figura, a tabela de topologia pode ser exibida com o uso do comando <span class="cmd"><b>show ip eigrp topology</b></span>. A tabela de topologia lista todos os sucessores e sucessores viáveis que o DUAL calculou para as redes de destino.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040402">
<content-media type="InteractiveGraphicHotspots" id="cm7930108412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040402/cm7930108412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040402/cm7930108412text.xml"/></content-media>
<content-text><p><b>Clique em Reproduzir para exibir a animação.</b></p> <p>Veja abaixo uma descrição detalhada de cada parte da entrada da tabela de topologia para rede de destino 192.168.1.0/24.</p> <p>A primeira linha mostra:</p> <ul><li> <span class="cmd"><b>P</b></span> - Esta rota está em <content-link target="cg6028464901" type="glossary">estado passivo</content-link>. Quando DUAL não está realizando suas computações por difusão para determinar um caminho para uma rede, a rota estará em um modo estável, conhecido como o estado passivo. Se o DUAL estiver recalculando ou procurando um novo caminho, a rota estará em um <content-link target="cg9615848253" type="glossary">estado ativo</content-link>. Todas as rotas na tabela de topologia devem estar no estado passivo para um domínio de roteamento estável. O DUAL exibirá um <b>A</b> se a rota estiver "Presa em Ativo" que é um problema de identificação e solução de problemas do nível de CCNP. </li> <li> <span class="cmd"><b>192.168.1.0/24</b></span> - Esta é a rede de destino que também está localizada na tabela de roteamento.</li> <li> <span class="cmd"><b>1 sucessores</b></span> - Isto mostra o número de sucessores para esta rede. Se houver vários caminhos de custo iguais para esta rede, haverá diversos sucessores.</li> <li> <span class="cmd"><b>FD é 3014400</b></span> - Esta é a distância viável, a métrica de EIGRP para alcançar a rede de destino. </li></ul> <p>A primeira entrada mostra o sucessor:</p> <ul><li> <span class="cmd"><b>via 192.168.10.10</b></span> - Este é o endereço do próximo salto do sucessor, R3. Este endereço é mostrado na tabela de roteamento.</li> <li> <span class="cmd"><b>3014400</b></span> - Esta é a distância viável para 192.168.1.0/24. Esta é a métrica mostrada na tabela de roteamento.</li> <li> <span class="cmd"><b>28160</b></span> - Esta é a distância reportada do sucessor e é o custo de R3 para alcançar esta rede.</li> <li> <span class="cmd"><b>Serial0/0/1</b></span> - Esta é a interface de saída utilizada para alcançar esta rede, também mostrada na tabela de roteamento.</li></ul> <p>A segunda entrada mostra o sucessor viável, R1 (se não houver uma segunda entrada, então não haverá nenhum sucessor viável):</p> <ul><li> <span class="cmd"><b>via 172.16.3.1</b></span> - Este é o endereço do próximo salto do sucessor viável, R1.</li> <li> <span class="cmd"><b>41026560</b></span> - Esta seria a nova distância viável de R2 para 192.168.1.0/24 se R1 se tornar o novo sucessor. </li> <li> <span class="cmd"><b>2172416</b></span> - Esta é a distância reportada do sucessor viável ou a métrica de R1 para alcançar esta rede. Este valor, RD, deve ser menor que o FD atual de 3014400 para atender a condição de viabilidade.</li> <li> <span class="cmd"><b>Serial0/0/0</b></span> - Esta é a interface de saída utilizada para alcançar o sucessor viável, se este roteador se tornar o sucessor.</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0909040403">
<content-media type="StaticGraphic" id="cm7522451666"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040400/tl0909040403/cm7522451666.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040400/tl0909040403/cm7522451666text.xml"/></content-media>
<content-text><p>Para exibir informações detalhadas sobre as métricas de uma entrada específica na tabela de topologia, adicione o parâmetro opcional <span class="cmd">[<i>network</i>]</span> para o comando <span class="cmd"><b>show ip eigrp topology</b></span>, como mostrado na figura:</p> <span class="cmd"><p>R2#<b>show ip eigrp topology 192.168.1.0</b></p></span> <p>Lembre-se de que o EIGRP é um protocolo de roteamento do vetor de distância. Este comando lista todas as métricas de vetor de distância disponíveis para EIGRP embora, por padrão, o EIGRP utilize somente largura de banda e atraso. Ele também exibe outras informações incluídas na atualização de roteamento, mas não incluídas na métrica composta: MTU mínimo e contagem de saltos.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040500">
<title><content-text>Tabela de topologia: Nenhum sucessor viável</content-text></title>
<page type="OneColumn" id="tl0909040501">
<content-media type="InteractiveGraphicHotspots" id="cm2187051213"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040500/tl0909040501/cm2187051213.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040500/tl0909040501/cm2187051213text.xml"/></content-media>
<content-text><p>Para continuar nossa compreensão sobre o DUAL e seu uso de sucessores e sucessores viáveis, olhemos para a tabela de roteamento para R1. </p> <p><b>Clique na Tabela de roteamento R1 na figura.</b></p> <p>A rota para 192.168.1.0/24 mostra que o sucessor é R3 via 192.168.10.6 com uma distância viável de 2172416.</p> <span class="cmd"><p>D 192.168.1.0/24 [90/<span class="blue">2172416</span><span class="blue">2172416</span>] via 192.168.10.6, 00:56:13, Serial0/1</p></span> <p>Agora examinemos a tabela de topologia para ver se há qualquer sucessor viável para esta rota. </p> <p><b>Clique na Tabela de topologia de R1 na figura.</b></p> <p>A tabela de topologia somente mostra o sucessor 192.168.10.6. Não há nenhum sucessor viável. Olhando para a topologia física real ou diagrama de rede, é óbvio que há uma rota de backup para 192.168.1.0/24 por R2. Por que R2 não está listado como um sucessor viável? R2 não é um sucessor viável porque não atende a condição de viabilidade. </p> <p>Embora, olhando para a topologia, seja óbvio que R2 é uma rota de backup, o EIGRP não tem um mapa da topologia de rede. EIGRP é um protocolo de roteamento do vetor de distância e somente sabe sobre informações de rede remota através de seus vizinhos.</p> <p>Portanto, o DUAL não armazena a rota por R2 na tabela de topologia. Porém, nós podemos exibir todos os possíveis links se eles atenderem a condição de viabilidade ou não adicionando a opção <span class="cmd">[all-links]</span> ao comando <span class="cmd">show ip eigrp topology</span>.</p> <p><b>Clique na Tabela de topologia R1 [</b><span class="cmd"><b>all-links</b></span><b>] na figura.</b></p> <p>O comando <span class="cmd"><b>show ip eigrp topology all-links</b></span> mostra todos os possíveis caminhos para uma rede inclusive sucessores, sucessores viáveis e até mesmo essas rotas que não são sucessores viáveis. A distância viável de R1 para 192.168.1.0/24 é de 2172416 pelo sucessor R3. Para que R2 seja considerado um sucessor viável, ele deve atender a condição de viabilidade. A distância viável de R2 para alcançar 192.168.1.0/24 deve ser menor que a distância viável (FD) atual de R1. Como podemos ver na figura, a distância viável de R2 é 3014400, que é mais alta que a distância viável de 2172416 de R1. </p> <p>Embora R2 aparente ser um caminho de backup viável para 192.168.1.0/24, R1 não sabe que seu caminho não é um loop em potencial através de si mesmo. O EIGRP é um protocolo de roteamento do vetor de distância, sem a capacidade para ver um mapa de topologia sem loop completo da rede. O método do DUAL de garantir que um vizinho tenha um caminho sem loop é que a métrica do vizinho deve atender a condição de viabilidade. Assegurando que o RD do vizinho seja menor que seu próprio FD, o roteador pode assumir que este roteador vizinho não faz parte de sua própria rota anunciada, evitando assim um loop em potencial.</p> <p>Isto significa que R2 não pode ser utilizado se o sucessor falhar? Não, R3 pode ser utilizado, mas haverá um atraso mais longo antes de adicioná-lo à tabela de roteamento. Antes de isto poder acontecer, o DUAL precisará fazer mais alguns processamentos, explicados no próximo tópico.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909040600">
<title><content-text>Máquina de estado finito</content-text></title>
<page type="OneColumn" id="tl0909040601">
<content-media type="StaticGraphic" id="cm9163160256"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040601/cm9163160256.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040601/cm9163160256text.xml"/></content-media>
<content-text><p><b>Máquina de estado finito (FSM, Finite State Machine) do DUAL</b></p> <p>O ponto central do EIGRP é o DUAL e seu mecanismo de cálculo de rota EIGRP. O nome real desta tecnologia é Máquina de Estado Finito do DUAL (FSM). Esta máquina de estado finito contém toda a lógica utilizada para calcular e comparar rotas em uma rede EIGRP. A figura mostra uma versão simplificada do FSM do DUAL. </p> <p>Uma máquina de estado finito é uma máquina abstrata, não um dispositivo mecânico com componentes móveis. As FSMs definem um conjunto de possíveis estados pelos quais algo pode passar, quais eventos causam esses estados e quais eventos são resultados desses estados. Os programadores utilizam FSMs para descrever como um dispositivo, programa de computador ou algoritmo de roteamento reagirão a um conjunto de eventos de entrada. Máquinas de estado finito estão além do escopo deste curso; porém, introduzimos o conceito para examinar algumas das saídas do comando da máquina de estado finito do EIGRP utilizando <span class="cmd"><b>debug eigrp fsm</b></span>. Utilizemos o comando para ver o que o DUAL faz quando uma rota é removida da tabela de roteamento.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040602">
<content-media type="InteractiveGraphicHotspots" id="cm1515566624"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040602/cm1515566624.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040602/cm1515566624text.xml"/></content-media>
<content-text><p><b>Clique na Tabela 1 de topologia de R2 na figura.</b></p> <p>Lembre-se de nossas discussões anteriores que R2 está utilizando atualmente o R3 como o sucessor para 192.168.1.0/24. Além disso, R2 lista R1 atualmente como um sucessor viável. Assistamos o que acontece quando simulamos uma falha do link entre R2 e R3.</p> <p><b>Clique em Saída do comando da depuração de R2 na figura.</b></p> <p>Primeiro, nós habilitamos a depuração do DUAL com o comando <span class="cmd"><b>debug eigrp fsm</b></span>. Então, simulamos uma falha de link utilizando o comando <span class="cmd"><b>shutdown</b></span> na interface Serial 0/0/1 em R2. </p> <p>Quando você faz isto em um roteador real ou no Packet Tracer, você verá toda a atividade gerada pelo DUAL quando um link ficar inativo. R2 deve informar a todos os vizinhos EIGRP sobre o link perdido e também deve ter o cuidado de atualizar suas próprias tabelas de roteamento e topologia. A figura neste exemplo somente mostra a saída selecionada de dados da depuração. Em particular, observe que a máquina de estado finito de DUAL procura e encontra um sucessor viável para a rota na tabela de topologia de EIGRP. O sucessor viável, R1, torna-se agora o sucessor e é instalado na tabela de roteamento como o novo melhor caminho para 192.168.1.0/24. </p> <p><b>Clique na Tabela 2 de topologia de R2 na figura.</b></p> <p>A tabela de topologia de R2 mostra agora o R1 como o sucessor e não há novos sucessores viáveis.</p> <p>Se você estiver fazendo o acompanhamento em roteadores ou no Packet Tracer, restaure a topologia original reativando a interface Serial 0/0/1 em R2 com o comando <span class="cmd"><b>no shutdown</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040603">
<content-media type="InteractiveGraphicHotspots" id="cm9283994052"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040603/cm9283994052.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909040000/tl0909040600/tl0909040603/cm9283994052text.xml"/></content-media>
<content-text><p><b>Nenhum sucessor viável</b></p> <p>E se o caminho para o sucessor falhar e não houver sucessores viáveis? Lembre-se: só porque o DUAL não possui um sucessor viável, isso não significa que não há outro caminho para a rede. Significa somente que o DUAL não tem um caminho de backup sem loop garantido para a rede, então ele não foi adicionado à tabela de topologia como um sucessor viável. Se não houver nenhum sucessor viável na tabela de topologia, o DUAL colocará a rede no estado <i>ativo</i>. O DUAL ativamente consultará seus vizinhos em busca de um novo sucessor. </p> <p><b>Clique na Tabela 1 de topologia de R1 na figura.</b></p> <p>R1 está utilizando R3 atualmente como o sucessor para 192.168.1.0/24. Porém, R1 <i>não</i> tem o R2 listado como um sucessor viável porque R2 não atende a condição de viabilidade. Assistamos o que acontece quando simulamos uma falha do link entre R1 e R3.</p> <p><b>Clique em Saída do comando da depuração de R1 na figura.</b></p> <p>Primeiro, nós habilitamos a depuração do DUAL com o comando <span class="cmd"><b>debug eigrp fsm</b></span>. Então, simulamos uma falha de link utilizando o comando <span class="cmd"><b>shutdown</b></span> na interface Serial  0/0/1 em R1. </p> <p>A saída do comando da depuração selecionada mostra a rede 192.168.1.0/24 colocada no estado <i>ativo</i> e as consultas de EIGRP são enviadas a outros vizinhos. R2 responde com um caminho para esta rede, tornando-se então o novo sucessor e é instalado na tabela de roteamento.</p> <p>Quando o sucessor não estiver mais disponível e não houver nenhum sucessor viável, o DUAL colocará a rota em estado ativo. O DUAL enviará consultas de EIGRP pedindo a outros roteadores um caminho para esta rede. Outros roteadores devolverão respostas de EIGRP, informando o remetente da consulta de EIGRP se eles têm ou não um caminho para rede solicitada. Se nenhuma das respostas de EIGRP tiver um caminho para esta rede, o remetente da consulta não terá uma rota para esta rede. </p> <p>Se o remetente das consultas do EIGRP receber respostas de EIGRP que incluem um caminho para a rede solicitada, o caminho preferido será adicionado como o novo sucessor e adicionado à tabela de roteamento. Este processo levará mais tempo do que se o DUAL tivesse um sucessor viável em sua tabela de topologia e se fosse capaz de adicionar rapidamente a nova rota à tabela de roteamento.</p> <p><b>Nota</b>: O FSM DUAL e o processo de consultas e respostas estão além do escopo deste curso.</p> <p><b>Clique na Tabela 2 de topologia de R1 na figura.</b></p> <p>A tabela de topologia para R1 mostra agora o R2 como o sucessor e não há novos sucessores viáveis.</p> <p>Se você estiver fazendo o acompanhamento em roteadores ou no Packet Tracer, restaure a topologia original reativando a interface Serial 0/0/1 em R1 com o comando <span class="cmd"><b>no shutdown</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl0909040604">
<content-media type="ActivityPKT" id="cm8828838954"><title><content-text></content-text></title><media ref="tl0909000000/tl0909040000/tl0909040600/tl0909040604/cm8828838954/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909040000/tl0909040600/tl0909040604/cm8828838954/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade de Packet Tracer para investigar sucessores e sucessores viáveis e também para ver o FSM DUAL remover e instalar rotas.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909050000">
<title><content-text>Mais configurações EIGRP</content-text></title>
<topic type="" id="tl0909050100">
<title><content-text>As rotas de sumarização Null0</content-text></title>
<page type="OneColumn" id="tl0909050101">
<content-media type="StaticGraphic" id="cm6537092320"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050100/tl0909050101/cm6537092320.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050100/tl0909050101/cm6537092320text.xml"/></content-media>
<content-text><p>Analisar uma tabela de roteamento contendo as rotas EIGRP pode ser confuso devido à inclusão automática do EIGRP das <content-link target="cg2370190715" type="glossary">rotas de sumarização Null0</content-link>. Na figura, a tabela de roteamento de R1 contém duas rotas que possuem uma interface de saída de Null0. Lembre-se do Capítulo 7, "RIPv2", quando vimos que a interface Null0 é simplesmente uma rota para lugar algum, comumente conhecida como "cesta de bits". Então, por padrão, o EIGRP utiliza a interface Null0 para descartar os pacotes que correspondem à rota primária, mas não correspondem a nenhuma das rotas secundárias.</p> <p>Você pode pensar que, se nós configurarmos o comportamento de roteamento classless com o comando <span class="cmd"><b>ip classless</b></span>, o EIGRP não descartará aquele pacote, mas continuaria procurando uma rota padrão ou de super-rede. Entretanto, a rota de sumarização Null0 do EIGRP é uma rota secundária que corresponderá aos pacotes possíveis da rota primária que não correspondem a outra rota secundária. Até mesmo com comportamento de roteamento classless, <span class="cmd"><b>ip classless</b></span>, onde você esperaria que o processo de procura de rota procurasse super-redes e rotas padrão, o EIGRP utilizará a rota de sumarização Null0 e descartará o pacote porque esta rota corresponderá aos pacotes da rota primária que não possuam uma rota secundária.</p> <p>Seja qual for o uso do comportamento de roteamento classful ou classless, a sumarização de null0 será utilizada e, portanto, negando o uso de qualquer rota de super-rede ou padrão. </p> <p>Na figura, R1 descartará os pacotes que correspondem à rede classful 172.16.0.0/16, mas que não correspondem a uma das rotas secundárias 172.16.1.0/24, 172.16.2.0/24 ou 172.16.3.0/24. Por exemplo, um pacote para 172.16.4.10 seria descartado. Mesmo que uma rota padrão fosse configurada, R1 ainda descartaria o pacote porque ele corresponde à rota de sumarização Null0 para 172.16.0.0/16.</p> <span class="cmd"><p>D 172.16.0.0/16 is a summary, 00:46:10, Null0</p></span> <p><b>Nota</b>: O EIGRP inclui automaticamente uma rota de sumarização null0 como uma rota secundária sempre que ambas as condições seguintes existirem:</p> <ul><li> Há pelo menos uma sub-rede que foi reconhecida pelo EIGRP.</li> <li> A sumarização automática está habilitada.</li></ul> <p>Como o RIP, o EIGRP sumariza automaticamente aos limites de rede principal. Você já pode ter notado na saída do comando de <span class="cmd"><b>show run</b></span> que o EIGRP, por padrão, utiliza o comando <span class="cmd"><b>auto-summary</b></span>. No próximo tópico, você verá que desabilitar a sumarização automática removerá a rota de sumarização Null0 e permitirá que o EIGRP procure uma rota de super-rede ou padrão quando uma rota secundária de EIGRP não corresponder a um pacote de destino.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050200">
<title><content-text>Desabilitando a sumarização automática</content-text></title>
<page type="OneColumn" id="tl0909050201">
<content-media type="InteractiveGraphicHotspots" id="cm6362989412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050200/tl0909050201/cm6362989412.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050200/tl0909050201/cm6362989412text.xml"/></content-media>
<content-text><p>Como o RIP, o EIGRP sumariza automaticamente a limites de rede principal utilizando o comando padrão <span class="cmd"><b>auto-summary</b></span>. Nós podemos ver o resultado disto observando a tabela de roteamento para R3. </p> <p><b>Clique na Tabela de roteamento de R3 na figura.</b></p> <p>Observe que R3 não está recebendo rotas individuais para as sub-redes 172.16.1.0/24, 172.16.2.0/24 e 172.16.3.0/24. R1 e R2 sumarizaram automaticamente essas sub-redes ao limite da rede classful 172.16.0.0/16 ao enviar pacotes de atualização de EIGRP para R3. O resultado é que R3 tem uma rota para 172.16.0.0/16 por R1. R1 é o sucessor devido à diferença da largura de banda.</p> <span class="cmd"><p>D 172.16.0.0/16 [90/2172416] via 192.168.10.5, 01:08:30, Serial0/0/0</p></span> <p>Você pode ver rapidamente que esta rota não é a ideal. R3 roteará todos os pacotes destinados para 172.16.2.0 por R1. R3 não sabe que R1 terá que rotear estes pacotes por um link muito lento para R2. O único modo pelo qual R3 pode obter informações sobre esta largura de banda lenta é se R1 e R2 enviarem rotas individuais para cada uma das sub-redes de 172.16.0.0/16. Em outras palavras, R1 e R2 devem interromper a sumarização automática de 172.16.0.0/16.</p> <p><b>Clique em </b><span class="cmd"><b>no auto-summary</b></span><b> na figura.</b></p> <p>Como em RIPv2, a sumarização automática pode ser desabilitada com o comando <span class="cmd"><b>no auto-summary</b></span>. O comando de configuração do roteador <span class="cmd"><b>eigrp log-neighbor-changes</b></span> está ativado, por padrão, em algumas implementações de IOS. Caso ativado, você verá uma saída do comando semelhante àquela mostrada para R1. O DUAL torna inativas todas as adjacências de vizinho e, em seguida, as restabelece de forma que o efeito do comando <span class="cmd"><b>no auto-summary</b></span> possa ser percebido completamente. Todos os vizinhos de EIGRP enviarão imediatamente um novo ciclo de atualizações que não serão sumarizadas automaticamente.</p> <p><b>Clique em R1, R2 e R3 na figura.</b></p> <p>Podemos ver nas tabelas de roteamento para todos os três roteadores que o EIGRP está agora propagando sub-redes individuais. Observe que o EIGRP já não inclui a rota de sumarização Null0, porque a sumarização automática foi desabilitada com <span class="cmd"><b>no auto-summary</b></span>. Contanto que o comportamento padrão de roteamento classless (<span class="cmd"><b>ip classless</b></span>) esteja em vigor, as rotas de super-rede e padrão serão utilizadas quando não houver uma correspondência com uma rota de sub-rede. </p></content-text>
</page>
<page type="OneColumn" id="tl0909050202">
<content-media type="InteractiveGraphicHotspots" id="cm3776931818"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050200/tl0909050202/cm3776931818.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050200/tl0909050202/cm3776931818text.xml"/></content-media>
<content-text><p>Como as rotas não são mais sumarizadas automaticamente a limites de rede principal, as tabelas de roteamento e topologia do EIGRP também mudam.</p> <p><b>Clique em R1, R2 e R3 na figura.</b></p> <p>Sem sumarização automática, a tabela de roteamento de R3 inclui agora as três sub-redes, 172.16.1.0/24, 172.16.2.0/24 e 172.16.3.0/24. Por que a tabela de roteamento de R3 possui agora dois caminhos de custos iguais para 172.16.3.0/24? O melhor caminho não deveria ser somente por R1 com o link de 1544 Mbps? </p> <p>Lembre-se de que EIGRP somente utiliza o link com a largura de banda mais lenta ao calcular a métrica de composição. O link mais lento é o link do 64 Kbps que contém a rede 172.16.3.0/30. Neste exemplo, o link de 1544 Mbps e o link de 1024 Kbps são irrelevantes para o cálculo da métrica de largura de banda. Como ambos os caminhos possuem o mesmo número e tipos de interfaces de saída, os valores de atraso acabam sendo os mesmos. Como resultado, a métrica do EIGRP para ambos os caminhos é a mesma, embora o caminho por R1 seja, de fato, o caminho mais "rápido."</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050300">
<title><content-text>Sumarização manual</content-text></title>
<page type="OneColumn" id="tl0909050301">
<content-media type="InteractiveGraphicHotspots" id="cm2211769071"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050300/tl0909050301/cm2211769071.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050300/tl0909050301/cm2211769071text.xml"/></content-media>
<content-text><p>O EIGRP pode ser configurado para sumarizar rotas, estando habilitada ou não a sumarização automática (<span class="cmd"><b>auto-summary</b></span>). Como o EIGRP é um protocolo de roteamento classless e inclui a máscara de sub-rede nas atualizações de roteamento, a sumarização manual pode incluir rotas de super-rede. Lembre-se: uma super-rede é uma agregação de diversos endereços de rede classful principal.</p> <p><b>Clique em Novas redes locais de R3 na figura.</b></p> <p>Suponha que nós acrescentamos duas redes a mais ao roteador R3 utilizando interfaces de loopback: 192.168.2.0/24 e 192.168.3.0/24. Nós também configuramos redes no processo de roteamento do EIGRP de R3 com comandos <span class="cmd"><b>network</b></span> de forma que R3 propagará estas redes a outros roteadores.</p> <p><b>Clique nas Tabelas de roteamento 1 na figura.</b></p> <p>Para verificar se R3 enviou os pacotes de atualização do EIGRP para R1 e R2, nós verificamos as tabelas de roteamento. Na figura, somente as rotas relevantes são mostradas. As tabelas de roteamento de R1 e R2 mostram estas redes adicionais em suas tabelas de roteamento: 192.168.2.0/24 e 192.168.3.0/24. Em vez de enviar três redes separadas, R3 pode sumarizar as redes 192.168.1.0/24, 192.168.2.0/24 e 192.168.3.0/24 como uma única rota.</p> <p><b>Clique em Rota de sumarização de R3 na figura.</b></p> <p><b>Determinando a rota de sumarização de EIGRP</b></p> <p>Primeiro, determinemos qual seria a sumarização destas três redes utilizando o mesmo método que utilizamos para determinar as rotas estáticas sumarizadas: </p> <p>1. Escreva as redes que você deseja sumarizar em binário. </p> <p>2. Para localizar a máscara de sub-rede para sumarização, inicie com o bit mais à esquerda. </p> <p>3. Siga seu caminho para a direita, localizando todos os bits que correspondem consecutivamente. </p> <p>4. Quando você localizar uma coluna de bits que não correspondem, pare. Você está no limite da sumarização. </p> <p>5. Agora, conte o número de bits mais à esquerda, que, em nosso exemplo, é 22. Este número se torna sua máscara de sub-rede para a rota de sumarização: /22 ou 255.255.252.0</p> <p>6. Para localizar o endereço de rede para sumarização, copie os 22 bits correspondentes e adicione todos os 0 bits ao final para formar 32 bits.</p> <p>O resultado é o endereço e máscara de rede de sumarização para 192.168.0.0/22.</p> <p><b>Configurar a Sumarização Manual de EIGRP</b></p> <p>Para estabelecer a sumarização manual de EIGRP em todas as interfaces que enviam pacotes de EIGRP, utilize o seguinte comando de interface:</p> <span class="cmd"><p>Router(config-if)<b>#ip summary-address eigrp </b><i>as-number network-address subnet-mask</i></p></span> <p>Como R3 possui dois vizinhos EIGRP, a sumarização manual do EIGRP é configurada na Serial 0/0/0 e Serial 0/0/1.</p> <p><b>Clique nas Tabelas de roteamento 2 na figura.</b></p> <p>As tabelas de roteamento de R1 e R2 agora já não incluem as redes individuais 192.168.1.0/24, 192.168.2.0/24 e 192.168.3.0/24. Em vez disso, elas mostram uma única rota de sumarização de 192.168.0.0/22. Como você aprendeu no Capítulo 2, "Roteamento estático", as rotas de sumarização reduzem o número de rotas totais nas tabelas de roteamento, o que torna o processo de procura na tabela de roteamento mais eficiente. As rotas de sumarização também exigem uma menor utilização de largura de banda para as atualizações de roteamento porque uma única rota pode ser enviada em vez de várias rotas individuais.</p></content-text>
</page>
</topic>
<topic type="" id="tl0909050400">
<title><content-text>Rota padrão de EIGRP</content-text></title>
<page type="OneColumn" id="tl0909050401">
<content-media type="InteractiveGraphicHotspots" id="cm1560663639"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050400/tl0909050401/cm1560663639.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050400/tl0909050401/cm1560663639text.xml"/></content-media>
<content-text><p><b>Clique em Configuração padrão estática de R2 na figura.</b></p> <p>Utilizar uma rota estática para 0.0.0.0/0 como uma rota padrão não depende do protocolo de roteamento. A rota padrão estática "quatro zero de octetos (quad zero)" pode ser utilizada com qualquer protocolo de roteamento suportado. A rota padrão estática é normalmente configurada no roteador que possui uma conexão com uma rede fora do domínio de roteamento EIGRP, por exemplo, para um ISP. </p> <p>O EIGRP requer o uso do comando <span class="cmd"><b>redistribute static</b></span> para incluir esta rota padrão estática com suas atualizações de roteamento de EIGRP. O comando <span class="cmd"><b>redistribute static</b></span> diz ao EIGRP para incluir esta rota estática em suas atualizações de EIGRP para outros roteadores. A figura mostra a configuração da rota padrão estática e o comando <span class="cmd"><b>redistribute static</b></span> no roteador R2. </p> <p><b>Nota:</b> A rota padrão estática está utilizando a interface de saída de <b>Loopback1</b>. Isto porque o roteador ISP não existe fisicamente em nossa topologia. Utilizando uma interface de loopback, podemos simular uma conexão com outro roteador. </p> <p><b>Clique em R1, R2 e R3 na figura.</b></p> <p>As tabelas de roteamento mostram agora uma rota padrão estática e um <span class="cmd">gateway de último recurso</span> é agora definido. </p> <p>Nas tabelas de roteamento para R1 e R3, observe a origem de roteamento e a distância administrativa para a nova rota padrão estática. A entrada para a rota padrão estática em R1 é a seguinte:</p> <span class="cmd"><p><span class="blue">D*EX</span> 0.0.0.0/0 [<span class="blue">170</span>/3651840] via 192.168.10.6, 00:01:08, Serial0/1</p></span> <ul><li> <span class="cmd"><b>D</b></span> - Esta rota estática foi obtida a partir de uma atualização de roteamento do EIGRP.</li> <li> <span class="cmd"><b>*</b></span> - A rota é uma candidata para uma rota padrão.</li> <li> <span class="cmd"><b>EX</b></span> - A rota é uma rota de EIGRP externa, neste caso uma rota estática fora do domínio de roteamento do EIGRP.</li> <li> <span class="cmd"><b>170</b></span> - Esta é a distância administrativa de uma rota externa ao EIGRP.</li></ul> <p>Rotas padrão fornecem um caminho padrão para fora do domínio de roteamento e, assim como as rotas de sumarização, minimizam o número de entradas na tabela de roteamento.</p> <p><b>Nota</b>: Há outro método para propagar uma rota padrão no EIGRP, utilizando o comando <span class="cmd"><b>ip default-network</b></span>. Mais informações sobre este comando podem ser encontradas em:</p> <p><content-link target="http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml" type="external">http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0909050500">
<title><content-text>Ajustando o EIGRP</content-text></title>
<page type="OneColumn" id="tl0909050501">
<content-media type="StaticGraphic" id="cm1126029541"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050500/tl0909050501/cm1126029541.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050500/tl0909050501/cm1126029541text.xml"/></content-media>
<content-text><p>Os últimos dois tópicos deste capítulo discutem dois modos fundamentais de ajustar as operações do EIGRP. Primeiro, nós discutiremos a utilização da largura de banda do EIGRP. Em seguida, nós discutiremos como alterar o tempo padrão do hello e do tempo de espera.</p> <p><b>Utilização da largura de banda do EIGRP</b></p> <p>Por padrão, o EIGRP utilizará somente até 50 por cento da largura de banda de uma interface para informações de EIGRP. Isto impede que o processo do EIGRP utilize um link em excesso e que não libere largura de banda suficiente para o roteamento de tráfego normal. O comando <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> pode ser utilizado para configurar o percentual de largura de banda que pode ser utilizado por EIGRP em uma interface. </p> <span class="cmd"><p>Router(config-if)#<b>ip bandwidth-percent eigrp</b><i> as-number percent</i></p></span> <p>Na figura, R1 e R2 compartilham um link muito lento de 64kbps. A configuração para limitar quanta largura de banda o EIGRP utiliza é mostrada, juntamente com o comando de largura de banda (bandwidth). O comando <span class="cmd"><b>ip bandwidth-percent eigrp</b></span> utiliza a quantidade de largura de banda configurada (ou largura de banda padrão) ao calcular a porcentagem que o EIGRP pode utilizar. Em nosso exemplo, nós estamos limitando o EIGRP para não mais que 50 por cento da largura de banda do link. Portanto, o EIGRP nunca utilizará mais do que os 32kbps da largura de banda do link para o tráfego de pacote do EIGRP.</p></content-text>
</page>
<page type="OneColumn" id="tl0909050502">
<content-media type="StaticGraphic" id="cm2307703188"><title><content-text></content-text></title><media ref="tl0909000000/tl0909050000/tl0909050500/tl0909050502/cm2307703188.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909050000/tl0909050500/tl0909050502/cm2307703188text.xml"/></content-media>
<content-text><p><b>Configurando os Intervalos Hello e Tempos de espera</b></p> <p>Os intervalos Hello e os tempos de espera são configuráveis por interface e não precisam corresponder com outros roteadores de EIGRP para estabelecer adjacências. O comando para configurar um intervalo hello diferente é:</p> <span class="cmd"><p>Router(config-if)#<b>ip hello-interval eigrp </b><i>as-number seconds</i></p></span> <p>Se você alterar o intervalo hello, verifique se você também alterou o tempo de espera para um valor igual ou maior que o intervalo hello. Caso contrário, a adjacência de vizinho ficará inativa depois que o tempo de espera expirar e antes do próximo intervalo hello. O comando para configurar um tempo de espera diferente é:</p> <span class="cmd"><p>Router(config-if)#<b>ip hold-time eigrp </b><i>as-number seconds</i></p></span> <p>O valor em <span class="cmd"><i>segundos</i></span> para os ambos os intervalos hello e de tempo de espera podem variar de 1 até 65.535. Este intervalo significa que você pode definir o intervalo hello para um valor de até 18 horas, que pode ser apropriado para um link de dial-up muito caro. Porém, na figura nós configuramos R1 e R2 para utilizar um intervalo hello de 60 segundos e um tempo de espera de 180 segundos. A forma <span class="cmd"><b>no</b></span> pode ser utilizada nestes comandos para restaurar os valores padrão.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0909060000">
<title><content-text>Laboratórios de configuração EIGRP</content-text></title>
<topic type="" id="tl0909060100">
<title><content-text>Laboratório de configuração EIGRP básico</content-text></title>
<page type="OneColumn" id="tl0909060101">
<content-media type="ActivityLab" id="cm1186097403"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060100/tl0909060101/cm1186097403/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060100/tl0909060101/cm1186097403/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você aprenderá a configurar o protocolo de roteamento EIGRP. Um <content-link target="cg8751073854" type="glossary">endereço de loopback</content-link> será utilizado no roteador R2 para simular uma conexão com um ISP, onde todo o tráfego que não for destinado para a rede local será enviado. Alguns segmentos da rede foram colocados em sub-rede utilizando VLSM. EIGRP é um protocolo de roteamento classless que pode ser usado para fornecer informações de máscara de sub-rede nas atualizações de roteamento. Isto permitirá que as informações da sub-rede VLSM sejam propagadas por toda a rede.</p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060102">
<content-media type="ActivityPKA" id="cm1822274063"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060100/tl0909060102/cm1822274063/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060100/tl0909060102/cm1822274063/icontext.xml"/></content-media>
<content-text><p>Utilize esta Atividade do Packet Tracer para repetir uma simulação de Laboratório 9.6.1. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0909060200">
<title><content-text>Laboratório de configuração EIGRP avançado</content-text></title>
<page type="OneColumn" id="tl0909060201">
<content-media type="ActivityLab" id="cm1183716590"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060200/tl0909060201/cm1183716590/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060200/tl0909060201/cm1183716590/icontext.xml"/></content-media>
<content-text><p>Nesta atividade de laboratório, você receberá um endereço de rede que deve ser colocado em sub-rede utilizando o VLSM para concluir o endereçamento da rede. Uma combinação entre roteamentos EIGRP e estático será obrigatória para que os hosts em redes que não estejam diretamente conectadas possam se comunicar. O EIGRP deve ser configurado para que todo o tráfego IP pegue o caminho mais curto até o endereço de destino.</p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060202">
<content-media type="ActivityPKA" id="cm3328204853"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060200/tl0909060202/cm3328204853/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060200/tl0909060202/cm3328204853/icontext.xml"/></content-media>
<content-text><p>Utilize esta Atividade do Packet Tracer para repetir uma simulação de Laboratório 9.6.2. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0909060300">
<title><content-text>Laboratório de configuração de identificação e solução de problemas de EIGRP</content-text></title>
<page type="OneColumn" id="tl0909060301">
<content-media type="ActivityLab" id="cm9423696379"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060300/tl0909060301/cm9423696379/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060300/tl0909060301/cm9423696379/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você começará carregando scripts de configuração corrompidos em todos os roteadores. Esses scripts contêm erros que impedirão a comunicação fim-a-fim através da rede. Você precisará identificar e solucionar os problemas de cada roteador para determinar os erros de configuração e, em seguida, utilizar os comandos apropriados para corrigir as configurações. Quando todos os erros de configuração forem corrigidos, todos os hosts na rede devem poder se comunicar uns com os outros. </p><p><b>Clique no ícone de laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909060302">
<content-media type="ActivityPKA" id="cm4832565156"><title><content-text></content-text></title><media ref="tl0909000000/tl0909060000/tl0909060300/tl0909060302/cm4832565156/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909060000/tl0909060300/tl0909060302/cm4832565156/icontext.xml"/></content-media>
<content-text><p>Utilize esta Atividade do Packet Tracer para repetir uma simulação de Laboratório 9.6.3. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0909070000">
<title><content-text>Resumo do capítulo</content-text></title>
<topic type="" id="tl0909070100">
<title><content-text>Resumo e revisão</content-text></title>
<page type="OneColumn" id="tl0909070101">
<content-media type="ChapterSummary" id="cm7193811547"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070101/cm7193811547.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070101/cm7193811547text.xml"/></content-media>
<content-text><p><b>Resumo</b></p> <p>O Protocolo de roteamento de gateway interior (EIGRP, Enhanced Interior Gateway Routing Protocol) é um protocolo de roteamento do vetor de distância <i>classless</i> que foi lançado em 1992 pela Cisco Systems. O EIGRP é protocolo de roteamento proprietário da Cisco e um aprimoramento de outro protocolo proprietário da Cisco, o Protocolo de roteamento de gateway interior (IGRP, Interior Gateway Routing Protocol). O IGRP é um protocolo de roteamento do vetor de distância <i>classful</i> que já não é mais suportado pela Cisco. O EIGRP utiliza o código-fonte de "D" para DUAL na tabela de roteamento. O EIGRP possui uma distância administrativa padrão de 90 para rotas internas e 170 para rotas importadas de uma fonte externa, como as rotas padrão.</p> <p>O EIGRP utilizou PDMs (Módulos dependentes do protocolo) conferindo-lhe a capacidade de suportar protocolos de camada 3 diferentes incluindo IP, IPX e AppleTalk. O EIGRP utiliza o Protocolo de transporte confiável( RTP, Reliable Transport Protocol) como o protocolo da camada de transporte para a entrega de pacotes EIGRP. O EIGRP utiliza entrega confiável para atualizações, consultas e respostas do EIGRP e utiliza entrega não confiável para hellos e confirmações do EIGRP. RTP confiável significa que uma confirmação do EIGRP deve ser devolvida.</p> <p>Antes de as atualizações de EIGRP serem enviadas, um roteador deverá detectar primeiro seus vizinhos. Isto é feito com pacotes hello do EIGRP. Na maioria das redes, o EIGRP envia pacotes Hello a cada 5 segundos. Em redes ponto-multiponto (NBMA, Nonbroadcast Multiaccess Networks) como X.25, Frame Relay e interface ATM com links de acesso de T1 (1.544 Mbps) ou mais lentas, os Hellos são enviados a cada 60 segundos. O tempo de espera é de três vezes o hello ou 15 segundos na maioria das redes e de 180 segundos em redes NBMA de baixa velocidade. </p> <p>Os valores de hello e do tempo de espera (hold-down) não precisam corresponder para que dois roteadores tornem-se vizinhos. O comando <span class="cmd"><b>show ip eigrp neighbors</b></span> é utilizado para exibir a tabela de vizinho e verificar se o EIGRP estabeleceu uma adjacência com seus vizinhos.</p> <p>O EIGRP não envia atualizações periódicas como faz o RIP. O EIGRP envia atualizações parciais ou associadas que incluem somente as alterações de rota e somente para os roteadores que forem afetados pela alteração. A métrica composta do EIGRP utiliza a largura de banda, atraso, confiabilidade e carga para determinar o melhor caminho. Por padrão, somente a largura de banda e o atraso são utilizados. O cálculo padrão é a largura de banda mais lenta mais a soma dos atrasos das interfaces de saída do roteador para a rede de destino.</p> <p>Ao centro do EIGRP está o Algoritmo de atualização por difusão (DUAL, Diffusing Update Algorithm). A máquina de estado finito do DUAL é utilizada para determinar o melhor caminho e caminhos de backup em potencial para cada rede de destino. O sucessor é um roteador vizinho que é utilizado para encaminhar pacotes utilizando a rota de menor custo para a rede de destino. Distância viável (FD, Feasible Distance) é a métrica mais baixa calculada para alcançar a rede de destino através do sucessor. Um sucessor viável (FS, Feasible Successor) é um vizinho que tem um caminho de backup sem loop para a mesma rede que o sucessor e que também atende a condição de viabilidade. A condição de viabilidade (FC, Feasibility Condition) é atingida quando a distância reportada (RD, Reported Distance) de um vizinho para uma rede for menor que a distância viável do roteador para a mesma rede de destino. A distância reportada é simplesmente uma distância viável do vizinho EIGRP para a rede de destino.</p> <p>O EIGRP é configurado com o comando <span class="cmd"><b>router eigrp </b><i>autonomous-system</i></span>. O valor do <span class="cmd"><i> autonomous-system</i></span> é, de fato, uma ID de processo e deve ser o mesmo em todos os roteadores no domínio de roteamento de EIGRP. O comando <span class="cmd"><b>network</b></span> é semelhante ao utilizado com o RIP. A rede é o endereço de rede classful das interfaces diretamente conectadas no roteador. Uma máscara curinga é um parâmetro opcional que pode ser utilizado para incluir somente interfaces específicas.</p> <p>Existem diversos modos de propagar uma rota padrão estática com o EIGRP. O comando <span class="cmd"><b>redistribute static</b></span> no modo de roteador do EIGRP é um método comum.</p></content-text>
</page>
<page type="FullScreen" id="tl0909070102">
<content-media type="ChapterSummary" id="cm4745806305"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070102/cm4745806305.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070102/cm4745806305text.xml"/></content-media>
<content-text><p>Verifique sua compreensão</p></content-text>
</page>
<page type="OneColumn" id="tl0909070103">
<content-media type="ActivityPKA" id="cm1523561835"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070103/cm1523561835/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0909000000/tl0909070000/tl0909070100/tl0909070103/cm1523561835/icontext.xml"/></content-media>
<content-text><p>A Atividade Avançada de Integração das Habilidades no Packet Tracer integra todo o conhecimento e as habilidades que você adquiriu nos capítulos anteriores deste curso e nos cursos anteriores. As habilidades relacionadas à discussão sobre EIGRP deste capítulo também estão incluídas. </p> <p>Nesta atividade, você cria uma rede do zero. Começando com um espaço de endereçamento e requisitos de rede, você deve implementar um projeto de rede que atenda às especificações. Em seguida, você implementa uma configuração de roteamento EIGRP efetiva com roteamento padrão integrado. Instruções detalhadas são fornecidas na atividade. </p> <p><content-link target="E2_PTAct_9_7_1_Directions.pdf" type="internalfile">Instruções de integração das habilidades no Packet Tracer (PDF)</content-link></p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0909070104">
<content-media type="StaticGraphic" id="cm8973111891"><title><content-text></content-text></title><media ref="tl0909000000/tl0909070000/tl0909070100/tl0909070104/cm8973111891.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0909000000/tl0909070000/tl0909070100/tl0909070104/cm8973111891text.xml"/></content-media>
<content-text><p><b>Para saber mais</b></p> <p> </p> <p><b>Routing TCP/IP, Volume I</b></p> <p>Existem diversas fontes boas para obter mais informações sobre o DUAL. <i>Routing TCP/IP</i>, Volume I de Jeff Doyle e Jennifer Carroll, inclui uma seção excelente sobre o Algoritmo de atualização por difusão, incluindo dois exemplos de computação por difusão.</p> <p><b>J.J. Garcia-Luna-Aceves</b></p> <p>O DUAL foi proposto pela primeira vez por E.W. Dijkstra e C.S. Scholten, com o trabalho mais bem conhecido feito por J.J. Garcia-Luna-Aceves. J.J. Garcia-Luna-Aceves é o Presidente de Jack Baskin de Engenharia da Computação na Universidade da Califórnia, Santa Cruz (UCSC), e é o Cientista Responsável no Centro de Pesquisa de Palo Alto (PARC). Muitos dos artigos publicados de J.J. Garcia-Luna-Aceves, inclusive seu trabalho feito sobre o DUAL, "Roteamento sem loop utilizando computações por difusão", Transações IEEE/ACM sobre Rede, Vol. 1, No. 1, fevereiro de 1993, podem ser encontrados em: <content-link target="http://www.soe.ucsc.edu/research/ccrg/publications.html" type="external">www.soe.ucsc.edu/research/ccrg/publications.html</content-link>.</p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0909080000">
<title><content-text>Teste do capítulo</content-text></title>
<topic type="" id="tl0909080100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl0909080101">
<content-media type="ChapterQuiz" id="cm5700175412"><title><content-text></content-text></title><media ref="tl0909000000/tl0909080000/tl0909080100/tl0909080101/cm5700175412/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl0909000000/tl0909080000/tl0909080100/tl0909080101/cm5700175412/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>

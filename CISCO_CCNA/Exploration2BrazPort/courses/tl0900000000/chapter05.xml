<chapter type="" id="tl0905000000">
<title><content-text>RIPv1</content-text></title>
<section type="ChapterIntroduction" id="tl0905000000">
<title><content-text>Protocolo RIP</content-text></title>
<topic type="" id="tl0905000100">
<title><content-text>Introdução do capítulo</content-text></title>
<page type="OneColumn" id="tl0905000101">
<content-media type="StaticGraphic" id="cm3612863680"><title><content-text></content-text></title><media ref="tl0905000000/tl0905000000/tl0905000100/tl0905000101/cm3612863680.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905000000/tl0905000100/tl0905000101/cm3612863680text.xml"/></content-media>
<content-text><p>Ao longo dos anos, os protocolos de roteamento evoluíram para atender às crescentes demandas de redes complexas. O primeiro protocolo usado foi o Protocolo de informações de roteamento (RIP, Routing Information Protocol). O RIP ainda é popular devido à sua simplicidade e suporte difundido. </p> <p>Entender o RIP é importante para os seus estudos de rede por duas razões. Em primeiro lugar, o RIP ainda é usado. Você pode encontrar uma implementação de rede que seja grande o suficiente para precisar de um protocolo de roteamento, porém simples o suficiente para usar o RIP com eficiência. Em segundo lugar, a familiaridade com muitos dos conceitos fundamentais do RIP o ajudará a comparar o RIP com outros protocolos. Entender o funcionamento e a implementação do RIP facilitará a aprendizagem de outros protocolos de roteamento. </p> <p>Este capítulo aborda os detalhes da primeira versão do RIP, incluindo um pouco de história, características do RIPv1, operação, configuração, verificação e identificação e solução de problemas. Ao longo do capítulo, você poderá usar as atividades do Packet Tracer para praticar o que você está aprendendo. No final do capítulo, são fornecidos três laboratórios práticos e uma atividade avançada de Integração das Habilidades do Packet Tracer para ajudá-lo a integrar o RIPv1 ao seu conjunto crescente de habilidades e conhecimentos de rede.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905010000">
<title><content-text>RIPv1: Protocolo de roteamento classful do vetor de distância</content-text></title>
<topic type="" id="tl0905010100">
<title><content-text>Histórico e perspectiva</content-text></title>
<page type="OneColumn" id="tl0905010101">
<content-media type="InteractiveGraphicRollovers" id="cm1295210760"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010100/tl0905010101/cm1295210760.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010100/tl0905010101/cm1295210760text.xml"/></content-media>
<content-text><p><b>Impacto histórico do RIP</b></p> <p>O RIP é o mais antigo dos protocolos de roteamento de vetor de distância. Embora o RIP não tenha a sofisticação dos protocolos de roteamento mais avançados, sua simplicidade e seu uso corrente são uma prova da sua longevidade. O RIP não é um protocolo “em extinção”. Na realidade, um formato IPv6 do RIP, chamado RIPng (última geração), já está disponível. </p> <p><b>Clique nas datas na figura para comparar o RIP e o desenvolvimento do protocolo de rede com o passar do tempo.</b> </p> <p>O RIP evoluiu de um protocolo anterior desenvolvido na Xerox, chamado Protocolo de Informações de Gateway (GWINFO, Gateway Information Protocol). Com o desenvolvimento do <content-link target="cg4132971760" type="glossary">XNS</content-link> (Xerox Network System), o GWINFO resultou no RIP. Posteriormente, ele ganhou popularidade porque foi implementado na BSD (Berkeley Software Distribution) como um daemon chamado de <i>routed</i> (pronunciado "route-dee" e não "rout-ed"). Vários outros fornecedores fizeram implementações ligeiramente diferentes do RIP. Reconhecendo a necessidade de padronização do protocolo, Charles Hedrick escreveu a RFC 1058 em 1988, no qual ele documentou o protocolo existente e especificou algumas melhorias. Desde então, o RIP foi melhorado com o RIPv2 em 1994 e com o RIPng em 1997. </p> <p><b>Nota: </b>A primeira versão do RIP é chamada freqüentemente de RIPv1, para diferenciá-la da RIPv2. No entanto, ambas as versões compartilham muitos dos mesmos recursos. Ao discutir recursos comuns às duas versões, nós iremos nos referir ao RIP. Ao discutir recursos exclusivos de cada versão, nós usaremos RIPv1 e RIPv2. O RIPv2 é discutido em um capítulo posterior. </p> <p><b>Links</b></p> <p>"RFC 1058: Protocolo RIP," <content-link target="http://www.ietf.org/rfc/rfc1058.txt" type="external">http://www.ietf.org/rfc/rfc1058.txt</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0905010200">
<title><content-text>Formato de mensagem e características do RIPv1</content-text></title>
<page type="OneColumn" id="tl0905010201">
<content-media type="InteractiveGraphicRollovers" id="cm5640853016"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010200/tl0905010201/cm5640853016.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010200/tl0905010201/cm5640853016text.xml"/></content-media>
<content-text><p><b>Características do RIP</b></p> <p>Conforme discutido no Capítulo 4, "Protocolos de roteamento de vetor de distância", as principais características do RIP são:</p> <ul><li> O RIP é um protocolos de roteamento de vetor de distância.</li> <li> O RIP usa a contagem de saltos como sua única métrica para seleção de caminho.</li> <li> Rotas anunciadas com contagens de saltos maiores que 15 são inalcançáveis.</li> <li> As mensagens são enviadas por broadcast a cada 30 segundos.</li></ul> <p><b>Passe o mouse sobre os campos na figura Mensagem RIPv1 Encapsulada para ver o processo de encapsulamento. </b></p> <p>A parte de dados de uma mensagem RIP é encapsulada em um segmento do protocolo UDP, com números de porta de origem e de destino definidos como 520. O cabeçalho IP e os cabeçalhos de enlace de dados adicionam endereços de destino broadcast antes que a mensagem seja enviada a todas as interfaces configuradas do RIP.</p></content-text>
</page>
<page type="OneColumn" id="tl0905010202">
<content-media type="AnimationPartialScreen" id="cm6866685889"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010200/tl0905010202/cm6866685889.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010200/tl0905010202/cm6866685889text.xml"/></content-media>
<content-text><p><b>Formato de mensagem RIP: Cabeçalho RIP</b></p> <p>São especificados três campos na parte de cabeçalho de quatro bytes mostrada em laranja na figura. O campo <b>Comando</b> especifica o tipo de mensagem, discutido em mais detalhe na próxima seção. O campo <b>Versão</b> é definido como 1 para o RIP versão 1. O terceiro campo é rotulado como <b>Deve ser zero</b>. Os campos "Deve ser zero" permitem a expansão futura do protocolo.</p> <p><b>Formato de mensagem RIP: Entrada de rota</b></p> <p>A parte da entrada de rota da mensagem inclui três campos que contêm: <b>Identificador da família de endereços</b> (2 para IP, a menos que uma Solicitação seja para a tabela de roteamento completa; nesse caso, o valor será configurado para zero), <b>Endereço IP</b> e <b>Métrica</b>. Essa parte da entrada de rota representa uma rota de destino com sua métrica associada. Uma atualização RIP pode conter até 25 entradas de rota. O tamanho máximo do datagrama é 504 bytes, sem incluir os cabeçalhos IP ou UDP.</p> <p><b>Por que há tantos campos definidos como zero? </b></p> <p>O RIP foi desenvolvido antes do IP e era usado para outros protocolos de rede (como o XNS). O BSD também teve a sua influência. Inicialmente, o espaço adicional foi incluído com a intenção de suportar espaços de endereços maiores no futuro. Como veremos no Capítulo 7, o RIPv2 usa a maioria desses campos vazios.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905010300">
<title><content-text>Operação RIP</content-text></title>
<page type="OneColumn" id="tl0905010301">
<content-media type="AnimationPartialScreen" id="cm4580702771"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010300/tl0905010301/cm4580702771.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010300/tl0905010301/cm4580702771text.xml"/></content-media>
<content-text><p><b>Processo de solicitação/resposta do RIP</b></p> <p>O RIP usa dois tipos de mensagem especificados no campo Command: <b>Mensagem de solicitação</b> e <b>Mensagem de resposta</b>. </p> <p><b>Clique em Reproduzir para visualizar o processo de solicitação/resposta.</b></p> <p>Cada interface configurada pelo RIP envia uma mensagem de solicitação na inicialização, solicitando que todos os vizinhos RIP enviem suas tabelas de roteamento completas. Uma mensagem de resposta é devolvida por vizinhos habilitados pelo RIP. Quando o roteador solicitante recebe as respostas, ele avalia cada entrada de rota. Se uma entrada de rota for nova, o roteador receptor instalará a rota na tabela de roteamento. Se a rota já estiver na tabela e a nova entrada tiver uma contagem de saltos melhor, a entrada existente será substituída. Então, o roteador de inicialização envia uma atualização disparada a todas as interfaces habilitadas pelo RIP que contêm sua própria tabela de roteamento para que os vizinhos RIP possam ser informados de todas as rotas novas.</p></content-text>
</page>
<page type="OneColumn" id="tl0905010302">
<content-media type="StaticGraphic" id="cm7388163538"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010300/tl0905010302/cm7388163538.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010300/tl0905010302/cm7388163538text.xml"/></content-media>
<content-text><p><b>Classes de endereços IP e roteamento classful</b></p> <p>De acordo com o que foi aprendido em estudos anteriores, inicialmente os endereços IP atribuídos a hosts eram divididos em 3 classes: classe A, classe B e classe C. A cada classe foi atribuída uma máscara de sub-rede padrão, conforme mostrado na figura. Conhecer a máscara de sub-rede padrão de cada classe é importante para entender como o RIP funciona.</p> <p>O RIP é um protocolo de roteamento classful. Como você deve ter percebido na discussão anterior sobre formato de mensagem, o RIPv1 não envia informações de máscara de sub-rede na atualização. Portanto, um roteador usa a máscara de sub-rede configurada em uma interface local ou aplica a máscara de sub-rede padrão com base na classe do endereço. Devido a essa limitação, as redes RIPv1 não podem ser descontíguas e não podem implementar o VLSM.</p> <p>O endereçamento IP é discutido no Capítulo 6, "VLSM e CIDR". Você também pode acessar os links a seguir para fazer uma revisão das classes. </p> <p><b>Links</b></p> <p>"Protocolo IP", <content-link target="http://www.ietf.org/rfc/rfc791.txt" type="external">http://www.ietf.org/rfc/rfc791.txt</content-link></p> <p>"Endereçamento IP e criação de sub-redes para novos usuários", <content-link target="http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a00800a67f5.shtml" type="external">http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a00800a67f5.shtml</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0905010400">
<title><content-text>Distância administrativa</content-text></title>
<page type="OneColumn" id="tl0905010401">
<content-media type="InteractiveGraphicHotspots" id="cm7441208198"><title><content-text></content-text></title><media ref="tl0905000000/tl0905010000/tl0905010400/tl0905010401/cm7441208198.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905010000/tl0905010400/tl0905010401/cm7441208198text.xml"/></content-media>
<content-text><p>De acordo com o que foi aprendido no Capítulo 3, "Introdução aos protocolos de roteamento dinâmico", a distância administrativa (AD, administrative distance) é a confiança (ou preferência) da origem da rota. O RIP tem uma distância administrativa padrão de 120. Quando comparado a outros protocolos IGP, o RIP é o protocolo de roteamento menos preferido. IS-IS, OSPF, IGRP e EIGRP têm valores inferiores de AD padrão.</p> <p>Lembre-se de que você pode verificar a distância administrativa usando os comandos <span class="cmd"><b>show ip route</b></span> ou <span class="cmd"><b>show ip protocols</b></span>.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905020000">
<title><content-text>Configuração RIPv1 básica</content-text></title>
<topic type="" id="tl0905020100">
<title><content-text>Configuração RIPv1 básica</content-text></title>
<page type="OneColumn" id="tl0905020101">
<content-media type="StaticGraphic" id="cm5316516891"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020100/tl0905020101/cm5316516891.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905020000/tl0905020100/tl0905020101/cm5316516891text.xml"/></content-media>
<content-text><p>A figura mostra as três topologias de roteador usadas no Capítulo 2, "Roteamento estático". Fisicamente, a topologia é a mesma. A diferença é que não precisaremos de PCs conectados às redes locais. Porém, o esquema de endereçamento é diferente. Estamos usando cinco endereços de rede de classe C.</p> <p><b>Clique na Tabela de endereços mostrada na figura para visualizar o endereçamento da interface de cada roteador.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0905020102">
<content-media type="ActivityPKA" id="cm6792493573"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020100/tl0905020102/cm6792493573/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905020000/tl0905020100/tl0905020102/cm6792493573/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para configurar e ativar todas as interfaces da Topologia RIP: Cenário A. Instruções detalhadas são fornecidas na atividade. </p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0905020200">
<title><content-text>Habilitando o RIP: comando router rip</content-text></title>
<page type="OneColumn" id="tl0905020201">
<content-media type="StaticGraphic" id="cm2500619377"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020200/tl0905020201/cm2500619377.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905020000/tl0905020200/tl0905020201/cm2500619377text.xml"/></content-media>
<content-text><p>Para habilitar um protocolo de roteamento dinâmico, entre no modo de configuração global e use o comando <b><span class="cmd">router</span></b>. Conforme mostrado na figura, se você digitar um espaço seguido por um ponto de interrogação, será exibida uma lista de todos os protocolos de roteamento disponíveis pelo IOS.</p> <p>Para entrar no modo de configuração de roteador do RIP, digite <b><span class="cmd">router rip</span></b> no prompt de configuração global. Observe que o prompt é alterado de prompt de configuração global para:</p> <span class="cmd"><p>R1(config-router)#</p></span> <p>Esse comando não inicia diretamente o processo RIP. Em vez disso, ele permite que você defina as configurações do protocolo de roteamento. Nenhuma atualização de roteamento é enviada. </p> <p>Se você precisar remover completamente o processo de roteamento do protocolo RIP de um dispositivo, negue o comando com <b><span class="cmd">no router rip</span></b>. Esse comando pára o processo RIP e apaga todas as configurações RIP existentes.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905020300">
<title><content-text>Especificando redes</content-text></title>
<page type="OneColumn" id="tl0905020301">
<content-media type="StaticGraphic" id="cm6519625480"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020300/tl0905020301/cm6519625480.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905020000/tl0905020300/tl0905020301/cm6519625480text.xml"/></content-media>
<content-text><p>Ao entrar no modo de configuração do roteador RIP, o roteador é instruído a executar o RIP. Porém, o roteador ainda precisa saber quais interfaces locais deve usar para a comunicação com outros roteadores e também quais redes localmente conectadas ele deve anunciar a esses roteadores. Para habilitar o roteamento RIP de uma rede, use o comando <span class="cmd"><b>network</b></span> no modo de configuração do roteador e insira o endereço de rede classful de cada rede diretamente conectada.</p> <span class="cmd"><p>Router(config-router)#<b>network </b><i>directly-connected-classful-network-address </i></p></span> <p>O comando <span class="cmd"><b>network</b></span>:</p> <ul><li> Habilita o RIP em todas as interfaces que pertencem a uma rede específica. Agora, as interfaces associadas enviarão e receberão atualizações RIP.</li> <li> Anuncia a rede especificada em atualizações de roteamento do RIP enviadas a outros roteadores a cada 30 segundos.</li></ul> <p><b>Nota:</b> Se você inserir um endereço de sub-rede, o IOS o converterá automaticamente em um endereço de rede classful. Por exemplo, se você inserir o comando <span class="cmd"><b>network 192.168.1.32</b></span>, o roteador o converterá no comando <span class="cmd"><b>network 192.168.1.0</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl0905020302">
<content-media type="InteractiveGraphicHotspots" id="cm4282458484"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020300/tl0905020302/cm4282458484.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905020000/tl0905020300/tl0905020302/cm4282458484text.xml"/></content-media>
<content-text><p>Na figura, o comando <span class="cmd"><b>network</b></span> é configurado nos três roteadores para as redes diretamente conectadas. Observe que somente redes classful foram inseridas. </p> <p>O que acontecerá se você inserir um endereço de sub-rede ou um endereço IP de interface em vez do endereço de rede classful ao usar o comando <span class="cmd"><b>network</b></span> para configurações RIP?</p> <span class="cmd"><p>R3(config)#<b>router rip</b></p></span> <span class="cmd"><p>R3(config-router)#<b>network 192.168.4.0</b></p></span> <span class="cmd"><p>R3(config-router)#<b>network 192.168.5.1</b></p></span> <p>Neste exemplo, inserimos um endereço IP de interface em vez do endereço de rede classful. Observe que o IOS não exibe uma mensagem de erro. Em vez disso, ele corrige a entrada e insere o endereço de rede classful. Isso é provado com a verificação abaixo.</p> <span class="cmd"><p>R3#<b>show running-config</b></p></span> <span class="cmd"><p>!</p></span> <span class="cmd"><p>router rip</p></span> <span class="cmd"><p>network 192.168.4.0</p></span> <span class="cmd"><p>network 192.168.5.0</p></span> <span class="cmd"><p>!</p></span></content-text>
</page>
<page type="OneColumn" id="tl0905020303">
<content-media type="ActivityPKA" id="cm3505145117"><title><content-text></content-text></title><media ref="tl0905000000/tl0905020000/tl0905020300/tl0905020303/cm3505145117/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905020000/tl0905020300/tl0905020303/cm3505145117/icontext.xml"/></content-media>
<content-text><p>Use a Atividade do Packet Tracer para praticar a configuração do roteamento RIP nos três roteadores da topologia. Instruções detalhadas são fornecidas na atividade. </p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905030000">
<title><content-text>Verificação, identificação e solução de problemas</content-text></title>
<topic type="" id="tl0905030100">
<title><content-text>Verificação do RIP: show ip route</content-text></title>
<page type="OneColumn" id="tl0905030101">
<content-media type="InteractiveGraphicHotspots" id="cm6594413959"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030100/tl0905030101/cm6594413959.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905030000/tl0905030100/tl0905030101/cm6594413959text.xml"/></content-media>
<content-text><p><b>Comandos eficientes de identificação e solução de problemas</b></p> <p>Para verificar, identificar e solucionar problemas de roteamento, comece usando os comandos <span class="cmd"><b>show ip route</b></span> e <span class="cmd"><b>show ip protocols</b></span>. Se você não conseguir isolar o problema com esses dois comandos, use o <span class="cmd"><b>debug ip rip</b></span> para ver exatamente o que está acontecendo. Esses três comandos são discutidos em uma ordem sugerida que você pode usar para verificar, identificar e solucionar problemas de configuração de um protocolo de roteamento. Antes de configurar qualquer roteamento - estático ou dinâmico – verifique se todas as interfaces necessárias estão “up” (camada física) e “up” (camada de enlace) com o comando <span class="cmd"><b>show ip interface brief</b></span>.</p> <p><b>Clique em R1, R2 e R3 para visualizar as tabelas de roteamento.</b></p> <p>O comando <span class="cmd"><b>show ip route</b></span> verifica se as rotas recebidas por vizinhos RIP estão instaladas na tabela de roteamento. Um <span class="cmd"><b>R</b></span> na saída de comando indica rotas do protocolo RIP. Como esse comando exibe toda a tabela de roteamento, incluindo rotas estáticas e diretamente conectadas, normalmente ele é o primeiro comando usado para verificar a convergência. As rotas podem não aparecer imediatamente quando você executar o comando, pois as redes precisam de algum tempo para convergir. No entanto, quando o roteamento estiver configurado corretamente em todos os roteadores, o comando <span class="cmd"><b>show ip route</b></span> refletirá que cada roteador tem uma tabela de roteamento completa, com uma rota para cada rede na topologia.</p> <p><b>Clique no botão Topologia.</b></p> <p>Como você pode ver na figura, há cinco redes na topologia. Cada roteador lista cinco redes na tabela de roteamento; portanto, podemos dizer que os três roteadores convergiram porque cada roteador tem uma rota para todas as redes mostradas na topologia.</p></content-text>
</page>
<page type="OneColumn" id="tl0905030102">
<content-media type="StaticGraphic" id="cm8214359985"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030100/tl0905030102/cm8214359985.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905030000/tl0905030100/tl0905030102/cm8214359985text.xml"/></content-media>
<content-text><p><b>Interpretando a saída do comando <span class="cmd">show ip route</span></b></p> <p>Usando as informações da figura, vamos nos concentrar em uma rota do protocolo RIP aprendida pelo R1 e interpretar a saída de comando mostrada na tabela de roteamento.</p> <span class="cmd"><p><b>R 192.168.5.0/24 [120/2] via 192.168.2.2, 00:00:23, Serial0/0/0</b></p></span> <p>A listagem de rotas com o código <span class="cmd"><b>R</b></span> é uma maneira rápida de verificar se o RIP está sendo executado nesse roteador. Se o RIP não estiver pelo menos parcialmente configurado, você não visualizará nenhuma rota do protocolo RIP. </p> <p>Em seguida, o endereço de rede remota e a máscara de sub-rede serão listados (<span class="cmd"><b>192.168.5.0/24</b></span>). </p> <p>O valor de AD (<span class="cmd"><b>120</b></span> para o RIP) e a distância até a rede (<span class="cmd"><b>2</b></span> saltos) são mostrados entre colchetes. </p> <p>São listados o endereço IP de próximo salto do roteador anunciante (R2 em <span class="cmd"><b>192.168.2.2</b></span>) e os segundos decorridos desde a última atualização (<span class="cmd"><b>00:00:23</b></span>, nesse caso). </p> <p>Por fim, a interface de saída que esse roteador usará para o tráfego destinado à rede remota é listada (<span class="cmd"><b>Serial 0/0/0</b></span>).</p></content-text>
</page>
</topic>
<topic type="" id="tl0905030200">
<title><content-text>Verificação do RIP: show ip protocols</content-text></title>
<page type="OneColumn" id="tl0905030201">
<content-media type="InteractiveGraphicHotspots" id="cm3888481266"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030200/tl0905030201/cm3888481266.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905030000/tl0905030200/tl0905030201/cm3888481266text.xml"/></content-media>
<content-text><p><b>Interpretando a saída de <span class="cmd">show ip protocols</span></b></p> <p>Se estiver faltando uma rede na tabela de roteamento, verifique a configuração de roteamento usando o comando <span class="cmd"><b>show ip protocols</b></span>. O comando <span class="cmd"><b>show ip protocols</b></span> exibe o protocolo de roteamento atualmente configurado no roteador. Esta saída de comando pode ser usada para verificar a maioria dos parâmetros de RIP para confirmar se:</p> <ul><li> O roteamento RIP está configurado</li> <li> As interfaces corretas enviam e recebem atualizações RIP</li> <li> O roteador anuncia as redes corretas</li> <li> Os vizinhos RIP estão enviando atualizações</li></ul> <p>Esse comando também é muito útil ao verificar os operações de outros protocolos de roteamento, como veremos posteriormente com o EIGRP e o OSPF.</p> <p><b>Clique no botão 1 na figura.</b></p> <p>A primeira linha da saída de comando verifica se o roteamento RIP está configurado e em execução no roteador R2. Como vimos na seção anterior, "Configuração básica do RIPv1", pelo menos uma interface ativa com um comando <span class="cmd"><b>network</b></span> é necessária para que o roteamento RIP seja iniciado.</p> <p><b>Clique no botão 2 na figura.</b></p> <p>Estes são os temporizadores que serão mostrados quando a próxima sessão de atualizações for enviada deste roteador - daqui a 23 segundos, no exemplo.</p> <p><b>Clique no botão 3 na figura.</b></p> <p>Essas informações estão relacionadas à filtragem de atualizações e à redistribuição de rotas, se estiverem configuradas neste roteador. A filtragem e a redistribuição são tópicos do CCNP.</p> <p><b>Clique no botão 4 na figura.</b></p> <p>Este bloco de saída contém informações sobre qual versão do RIP está atualmente configurada e quais interfaces estão participando de atualizações RIP.</p> <p><b>Clique no botão 5 na figura.</b></p> <p>Esta parte da saída do comando mostra que o roteador R2 está sumarizando no limite de rede classful e, por padrão, usará até quatro rotas de custo iguais para fazer balanceamento de carga do tráfego. </p> <p><b>Clique no botão 6 na figura.</b></p> <p>As redes classful configuradas com o comando <span class="cmd"><b>network</b></span> são listadas a seguir. Estas são as redes que o R2 incluirá em suas atualizações RIP.</p> <p><b>Clique no botão 7 na figura.</b></p> <p>Role para visualizar a saída restante. Aqui, os vizinhos RIP são listados como <b>Origens de informações de roteamento</b>. <b>Gateway</b> é o endereço IP do próximo salto do vizinho que está enviando atualizações de R2. <b>Distância</b> é o AD que o R2 usa para atualizações enviadas por esse vizinho. <b>Última atualização</b> é o tempo decorrido em segundos desde que a última atualização foi recebida desse vizinho.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905030300">
<title><content-text>Verificação do RIP: debug ip rip</content-text></title>
<page type="OneColumn" id="tl0905030301">
<content-media type="InteractiveGraphicHotspots" id="cm3765083639"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030300/tl0905030301/cm3765083639.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905030000/tl0905030300/tl0905030301/cm3765083639text.xml"/></content-media>
<content-text><p><b>Interpretando a saída de <span class="cmd">debug ip rip</span></b></p> <p>A maioria dos erros de configuração do RIP envolvem uma instrução de configuração de <span class="cmd"><b>network</b></span> incorreta, uma instrução de configuração de <span class="cmd"><b>network</b></span> que está faltando ou a configuração de sub-redes descontíguas em um ambiente classful. Conforme mostrado na figura, um comando eficiente usado para localizar problemas com atualizações RIP é o <span class="cmd"><b>debug ip rip</b></span>. Ele exibe as atualizações feitas no roteamento do protocolo RIP enquanto elas são enviadas e recebidas. Como as atualizações são periódicas, é necessário aguardar a próxima sessão de atualizações para visualizar alguma saída. </p> <p><b>Clique no botão 1 na figura.</b></p> <p>Primeiro, visualizamos uma atualização vinda do R1 na interface Serial 0/0/0. Observe que o R1 só envia uma rota à rede 192.168.1.0. Nenhuma outra rota é enviada porque isso violaria a regra de split horizon. O R1 não tem permissão para anunciar redes anteriormente enviadas a ele pelo R2 de volta ao R2. </p> <p><b>Clique no botão 2 na figura.</b></p> <p>A próxima atualização recebida é de R3. Novamente, por causa da regra de split horizon, o R3 envia somente uma rota - a rede 192.168.5.0.</p> <p><b>Clique no botão 3 na figura.</b></p> <p>O R2 envia suas próprias atualizações. Primeiro, o R2 cria uma atualização para ser enviada à interface FastEthernet0/0. A atualização inclui toda a tabela de roteamento, exceto a rede 192.168.3.0, que é conectada à FastEthernet0/0. </p> <p><b>Clique no botão 4 na figura.</b></p> <p>A seguir, o R2 cria uma atualização a ser enviada ao R3. São incluídas três rotas. Por causa do split horizon, o R2 não anuncia a rede que R2 e R3 compartilham nem a rede 192.168.5.0. </p> <p><b>Clique no botão 5 na figura.</b></p> <p>Por fim, R2 cria uma atualização a ser enviada ao R1. São incluídas três rotas. Por causa do split horizon, o R2 não anuncia a rede que R2 e R1 compartilham nem a rede 192.168.1.0.</p> <p><b>Nota:</b> Se aguardar mais 30 segundos, você visualizará toda a saída do comando debug mostrada na repetição da figura, pois o RIP envia atualizações periódicas a cada 30 segundos.</p> <p><b>Clique no botão 6 na figura.</b></p> <p>Para deixar de monitorar atualizações RIP no R2, insira o comando <span class="cmd"><b>no debug ip rip</b></span> ou simplesmente <span class="cmd"><b>undebug all</b></span>, conforme mostrado na figura.</p> <p>Ao revisar essa saída de depuração, podemos verificar se o roteamento RIP está funcionando completamente no R2. Mas você consegue imaginar uma maneira de otimizar roteamento RIP no R2? O R2 precisa enviar atualizações usando a FastEthernet0/0? No próximo tópico, veremos como é possível evitar atualizações desnecessárias.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905030400">
<title><content-text>Interfaces passivas</content-text></title>
<page type="OneColumn" id="tl0905030401">
<content-media type="StaticGraphic" id="cm3970644539"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030400/tl0905030401/cm3970644539.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905030000/tl0905030400/tl0905030401/cm3970644539text.xml"/></content-media>
<content-text><p><b>Atualizações RIP desnecessárias afetam a rede</b></p> <p>Como você viu no exemplo anterior, embora não exista nenhum dispositivo RIP nessa rede local, R2 está enviando atualizações usando a FastEthernet0/0. O R2 não tem como saber isso e, como resultado, envia uma atualização a cada 30 segundos. Enviar atualizações desnecessárias em uma rede local afeta a rede de três maneiras:</p> <p>1. Há desperdício de largura de banda no transporte de atualizações desnecessárias. Como as atualizações RIP são broadcast, os switches encaminharão essas atualizações usando todas as portas. </p> <p>2. Todos os dispositivos na rede local devem processar a atualização até as camadas de transporte, onde ela será descartada pelo dispositivo receptor.</p> <p>3. Anunciar atualizações em uma rede de broadcast é um risco à segurança. As atualizações RIP podem ser interceptadas com software de detecção de pacotes. As atualizações de roteamento podem ser modificadas e enviadas novamente ao roteador, corrompendo a tabela de roteamento com métricas falsas que direcionam o tráfego de forma errada.</p> <p><b>Parando atualizações RIP desnecessárias</b></p> <p>Você poderia tentar parar as atualizações removendo a rede 192.168.3.0 da configuração usando o comando <span class="cmd"><b>no network 192.168.3.0</b></span>. No entanto, o R2 não anunciaria essa rede local como uma rota em atualizações enviadas a R1 e R3. A solução correta é usar o comando <span class="cmd"><b>passive-interface</b></span>, que impede a transmissão de atualizações de roteamento através de uma interface do roteador, mas ainda permite que essa rede seja anunciada a outros roteadores. Insira o comando <span class="cmd"><b>passive-interface</b></span> no modo de configuração do roteador.</p> <span class="cmd"><p>Router(config-router)#<b>passive-interface </b><i>interface-type interface-number</i></p></span> <p>Esse comando pára as atualizações de roteamento pela interface especificada. No entanto, a rede à qual a interface especificada pertence ainda será anunciada em atualizações de roteamento enviadas por outras interfaces. </p> <p>Na figura, R2 é configurado primeiro com o comando <span class="cmd"><b>passive-interface</b></span> para impedir atualizações de roteamento na FastEthernet0/0, pois não existe nenhum vizinho RIP na rede local. Então, o comando <span class="cmd"><b>show ip protocols</b></span> é utilizado para verificar a interface passiva. Observe que a interface não é mais listada em <b>Interface</b>, e sim em uma nova seção chamada de <b>Passive Interface(s)</b>. Observe também que a rede 192.168.3.0 ainda é listada em <b>Routing for Networks</b>, o que significa que essa rede ainda está incluída como uma entrada de rota em atualizações RIP enviadas a R1 e R3.</p> <p>Todos os protocolos de roteamento suportam o comando <span class="cmd"><b>passive-interface</b></span>. Você deverá usar o comando <span class="cmd"><b>passive-interface</b></span>, quando adequado, como parte de sua configuração de roteamento normal.</p></content-text>
</page>
<page type="OneColumn" id="tl0905030402">
<content-media type="ActivityPKA" id="cm7328523808"><title><content-text></content-text></title><media ref="tl0905000000/tl0905030000/tl0905030400/tl0905030402/cm7328523808/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905030000/tl0905030400/tl0905030402/cm7328523808/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para verificar o roteamento RIP e parar as atualizações RIP usando o comando <span class="cmd"><b>passive-interface</b></span>. Instruções detalhadas são fornecidas na atividade. </p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905040000">
<title><content-text>Sumarização automática</content-text></title>
<topic type="" id="tl0905040100">
<title><content-text>Topologia modificada: Cenário B</content-text></title>
<page type="OneColumn" id="tl0905040101">
<content-media type="InteractiveGraphicHotspots" id="cm7506510685"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040100/tl0905040101/cm7506510685.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040100/tl0905040101/cm7506510685text.xml"/></content-media>
<content-text><p>Para ajudar na discussão da <content-link target="cg3567348536" type="glossary">sumarização automática</content-link>, a topologia RIP mostrada na figura passou pelas seguintes modificações:</p> <p>São usadas três redes classful:</p> <ul><li> 172.30.0.0/16</li> <li> 192.168.4.0/24</li> <li> 192.168.5.0/24</li></ul> <p>A rede 172.30.0.0/16 é dividida em três sub-redes:</p> <ul><li> 172.30.1.0/24</li> <li> 172.30.2.0/24</li> <li> 172.30.3.0/24</li></ul> <p>Os seguintes dispositivos fazem parte do endereço de rede classful 172.30.0.0/16:</p> <ul><li> Todas as interfaces em R1</li> <li> S0/0/0 e Fa0/0 em R2</li></ul> <p>A rede 192.168.4.0/24 é dividida como uma única sub-rede 192.168.4.8/30</p></content-text>
</page>
<page type="OneColumn" id="tl0905040102">
<content-media type="StaticGraphic" id="cm6323924586"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040100/tl0905040102/cm6323924586.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040100/tl0905040102/cm6323924586text.xml"/></content-media>
<content-text><p><b>Clique em R1, R2 e R3 para visualizar os detalhes de configuração de cada roteador.</b></p> <p>Observe que os comandos <span class="cmd"><b>no shutdown</b></span> e <span class="cmd"><b>clock rate</b></span> não são necessários, pois esses comandos ainda estão configurados no Cenário A. No entanto, como foram adicionadas novas redes, o processo de roteamento RIP foi completamente removido com o comando <span class="cmd"><b>no router rip</b></span> e, em seguida, habilitado novamente.</p> <p><b>Clique em R1 na figura.</b></p> <p>Na saída de R1, observe que ambas as sub-redes foram configuradas com o comando <span class="cmd"><b>network</b></span>. Essa configuração está tecnicamente incorreta, pois o RIPv1 envia o endereço de rede classful em suas atualizações, e não a sub-rede. Portanto, o IOS alterou a configuração para refletir o correto, a configuração classful, como pode ser visualizado com a saída do comando <span class="cmd"><b>show run</b></span>.</p> <p><b>Clique em R2 na figura.</b></p> <p>Na saída de comando para R2, observe que a sub-rede 192.168.4.8 foi configurada com o comando <span class="cmd"><b>network</b></span>. Novamente, essa configuração está tecnicamente incorreta e o IOS a alterou para 192.168.4.0 na configuração em execução.</p> <p><b>Clique em R3 na figura.</b></p> <p>A configuração de roteamento para R3 está correta. A configuração em execução corresponde ao que foi inserido no modo de configuração do roteador.</p> <p><b>Nota:</b> Em exames de avaliação e de certificação, inserir um endereço de sub-rede em vez do endereço de rede classful em um comando <span class="cmd"><b>network </b></span>a resposta será considerada incorreta. </p></content-text>
</page>
</topic>
<topic type="" id="tl0905040200">
<title><content-text>Roteadores de borda e sumarização automática</content-text></title>
<page type="OneColumn" id="tl0905040201">
<content-media type="StaticGraphic" id="cm5649253188"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040200/tl0905040201/cm5649253188.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040200/tl0905040201/cm5649253188text.xml"/></content-media>
<content-text><p>Como sabe você, o RIP é um protocolo de roteamento classful que sumariza automaticamente redes classful nas bordas das principais redes. Na figura, você pode visualizar que o R2 tem interfaces em mais de uma rede classful principal. Isso faz do R2 um <content-link target="cg8932544635" type="glossary">roteador de borda</content-link> no RIP. As interfaces Serial 0/0/0 e FastEthernet 0/0 no R2 estão dentro do limite de 172.30.0.0. A interface Serial 0/0/1 está dentro do limite de 192.168.4.0. </p> <p>Como os roteadores de borda sumarizam as sub-redes RIP de uma rede principal para outra, as atualizações para as redes 172.30.1.0, 172.30.2.0 e 172.30.3.0 serão automaticamente sumarizadas em 172.30.0.0 quando enviadas pela interface Serial 0/0/1 de R2.</p> <p>Veremos nas próximas duas seções como roteadores de borda executam essa sumarização.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905040300">
<title><content-text>Processando atualizações RIP</content-text></title>
<page type="OneColumn" id="tl0905040301">
<content-media type="StaticGraphic" id="cm5356626038"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040300/tl0905040301/cm5356626038.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040300/tl0905040301/cm5356626038text.xml"/></content-media>
<content-text><p><b>Regras para processar atualizações RIPv1</b></p> <p>As duas regras a seguir determinam as atualizações RIPv1:</p> <ul><li> Se uma atualização de roteamento e a interface na qual ela é recebida pertencerem à mesma rede principal, a máscara de sub-rede da interface será aplicada à rede na atualização de roteamento.</li> <li> Se uma atualização de roteamento e a interface na qual ela é recebida pertencerem a redes principais diferentes, a máscara de sub-rede classful da rede será aplicada à rede na atualização de roteamento.</li></ul> <p><b>Exemplo de processamento de atualizações RIPv1</b></p> <p>Na figura, R2 recebe uma atualização de R1 e insere a rede na tabela de roteamento. Como R2 sabe que essa sub-rede tem uma máscara de sub-rede /24 (255.255.255.0)? Sabe porque:</p> <ul><li> R2 recebeu essas informações em uma interface que pertence à mesma rede classful (172.30.0.0) que a da atualização 172.30.1.0 recebida.</li> <li> O endereço IP para o qual R2 recebeu a mensagem "172.30.1.0 em 1 saltos" estava na Serial 0/0/0 com um endereço IP de 172.30.2.2 e uma máscara de sub-rede de 255.255.255.0 (/24). </li> <li> R2 usa sua própria máscara de sub-rede nessa interface e a aplica a essa interface e a todas as outras sub-redes 172.30.0.0 que recebe nessa interface - nesse caso, 172.30.1.0. </li> <li> A sub-rede 172.30.1.0 /24 foi adicionada à tabela de roteamento.</li></ul> <p>Os roteadores que executam RIPv1 são limitados ao uso da mesma máscara de sub-rede para todas as sub-redes com a mesma rede classful. </p> <p>Como você aprenderá em capítulos posteriores, os protocolos de roteamento classless, como o RIPv2, permitem que a mesma rede principal (classful) use máscaras de sub-rede diferentes em sub-redes diferentes, mais conhecido como Máscara de sub-rede de tamanho variável (VLSM).</p></content-text>
</page>
</topic>
<topic type="" id="tl0905040400">
<title><content-text>Enviando atualizações RIP</content-text></title>
<page type="OneColumn" id="tl0905040401">
<content-media type="InteractiveGraphicHotspots" id="cm9810893481"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040400/tl0905040401/cm9810893481.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040400/tl0905040401/cm9810893481text.xml"/></content-media>
<content-text><p><b>Usando debug para exibir a sumarização automática</b></p> <p>Ao enviar uma atualização, o roteador de borda R2 incluirá o endereço de rede e a métrica associada. Se a entrada de rota for para uma atualização enviada por uma rede principal diferente, o endereço de rede na entrada de rota será sumarizado para o endereço de rede principal ou classful. Isso é exatamente o que R2 faz para 192.168.4.0 e 192.168.5.0. Ela envia essas redes classful ao R1.</p> <p>R2 também tem rotas para as sub-redes 172.30.1.0/24, 172.30.2.0/24 e 172.30.3.0/24. Na atualização de roteamento de R2 para R3 na Serial0/0/1, R2 só envia um resumo do endereço de rede classful de 172.30.0.0.</p> <p>Se a entrada de rota for para uma atualização enviada dentro de uma rede principal, a máscara de sub-rede da interface de saída será usada para determinar o endereço de rede a ser anunciado. R2 envia a sub-rede 172.30.3.0 para R1 usando a máscara de sub-rede na Serial0/0/0 para determinar o endereço de sub-rede a ser anunciado. </p> <p>R1 recebe a atualização 172.30.3.0 na interface Serial0/0/0, que tem um endereço de interface de 172.30.2.1/24. Como a atualização de roteamento e a interface pertencem à mesma rede principal, R1 aplica sua máscara /24 à rota 172.30.3.0.</p> <p><b>Clique nas Tabelas de roteamento de R1 e R3 na figura para compará-las.</b></p> <p>Observe que R1 tem três rotas para a rede principal 172.30.0.0, que foi dividida em sub-redes para /24 ou 255.255.255.0. R3 tem somente uma rota para a rede 172.30.0.0, e a rede não foi dividida em sub-redes. R3 tem a rede principal em sua tabela de roteamento. No entanto, seria um engano assumir que R3 não tem conectividade completa. R3 enviará todos os pacotes destinados às redes 172.30.1.0/24, 172.30.2.0/24 e 172.30.3.0/24 para R2, pois essas três redes pertencem à 172.30.0.0/16 e são alcançáveis através de R2.</p></content-text>
</page>
</topic>
<topic type="" id="tl0905040500">
<title><content-text>Vantagens e desvantagens da sumarização automática</content-text></title>
<page type="OneColumn" id="tl0905040501">
<content-media type="StaticGraphic" id="cm6027576615"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040500/tl0905040501/cm6027576615.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040500/tl0905040501/cm6027576615text.xml"/></content-media>
<content-text><p><b>Vantagens da sumarização automática</b></p> <p>Assim como ocorreu com o R2 na figura anterior, o RIP sumariza automaticamente as atualizações entre redes classful. Como a atualização de 172.30.0.0 é enviada por uma interface (Serial 0/0/1) em outra rede classful (192.168.4.0), o RIP envia somente uma única atualização para toda a rede classful, em vez de uma para cada uma das várias sub-redes. Esse processo é semelhante ao que fizemos quando sumarizamos várias rotas estáticas em uma única rota estática. Por que a sumarização automática é uma vantagem? </p> <ul><li> Atualizações de roteamento menores enviadas e recebidas, o que usa menos largura de banda para atualizações de roteamento entre R2 e R3. </li> <li> R3 tem uma única rota para a rede 172.30.0.0/16, independente de quantas sub-redes existam ou de como ela é dividida em sub-redes. Usar uma única rota resulta em um processo de busca mais rápido na tabela de roteamento para R3.</li></ul></content-text>
</page>
<page type="OneColumn" id="tl0905040502">
<content-media type="InteractiveGraphicHotspots" id="cm8512098222"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040500/tl0905040502/cm8512098222.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040500/tl0905040502/cm8512098222text.xml"/></content-media>
<content-text><p>Há alguma desvantagem na sumarização automática? Sim, quando há redes descontíguas configuradas na topologia.</p> <p><b>Desvantagem da sumarização automática</b></p> <p>Como você pode visualizar na figura, o esquema de endereçamento foi alterado. Essa topologia será usada para mostrar uma das principais desvantagens dos protocolos de roteamento classful, como RIPv1 - sua falta de suporte para redes descontíguas. </p> <p>Protocolos de roteamento classful não incluem a máscara de sub-rede nas atualizações de roteamento. As redes são automaticamente sumarizadas nos limites da rede principal, pois o roteador receptor não pode determinar a máscara da rota. Isso ocorre porque a interface receptora pode ter uma máscara diferente da máscara das rotas divididas em sub-redes. </p> <p>Observe que R1 e R3 têm sub-redes da rede principal 172.30.0.0/16, e R2 não. Essencialmente, R1 e R3 são roteadores de borda para 172.30.0.0/16 porque eles são separados por outra rede principal, 209.165.200.0/24. Essa separação cria uma rede descontígua, pois os dois grupos de sub-redes 172.30.0.0/24 são separados por pelo menos uma outra rede principal. 172.30.0.0/16 é uma rede descontígua. </p></content-text>
</page>
<page type="OneColumn" id="tl0905040503">
<content-media type="StaticGraphic" id="cm8024546921"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040500/tl0905040503/cm8024546921.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905040000/tl0905040500/tl0905040503/cm8024546921text.xml"/></content-media>
<content-text><p><b>Topologias descontíguas não convergem com RIPv1</b> </p> <p>A figura mostra a configuração RIP para cada roteador de acordo com a topologia. A configuração RIPv1 está correta, mas ela não pode determinar todas as redes dessa topologia descontígua. Para entender por que isso ocorre, lembre-se de que um roteador só anunciará endereços de redes principais por interfaces que não pertencem à rota anunciada. Como resultado, R1 não anunciará 172.30.1.0 ou 172.30.2.0 para R2 na rede 209.165.200.0. R3 não anunciará 172.30.100.0 ou 172.30.200.0 para R2 na rede 209.165.200.0. No entanto, os roteadores R1 e R3 anunciarão o endereço de rede principal 172.30.0.0.</p> <p>Qual é o resultado? Sem a inclusão da máscara de sub-rede na atualização de roteamento, RIPv1 não pode anunciar informações de roteamento específicas que permitirão que os roteadores estabeleçam a rota correta para as sub-redes 172.30.0.0/24.</p> <p><b>Clique nos botões </b><span class="cmd"><b>show ip route</b></span><b> para R1, R2 e R3 na figura e revise as rotas.</b></p> <ul><li> R1 não tem nenhuma rota para as redes locais conectadas a R3. </li> <li> R3 não tem nenhuma rota para as redes locais conectadas a R1.</li> <li> R2 tem dois caminhos de custos iguais para a rede 172.30.0.0. </li> <li> R2 fará balanceamento de carga do tráfego destinado a qualquer sub-rede de 172.30.0.0. Isso significa que R1 obterá metade do tráfego e R3 obterá a outra a metade independentemente do destino do tráfego ser ou não destinado a uma das suas redes locais. </li></ul> <p>No Capítulo 7, "RIPv2", você verá uma versão dessa topologia. Ela será usada para mostrar a diferença entre os roteamentos classful e classless.</p></content-text>
</page>
<page type="OneColumn" id="tl0905040504">
<content-media type="ActivityPKA" id="cm5980281860"><title><content-text></content-text></title><media ref="tl0905000000/tl0905040000/tl0905040500/tl0905040504/cm5980281860/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905040000/tl0905040500/tl0905040504/cm5980281860/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para implementar o esquema de endereçamento do Cenário B e explorar as vantagens e as desvantagens da sumarização automática. Instruções detalhadas são fornecidas na atividade. </p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905050000">
<title><content-text>Rota padrão e RIPv1</content-text></title>
<topic type="" id="tl0905050100">
<title><content-text>Topologia modificada: Cenário C</content-text></title>
<page type="OneColumn" id="tl0905050101">
<content-media type="InteractiveGraphicHotspots" id="cm1070061580"><title><content-text></content-text></title><media ref="tl0905000000/tl0905050000/tl0905050100/tl0905050101/cm1070061580.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905050000/tl0905050100/tl0905050101/cm1070061580text.xml"/></content-media>
<content-text><p><b>Adicionando acesso à Internet à topologia</b></p> <p>O RIP foi o primeiro protocolo de roteamento dinâmico e foi muito usado nas primeiras implementações entre clientes e ISPs, bem como entre ISPs diferentes. No entanto, nas redes atuais os clientes não têm necessariamente que trocar atualizações de roteamento com seus ISPs. Roteadores do cliente que se conectam a um ISP não precisam de uma listagem para todas as rotas na Internet. Em vez disso, esses roteadores têm uma rota padrão que envia todo o tráfego ao roteador ISP quando o roteador do cliente não tem uma rota para um destino. O ISP configura uma rota estática que aponta para o roteador do cliente para endereços que estão dentro da rede do cliente. </p> <p>No cenário C, R3 é o provedor de serviços com acesso à Internet, representado pela nuvem. R3 e R2 não trocam atualizações RIP. Em vez disso, R2 usa uma rota padrão para alcançar a rede local de R3 e todos os outros destinos que não estão listados em sua tabela de roteamento. R3 usa uma rota de sumarização estática para alcançar as sub-redes 172.30.1.0, 172.30.2.0 e 172.30.3.0.</p> <p>Para preparar a topologia, podemos deixar o endereçamento no local; é o mesmo que foi usado no Cenário B. No entanto, precisamos também concluir as seguintes etapas:</p> <p><b>Clique em configuração RIP na figura.</b></p> <p>1. Desabilite o roteamento RIP para a rede 192.168.4.0 em R2.</p> <p>2. Configure R2 com uma rota padrão estática para enviar o tráfego padrão para R3.</p> <p>3. Desabilite completamente o roteamento RIP em R3. </p> <p>4. Configure R3 com uma rota estática para as sub-redes 172.30.0.0.</p> <p><b>Clique na guia </b><span class="cmd"><b>show ip route</b></span><b> na figura do roteador correspondente para visualizar a saída de comando.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0905050200">
<title><content-text>Propagando a rota padrão no RIPv1</content-text></title>
<page type="OneColumn" id="tl0905050201">
<content-media type="StaticGraphic" id="cm2590209304"><title><content-text></content-text></title><media ref="tl0905000000/tl0905050000/tl0905050200/tl0905050201/cm2590209304.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905050000/tl0905050200/tl0905050201/cm2590209304text.xml"/></content-media>
<content-text><p>Para fornecer conectividade à Internet para todas as outras redes no domínio de roteamento RIP, a rota estática padrão precisa ser anunciada a todos os outros roteadores que usam o protocolo de roteamento dinâmico. Você poderia configurar uma rota estática padrão em R1 apontando para R2, mas essa técnica não é escalável. Com todos os roteadores adicionados ao domínio de roteamento RIP, você teria que configurar outra rota estática padrão. Por que não deixar o protocolo de roteamento fazer o trabalho para você?</p> <p>Em muitos protocolos de roteamento, inclusive no RIP, você pode usar o comando <span class="cmd"><b>default-information originate</b></span> no modo de configuração do roteador para especificar que esse roteador servirá para originar informações padrão propagando a rota estática padrão em atualizações RIP. Na figura, R2 foi configurado com o comando <span class="cmd"><b>default-information originate</b></span>. Observe que a saída de comando <span class="cmd"><b>debug ip rip</b></span> está enviando uma rota estática padrão "quad-zero" para R1.</p> <p><b>Clique em <span class="cmd">show ip route</span> na figura.</b></p> <p>Na tabela de roteamento de R1, você pode ver que há uma rota padrão candidata, conforme denotado pelo código <b><span class="cmd">R*</span></b>. A rota estática padrão em R2 foi propagada para R1 em uma atualização RIP. R1 tem conectividade à rede local em R3 e a todos os destinos na Internet.</p></content-text>
</page>
<page type="OneColumn" id="tl0905050202">
<content-media type="ActivityPKA" id="cm2641692402"><title><content-text></content-text></title><media ref="tl0905000000/tl0905050000/tl0905050200/tl0905050202/cm2641692402/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905050000/tl0905050200/tl0905050202/cm2641692402/icontext.xml"/></content-media>
<content-text><p>Utilize a Atividade do Packet Tracer para implementar o Cenário C com roteamento padrão e estático e para configurar o R2 para propagar uma rota padrão. Instruções detalhadas são fornecidas na atividade. </p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl0905060000">
<title><content-text>Laboratórios de configuração do RIPv1</content-text></title>
<topic type="" id="tl0905060100">
<title><content-text>Configuração básica RIP</content-text></title>
<page type="OneColumn" id="tl0905060101">
<content-media type="ActivityLab" id="cm3250463502"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060100/tl0905060101/cm3250463502/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060100/tl0905060101/cm3250463502/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você trabalhará com os comandos de configuração e verificação discutidos neste capítulo usando os mesmos três cenários. Você configurará roteamento RIP, verificará suas configurações, investigará o problema com redes descontíguas, observará a sumarização automática, configurará e propagará uma rota padrão.</p><p><b>Clique no ícone do laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0905060102">
<content-media type="ActivityPKA" id="cm8743710156"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060100/tl0905060102/cm8743710156/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060100/tl0905060102/cm8743710156/icontext.xml"/></content-media>
<content-text><p>Use essa Atividade do Packet Tracer 5.6.1 para repetir uma simulação do Laboratório 5.6.1. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p> <p><b>Clique no ícone do Packet Tracer para iniciar o Cenário A. Todos os cenários para esta simulação do laboratório prático podem ser iniciados a partir dos links abaixo.</b></p> <p><content-link target="E2_PTAct_5_6_1a.pka" type="internalfile">Cenário A</content-link></p> <p><content-link target="E2_PTAct_5_6_1b.pka" type="internalfile">Cenário B</content-link></p> <p><content-link target="E2_PTAct_5_6_1c.pka" type="internalfile">Cenário C</content-link></p></content-text>
</page>
</topic>
<topic type="" id="tl0905060200">
<title><content-text>Configuração avançada RIP</content-text></title>
<page type="OneColumn" id="tl0905060201">
<content-media type="ActivityLab" id="cm2995971215"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060200/tl0905060201/cm2995971215/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060200/tl0905060201/cm2995971215/icontext.xml"/></content-media>
<content-text><p>Nesta atividade de laboratório, você receberá um endereço de rede que deve ser dividido em sub-redes para completar o endereçamento da rede mostrada no diagrama de topologia. Uma combinação entre roteamentos RIPv1 e estático será obrigatória para que os hosts em redes que não estejam diretamente conectadas possam se comunicar.</p><p><b>Clique no ícone do laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0905060202">
<content-media type="ActivityPKA" id="cm6691523507"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060200/tl0905060202/cm6691523507/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060200/tl0905060202/cm6691523507/icontext.xml"/></content-media>
<content-text><p>Use essa Atividade do Packet Tracer 5.6.2 para repetir uma simulação do Laboratório 5.6.2. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl0905060300">
<title><content-text>Identificação e solução de problemas RIP</content-text></title>
<page type="OneColumn" id="tl0905060301">
<content-media type="ActivityLab" id="cm6463424098"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060300/tl0905060301/cm6463424098/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060300/tl0905060301/cm6463424098/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você começará carregando scripts de configuração em todos os roteadores. Esses scripts contêm erros que impedirão a comunicação fim-a-fim através da rede. Você precisará solucionar os problemas de cada roteador para determinar os erros de configuração e então utilizar os comandos apropriados para corrigir as configurações. Quando todos os erros de configuração forem corrigidos, todos os hosts na rede devem poder comunicar-se uns com os outros.</p><p><b>Clique no ícone do laboratório para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0905060302">
<content-media type="ActivityPKA" id="cm6643327348"><title><content-text></content-text></title><media ref="tl0905000000/tl0905060000/tl0905060300/tl0905060302/cm6643327348/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905060000/tl0905060300/tl0905060302/cm6643327348/icontext.xml"/></content-media>
<content-text><p>Use essa Atividade do Packet Tracer 5.6.3 para repetir uma simulação do Laboratório 5.6.3. Lembre-se, entretanto, de que o Packet Tracer não substitui um exercício prático em laboratório com equipamentos reais. </p> <p>Um resumo das instruções é fornecido na atividade. Use o PDF do laboratório para obter mais detalhes.</p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl0905070000">
<title><content-text>Resumo</content-text></title>
<topic type="" id="tl0905070100">
<title><content-text>Resumo e revisão</content-text></title>
<page type="OneColumn" id="tl0905070101">
<content-media type="StaticGraphic" id="cm8927353877"><title><content-text></content-text></title><media ref="tl0905000000/tl0905070000/tl0905070100/tl0905070101/cm8927353877.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905070000/tl0905070100/tl0905070101/cm8927353877text.xml"/></content-media>
<content-text><p><b>Resumo</b></p> <p>O RIP (versão 1) é um protocolo de roteamento de vetor de distância classless. O RIPv1 foi um dos primeiros protocolos de roteamento desenvolvido para roteamento de pacotes IP. O RIP usa a contagem de saltos para sua métrica, com uma métrica de 16 saltos significando que essa rota é inalcançável. Como resultado, o RIP só pode ser usado em redes com até quinze roteadores entre duas redes.</p> <p>As mensagens RIP são encapsuladas em um segmento do protocolo UDP, com portas de origem e de destino de 520. Os roteadores RIP enviam suas tabelas de roteamento completas aos seus vizinhos a cada 30 segundos, exceto as rotas relacionadas a regra de split horizon.</p> <p>O RIP é habilitado usando o comando <span class="cmd"><b>router rip</b></span> no prompt de configuração global. O comando <span class="cmd"><b>network</b></span> é usado para especificar quais interfaces no roteador serão habilitadas para RIP, junto com o endereço de rede classful de cada rede diretamente conectada. O comando <span class="cmd"><b>network</b></span> permite que a interface envie e receba atualizações RIP e também anuncia essa rede em atualizações RIP para outros roteadores. </p> <p>O comando <span class="cmd"><b>debug ip rip</b></span> pode ser usado para exibir as atualizações RIP enviadas e recebidas pelo roteador. Para impedir que as atualizações RIP sejam enviadas por uma interface, como em uma rede local na qual não há nenhum outro roteador, é necessário usar o comando<span class="cmd"><b> passive-interface</b></span>. </p> <p>As entradas RIP são exibidas na tabela de roteamento com o código fonte de <b>R</b> e têm uma distância administrativa de 120. As rotas padrão são propagadas no RIP configurando uma rota estática padrão e usando o comando <span class="cmd"><b>default-information originate</b></span> no RIP.</p> <p>O RIPv1 sumariza sub-redes automaticamente para seus endereços classful ao enviar uma atualização por uma interface que está em uma rede principal diferente da rede principal que contém o endereço de sub-rede da rota. Como o RIPv1 é um protocolo de roteamento classful, a máscara de sub-rede não é incluída na atualização de roteamento. Quando um roteador recebe uma atualização de roteamento RIPv1, o RIP deve determinar a máscara de sub-rede dessa rota. Se a rota pertencer à mesma rede classful principal da atualização, o RIPv1 aplicará a máscara de sub-rede da interface que recebeu a atualização. Se a rota pertencer a uma rede classful principal diferente da rede da interface receptora, o RIPv1 aplicará a máscara classful padrão.</p> <p>O comando <span class="cmd"><b>show ip protocols</b></span> pode ser usado para exibir informações para qualquer protocolo de roteamento habilitado no roteador. Sobre o RIP, esse comando exibe informações de temporizador, status da sumarização automática, quais redes estão habilitadas nesse roteador para RIP e outras informações.</p> <p>Como o RIPv1 é um protocolo de roteamento classful, ele não suporta redes descontíguas nem VLSM. Esses dois tópicos são discutidos no Capítulo 7, "RIPv2".</p></content-text>
</page>
<page type="FullScreen" id="tl0905070102">
<content-media type="ChapterSummary" id="cm2768262517"><title><content-text></content-text></title><media ref="tl0905000000/tl0905070000/tl0905070100/tl0905070102/cm2768262517.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905070000/tl0905070100/tl0905070102/cm2768262517text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl0905070103">
<content-media type="ActivityPKA" id="cm8761742000"><title><content-text></content-text></title><media ref="tl0905000000/tl0905070000/tl0905070100/tl0905070103/cm8761742000/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl0905000000/tl0905070000/tl0905070100/tl0905070103/cm8761742000/icontext.xml"/></content-media>
<content-text><p>A atividade avançada de integração das habilidades no Packet Tracer deste capítulo integra todos os conhecimentos e todas as habilidades que você adquiriu nos dois primeiros capítulos deste curso e adiciona conhecimentos e habilidades relacionadas ao RIPv1. </p> <p>Nesta atividade, você cria uma rede do zero. Começando com um espaço de endereçamento e requisitos de rede, você deve implementar um projeto de rede que atenda às especificações. Em seguida, você implementa uma configuração de roteamento RIPv1 efetiva com roteamento padrão integrado. Instruções detalhadas são fornecidas na atividade. </p> <p><content-link target="E2_PTAct_5_7_1_Directions.pdf" type="internalfile">Instruções de integração das habilidades no Packet Tracer (PDF)</content-link></p><p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
<page type="OneColumn" id="tl0905070104">
<content-media type="StaticGraphic" id="cm8291557991"><title><content-text></content-text></title><media ref="tl0905000000/tl0905070000/tl0905070100/tl0905070104/cm8291557991.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl0905000000/tl0905070000/tl0905070100/tl0905070104/cm8291557991text.xml"/></content-media>
<content-text><p><b>Para Saber Mais</b></p> <p>RFCs (Request for Comments) são uma série de documentos enviados para a IETF (Internet Engineering Task Force) com o objetivo de propor um padrão de Internet ou comunicar novos conceitos, informações ou até mesmo humor. RFC 1058 é a RFC original para RIP escrito por Charles Hedrick. </p> <p>As RFCs podem ser acessadas em vários sites, inclusive <content-link target="http://www.ietf.org" type="external">www.ietf.org</content-link>. Leia toda a RFC 1058 ou partes dela. Muitas das informações já serão do seu conhecimento, mas você encontrará também algumas informações adicionais. </p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl0905080000">
<title><content-text>Teste</content-text></title>
<topic type="" id="tl0905080100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl0905080101">
<content-media type="ChapterQuiz" id="cm9587363550"><title><content-text></content-text></title><media ref="tl0905000000/tl0905080000/tl0905080100/tl0905080101/cm9587363550/" mime="shockwave/flash" scale="true" type="file" width="100%" height="100%" external="tl0905000000/tl0905080000/tl0905080100/tl0905080101/cm9587363550/icontext.xml"/></content-media>
<content-text><p><b>Clique no ícone do Teste para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
</chapter>

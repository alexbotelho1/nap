<chapter type="" id="tl1407000000">
<title><content-text>Serviços de endereçamento IP</content-text></title>
<section type="ChapterIntroduction" id="tl1407000000">
<title><content-text>Introdução do capítulo</content-text></title>
<topic type="" id="tl1407000100">
<title><content-text>Introdução</content-text></title>
<page type="OneColumn" id="tl1407000101">
<content-media type="ChapterIntroduction" id="cm9929790282">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407000000/tl1407000100/tl1407000101/cm9929790282.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407000000/tl1407000100/tl1407000101/cm9929790282text.xml"/></content-media>
<content-text><p>A Internet e as tecnologias relacionadas ao IP passaram por um rápido crescimento. Uma razão para o crescimento deve-se, em parte, à flexibilidade do design original. Entretanto, este design não previu a popularidade da Internet e a demanda resultante por endereços IP. Por exemplo, cada host e cada dispositivo na Internet exige um endereço do exclusivo IP versão 4 (<content-link target="{A2FC74BA-9345-4EEF-9664-0AD95F5A5C92}" type="glossary">IPv4</content-link>). Devido ao drástico crescimento, o número de endereços IP disponíveis está se esgotando. </p> <p>Para lidar com o esgotamento dos endereços IP, foram desenvolvidas diversas soluções de curto prazo. As duas soluções de curto prazo são os endereços privados e a Tradução de Endereço de Rede (NAT, Network Address Translation). </p> <p>Um host interno normalmente recebe seu endereço IP, máscara de sub-rede, endereço IP de gateway padrão, endereço IP de servidor DNS e outras informações de um servidor de Protocolo de Configuração de Host Dinâmico (DHCP, Dynamic Host Configuration Protocol). Em vez de fornecer hosts internos com endereços IP de Internet válidos, o servidor DHCP geralmente fornece endereços IP de um conjunto privado de endereços. O problema é que estes hosts ainda podem exigir endereços IP válidos para acessar os recursos da Internet. É aí que entra a NAT.</p>  <p>A NAT permite que os hosts de rede internos obtenham temporariamente um endereço IP de Internet legítimo enquanto acessam os recursos da Internet. Quando o tráfego solicitado retorna, o endereço IP legítimo é adaptado e disponibilizado para a solicitação seguinte da Internet feita por um host interno. Usando a NAT, os administradores de rede precisam somente de um ou poucos endereços IP para serem fornecidos aos hosts pelo roteador, em vez de um endereço IP exclusivo para cada cliente que entra na rede. Embora pareça ineficiente, o processo é, na verdade, muito eficiente, porque o tráfego do host acontece de forma muito rápida.</p> <p>Embora os endereços privados com o DHCP e a NAT tenham ajudado a reduzir a necessidade de endereços IP, estima-se que nós esgotaremos os endereços IPv4 exclusivos por volta de 2010. Por essa razão, em meados dos anos 90, o IETF solicitou propostas para um novo esquema de endereçamento IP. O grupo de trabalho IP Next Generation (<content-link target="{BBC0327C-A3E3-428A-A9BF-187065EB517D}" type="glossary">IPng</content-link>, Última Geração de IP) reagiu. Por volta do ano de 1996, o IETF começou a liberar diversas RFCs definindo o <content-link target="{D0CBF8A2-CE70-4F3D-8662-0FB584419C75}" type="glossary">IPv6</content-link>. </p> <p>O principal recurso do IPv6 sendo adotado hoje em dia é o maior espaço de endereço: os endereços no IPv6 possuem um tamanho de 128 bits contra os 32 bits do IPv4.</p> <p>Este capítulo descreve como implementar o DHCP, a NAT e o IPv6 em redes corporativas.</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1407010000">
<title><content-text>DHCP</content-text></title>
<topic type="" id="tl1407010100">
<title><content-text>Apresentando o DHCP</content-text></title>
<page type="OneColumn" id="tl1407010101">
<content-media type="AnimationPartialScreen" id="cm9402876046">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010100/tl1407010101/cm9402876046.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010100/tl1407010101/cm9402876046text.xml"/></content-media>
<content-text><p><b>O que é DHCP?</b></p> <p>Cada dispositivo que se conecta a uma rede precisa de um endereço IP. Os administradores de rede atribuem endereços IP estáticos a roteadores, servidores e a outros dispositivos de rede cujas localizações (físicas e lógicas) não tendem a mudar. Os administradores digitam os endereços IP estáticos manualmente quando configuram os dispositivos para entrar na rede. Os endereços estáticos também permitem que os administradores gerenciem tais dispositivos remotamente.</p> <p>Porém, os computadores em uma organização mudam frequentemente de localização, tanto física quanto logicamente. Os administradores não conseguem atribuir novos endereços IP cada vez que um funcionário se muda para um escritório ou cubículo diferente. Os clientes com desktop não exigem um endereço estático. Em vez disso, uma estação de trabalho pode utilizar qualquer endereço dentro de um intervalo de endereços. Esse intervalo está normalmente dentro de uma sub-rede IP. Uma estação de trabalho dentro de uma sub-rede específica pode receber qualquer endereço dentro de um intervalo específico. Atribui-se um valor a outros itens, tais como a máscara de sub-rede, o gateway padrão e o servidor do Sistema de Resolução de Nome de Domínio (DNS, Domain Name System), valor esse que é igual para a sub-rede ou para toda a rede administrada. Por exemplo, todos os hosts dentro da mesma sub-rede receberão endereços IP de host diferentes, mas receberão a mesma máscara de sub-rede e o mesmo endereço IP de gateway padrão. </p> <p>Você viu no CCNA Exploration, Fundamentos de rede, que o DHCP realiza o processo de atribuir novos endereços IP de modo quase transparente. O DHCP atribui endereços IP e outras informações de configuração de rede importantes dinamicamente. Como os clientes com desktop geralmente compõem o lote de nós de rede, o DHCP é uma ferramenta que economiza tempo e extremamente útil para os administradores de rede. A RFC 2131 descreve o DHCP.</p> <p>Os administradores normalmente preferem que um servidor de rede ofereça serviços de DHCP, porque tais soluções são escaláveis e relativamente fáceis de gerenciar. Entretanto, em uma filial pequena ou local de SOHO, um roteador Cisco pode ser configurado para prestar serviços de DHCP sem a necessidade de um servidor dedicado caro. Um conjunto de recursos do IOS Cisco chamado Easy IP oferece um servidor DHCP completo e opcional. </p></content-text>
</page>
</topic>
<topic type="" id="tl1407010200">
<title><content-text>Operação de DHCP</content-text></title>
<page type="OneColumn" id="tl1407010201">
<content-media type="InteractiveGraphicHotspots" id="cm3631719746">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010200/tl1407010201/cm3631719746.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010200/tl1407010201/cm3631719746text.xml"/></content-media>
<content-text><p><b>Operação de DHCP</b></p> <p>A tarefa mais importante realizada por um servidor DHCP é fornecer endereços IP aos clientes. O DHCP inclui três mecanismos de alocação de endereço diferentes para fornecer flexibilidade ao atribuir endereços IP: </p> <p><ul><li><b>Alocação manual:</b> O administrador atribui um endereço IP pré-alocado ao cliente e o DHCP somente comunica o endereço IP ao dispositivo. </li><li><b>Alocação automática:</b> O DHCP atribui automaticamente um endereço IP estático permanente a um dispositivo, selecionando-o de um conjunto de endereços disponíveis. Não existe empréstimo e o endereço é atribuído permanentemente a um dispositivo. </li><li><b>Alocação dinâmica:</b> O DHCP atribui ou empresta automática e dinamicamente um endereço IP a partir de um conjunto de endereços por um período limitado escolhido pelo servidor, ou até que o cliente diga ao servidor DHCP que não precisa mais do endereço. </li></ul></p> <p>Esta seção aborda a alocação dinâmica.</p> <p>O DHCP trabalha em um modo cliente/servidor e funciona como qualquer outra relação de cliente/servidor. Quando um PC se conecta a um servidor DHCP, o servidor atribui ou empresta um endereço IP a esse PC. O PC se conecta à rede com esse endereço IP emprestado até que tal empréstimo expire. O host deve entrar em contato com o servidor DHCP periodicamente para estender o empréstimo. Este mecanismo de empréstimo assegura que os hosts que se mudam ou se desligam não se prendam a endereços dos quais não precisam. O servidor DHCP devolve esses endereços ao conjunto de endereços e os realoca conforme o necessário.</p> <p><b>Clique no botão Detecção na figura.</b></p> <p>Quando o cliente inicializa ou deseja entrar de outro modo na rede, ele conclui quatro etapas para obtenção de um empréstimo. Na primeira etapa, o cliente transmite uma mensagem DHCPDISCOVER em broadcast. A mensagem DHCPDISCOVER localiza os servidores DHCP na rede. Como o host não tem nenhuma informação de IP válida na inicialização, ele utilizará os endereços de broadcast de L2 e L3 para comunicar-se com o servidor. </p> <p><b>Clique no botão Oferta na figura.</b></p> <p>Quando o servidor DHCP recebe uma mensagem DHCDISCOVER, ele localiza um endereço IP disponível para empréstimo, cria uma entrada de ARP consistindo no endereço MAC do host solicitante e o endereço IP emprestado, e transmite uma oferta de associação com uma mensagem DHCPOFFER. A mensagem DHCPOFFER é enviada como um unicast, utilizando o endereço MAC de L2 do servidor como o endereço de origem e o endereço de L2 do cliente como o destino.</p> <p><b>Nota:</b> Sob certas circunstâncias, a troca de mensagens do DHCP do servidor pode ser transmitida por broadcast e não por unicast.</p> <p><b>Clique no botão Solicitação na figura.</b></p> <p>Quando o cliente recebe o DHCPOFFER do servidor, ele retorna uma mensagem DHCPREQUEST. Essa mensagem tem dois objetivos: emprestar a origem, a renovação e a verificação. Quando usado para emprestar uma origem, o DHCPREQUEST do cliente está solicitando que as informações de IP sejam verificadas logo após sua atribuição. A mensagem fornece a verificação de erros para assegurar que a atribuição ainda seja válida. O DHCPREQUEST também serve como um aviso de aceitação de associação para o servidor selecionado e uma recusa implícita a quaisquer outros servidores que possam ter enviado uma oferta de associação para o host. </p> <p>Muitas redes corporativas utilizam diversos servidores DHCP. A mensagem DHCPREQUEST é enviada na forma de broadcast para informar este servidor DHCP e qualquer outro servidor DHCP sobre a oferta aceita.</p> <p><b>Clique no botão Confirmação na figura.</b></p> <p>Ao receber a mensagem DHCPREQUEST, o servidor verifica as informações de empréstimo, cria uma nova entrada de ARP para o empréstimo do cliente e responde com uma mensagem DHCPACK de unicast. A mensagem DHCPACK é uma duplicata da mensagem DHCPOFFER, exceto por uma mudança no campo de tipo de mensagem. Quando o cliente recebe a mensagem DHCPACK, ele registra as informações de configuração e executa uma busca de ARP para o endereço atribuído. Caso não receba uma resposta, ele saberá que o endereço IP é válido e começa a usá-lo como seu. </p> <p>Os clientes emprestam as informações do servidor por um período definido administrativamente. Os administradores configuram os servidores DHCP para definir os tempos limite dos empréstimos em intervalos diferentes. A maioria dos ISPs e grandes redes utiliza durações de empréstimo padrão de até três dias. Quando o empréstimo expira, o cliente deve solicitar outro endereço, embora já receba normalmente a atribuição do mesmo endereço.</p> <p>A mensagem DHCPREQUEST também abrange o processo de DHCP dinâmico. As informações de IP enviadas no DHCPOFFER podem ter sido oferecidas a outro cliente durante a alocação dinâmica. Cada servidor DHCP cria conjuntos de endereços IP e parâmetros associados. Os conjuntos são dedicados a sub-redes IP lógicas e individuais. Os conjuntos permitem a resposta de diversos servidores DHCP e a mobilidade dos clientes de IP. Caso haja resposta de diversos servidores, um cliente poderá escolher apenas uma das ofertas.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010300">
<title><content-text>BOOTP e DHCP</content-text></title>
<page type="OneColumn" id="tl1407010301">
<content-media type="StaticGraphic" id="cm5563077473">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010300/tl1407010301/cm5563077473.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010300/tl1407010301/cm5563077473text.xml"/></content-media>
<content-text><p><b>BOOTP e DHCP</b></p> <p>O Protocolo Boostrap (<content-link target="{7B7069EE-B0A5-4E91-8A8E-6172DF15C3BD}" type="glossary">BOOTP</content-link>, Bootstrap Protocol), definido na RFC 951, é o antecessor do DHCP e compartilha algumas características operacionais. O BOOTP é um modo de fazer o download do endereço e inicializar as configurações para estações de trabalho sem disco. Uma estação de trabalho sem disco não possui um disco rígido ou um sistema operacional. Por exemplo, muitos sistemas de caixa registradora automatizados em seu supermercado local são exemplos de estações de trabalho sem disco. O DHCP e o BOOTP são baseados em cliente/servidor e usam as portas UDP 67 e 68. Essas portas são conhecidas ainda como portas de BOOTP. </p> <p>O DHCP e BOOTP possuem dois componentes, conforme mostrado na figura. O servidor é um host com um endereço IP estático que aloca, distribui e gerencia o IP e as atribuições dos dados de configuração. Cada alocação (o IP e os dados de configuração) é armazenada no servidor em um conjunto de dados chamado de associação. O cliente é qualquer dispositivo que utiliza o DHCP como um método para obter o endereçamento IP ou informações de configuração de suporte. </p> <p>Para entender as diferenças funcionais entre o BOOTP e o DHCP, considere os quatro parâmetros de IP básicos necessários para unir uma rede: </p> <p><ul><li>Endereço IP </li><li>Endereço de gateway </li><li>Máscara de sub-rede </li><li>Endereço do servidor DNS</li></ul></p> <p>Existem três diferenças principais entre o DHCP e o BOOTP: </p> <p><ul><li>A principal diferença é que o BOOTP foi criado para a pré-configuração manual das informações de host em um banco de dados de servidor, enquanto o DHCP permite uma alocação dinâmica de endereços de rede e configurações para hosts recentemente anexados. Quando um cliente de BOOTP solicita um endereço IP, o servidor de BOOTP procura uma tabela predefinida para uma entrada que corresponda ao endereço MAC para o cliente. Se houver uma entrada, o endereço IP correspondente a essa entrada será devolvido ao cliente. Isso significa que a associação entre o endereço MAC e o endereço IP já deve ter sido configurada no servidor de BOOTP.</li><li>O DHCP permite a recuperação e a realocação de endereços de rede através de um mecanismo de empréstimo. Especificamente, o DHCP define os mecanismos pelos quais podem ser atribuídos aos clientes um endereço IP por um período de empréstimo finito. Este período de empréstimo permite uma nova atribuição posterior do endereço IP a outro cliente, ou que o cliente obtenha outra atribuição caso se mude para outra sub-rede. Os clientes também podem renovar os empréstimos e manter o mesmo endereço IP. O BOOTP não utiliza empréstimos. Seus clientes reservaram o endereço IP que não pode ser atribuído a qualquer outro host. </li><li>O BOOTP fornece uma quantidade limitada de informações a um host. O DHCP fornece parâmetros de configuração de IP adicionais, tais como o WINS e o nome de domínio. </li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1407010302">
<content-media type="StaticGraphic" id="cm4887772734">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010300/tl1407010302/cm4887772734.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010300/tl1407010302/cm4887772734text.xml"/></content-media>
<content-text><p><b>Formato de mensagem DHCP</b></p> <p>Os desenvolvedores de DHCP precisaram manter a compatibilidade com o BOOTP e, consequentemente, utilizaram o mesmo formato de mensagem BOOTP. Entretanto, como o DHCP possui mais funcionalidades que o BOOTP, o campo de opções do DHCP foi adicionado. Ao comunicar-se com clientes de BOOTP mais antigos, o campo de opções do DHCP é ignorado.</p> <p>A figura mostra o formato de uma mensagem de DHCP. Os campos são:</p> <p><ul><li><b>Código de operação</b><b> (OP, Operation Code)</b> - Especifica o tipo genérico da mensagem. Um valor de 1 indica uma mensagem de solicitação; um valor de 2 indica uma mensagem de resposta.</li><li><b>Tipo de hardware</b> - Identifica o tipo de hardware utilizado na rede. Por exemplo, 1 é a Ethernet, 15 é o Frame Relay e 20 é uma linha serial. Esses são os mesmos códigos utilizados nas mensagens de ARP.</li><li><b>Tamanho do<content-link target="{5E19C782-5C80-4A00-B827-4624A1D4A74E}" type="glossary"> endereço de hardware</content-link></b> - 8 bits para especificar o tamanho do endereço.</li><li><b>Saltos </b>- Definido como 0 por um cliente antes de transmitir uma solicitação e utilizado por agentes de retransmissão para controlar o encaminhamento de mensagens do DHCP.</li><li><b>Identificador de transações</b> - Identificação de 32 bits gerada pelo cliente para permitir a correspondência da solicitação com as respostas recebidas dos servidores DHCP.</li><li><b>Segundos</b> - Número de segundos decorridos desde que um cliente começou a obter ou renovar um empréstimo. Servidores DHCP ocupados utilizam este número para priorizar as respostas quando diversas solicitações do cliente estiverem pendentes.</li><li><b>Flags (sinalizadores)</b> - Apenas um dos 16 bits é utilizado, o qual é a flag (sinalizador) de broadcast. Um cliente que não conhece seu endereço IP ao enviar uma solicitação, define a flag em 1. Esse valor diz ao servidor DHCP ou agente de retransmissão que recebe a solicitação que ele deve enviar a resposta em forma de broadcast. </li><li><b>Endereço IP do cliente</b> - O cliente coloca seu próprio endereço IP neste campo somente se tiver um endereço IP válido enquanto estiver no estado associado; caso contrário, ele define o campo em 0. O cliente somente pode utilizar esse campo quando seu endereço for realmente válido e utilizável, não durante o processo de obtenção de um endereço. </li><li><b>Seu endereço IP</b> - O endereço IP que o servidor atribui ao cliente.</li><li><b>Endereço IP do servidor</b> - Endereço do servidor que o cliente deve utilizar para a próxima etapa no processo de bootstrap, que pode ou não ser o servidor que envia essa resposta. O servidor de origem sempre inclui seu próprio endereço IP em um campo especial chamado de opção de DHCP do Identificador de Servidor. </li><li><b>Endereço IP de gateway</b> - Faz o roteamento das mensagens de DHCP quando os agentes de retransmissão de DHCP estão envolvidos. O endereço de gateway facilita as comunicações de solicitações e respostas de DHCP entre o cliente e um servidor que estejam em sub-redes ou redes diferentes.</li><li><b>Endereço de hardware de cliente</b> - Especifica a camada física do cliente.</li><li><b>Nome de servidor</b> - O servidor que envia uma mensagem DHCPOFFER ou DHCPACK pode opcionalmente colocar seu nome neste campo. Esse nome pode ser um apelido de texto simples ou um nome de domínio de DNS, tal como dhcpserver.netacad.net.</li><li><b>Nome de arquivo de inicialização</b> - Utilizado opcionalmente por um cliente para solicitar um tipo específico de arquivo de inicialização em uma mensagem DHCPDISCOVER. Utilizado por um servidor em uma mensagem DHCPOFFER para especificar por completo um diretório de arquivos de inicialização e um nome de arquivo.</li><li><b>Opções</b> - Contém as opções de DHCP, incluindo os diversos parâmetros necessários para a operação básica de DHCP. Esse campo varia em tamanho. Tanto o cliente quanto o servidor podem utilizar esse campo.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1407010303">
<content-media type="AnimationPartialScreen" id="cm6471917777">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010300/tl1407010303/cm6471917777.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010300/tl1407010303/cm6471917777text.xml"/></content-media>
<content-text><p><b>Métodos de detecção e oferta de DHCP</b></p> <p>Estas figuras fornecem detalhes do conteúdo do pacote das mensagens de detecção e oferta do DHCP. </p> <p>Quando um cliente deseja entrar na rede, ele solicita os valores de endereçamento do servidor DHCP da rede. Se um cliente estiver configurado para receber suas configurações de IP dinamicamente, ele transmitirá uma mensagem DHCPDISCOVER em sua sub-rede física local quando for inicializado ou quando perceber uma conexão de rede ativa. Como o cliente não tem como saber a sub-rede para a qual ele pertence, o DHCPDISCOVER será um broadcast de IP (endereço IP de destino de 255.255.255.255). O cliente não possui um endereço IP configurado, desse modo o endereço IP de origem de 0.0.0.0 é utilizado. Como pode ver na figura, o endereço IP do cliente (CIADDR), o endereço de gateway padrão (GIADDR) e a máscara de sub-rede estão marcadas com pontos de interrogação.</p> <p><b>Clique no botão Oferta de DHCP na figura.</b></p> <p>O servidor DHCP gerencia a alocação dos endereços IP e responde às solicitações de configuração dos clientes. </p> <p>Quando o servidor DHCP recebe a mensagem DHCPDISCOVER, ele responde com uma mensagem DHCPOFFER. Esta mensagem contém as informações de configuração iniciais para o cliente, incluindo o endereço MAC do cliente, seguido pelo endereço IP que o servidor oferece, a máscara de sub-rede, a duração do empréstimo e o endereço IP do servidor DHCP que faz a oferta. A máscara de sub-rede e o gateway padrão são especificados no campo de opções: opções de máscara de sub-rede e de roteador, respectivamente. A mensagem DHCPOFFER pode ser configurada para incluir outras informações, como o tempo de renovação do empréstimo, o servidor de nomes de domínio e o Nome Serviço <content-link target="{750B79DE-7275-411F-8249-A4E30CA96827}" type="glossary">NetBIOS</content-link> (Microsoft Windows Internet Name Service [Microsoft WINS]). </p> <p>O servidor determina a configuração com base no endereço de hardware do cliente, conforme especificado no campo CHADDR. </p> <p>Conforme mostrado no diagrama, o servidor DHCP respondeu à mensagem DHCPDISCOVER atribuindo os valores ao CIADDR e à máscara de sub-rede. </p> <p>Os administradores configuraram os servidores DHCP para que atribuam os endereços de conjuntos predefinidos. A maioria dos servidores DHCP também permitem que o administrador defina especificamente quais endereços MAC do cliente podem ser atendidos e os atribui sempre ao mesmo endereço IP automaticamente. </p> <p>O DHCP utiliza o Protocolo de Datagrama do Usuário (UDP, User Datagram Protocol) como seu protocolo de transporte. O cliente envia mensagens ao servidor na porta 67. O servidor envia mensagens ao cliente na porta 68.</p> <p>O cliente e o servidor confirmam as mensagens e o processo é concluído. O cliente somente define o CIADDR quando um host estiver em um estado associado, o que significa que o cliente confirmou e está utilizando o endereço IP. </p> <p>Para obter mais informações sobre o DHCP, veja a seção "Cisco IOS DHCP Server" no site: <content-link target="http://www.cisco.com/en/US/docs/ios/12_0t/12_0t1/feature/guide/Easyip2.html" type="external">http://www.cisco.com/en/US/docs/ios/12_0t/12_ot1/feature/guide/Easyip2.html</content-link> (em inglês).</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010400">
<title><content-text>Configurando um servidor DHCP</content-text></title>
<page type="OneColumn" id="tl1407010401">
<content-media type="InteractiveGraphicHotspots" id="cm2951434100">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010400/tl1407010401/cm2951434100.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010400/tl1407010401/cm2951434100text.xml"/></content-media>
<content-text><p><b>Configurando um servidor DHCP</b></p> <p>Roteadores Cisco que executam o software IOS Cisco fornecem suporte completo para que um roteador atue como um servidor DHCP. O servidor DHCP do IOS Cisco atribui e gerencia endereços IP de conjuntos de endereços especificados dentro do roteador para clientes DHCP. </p> <p>As etapas para configurar um roteador como um servidor DHCP são as seguintes:</p> <p><b>Etapa 1.</b> Definir um intervalo de endereços que o DHCP não deve alocar. Esses endereços são endereços estáticos geralmente reservados para a interface do roteador, endereço IP de gerenciamento de switch, servidores e impressoras de rede locais. </p> <p><b>Etapa 2.</b> Criar o conjunto de endereços DHCP utilizando o comando <span class="cmd"><b>ip dhcp pool</b></span>.</p> <p><b>Etapa 3.</b> Configurar as especificidades do conjunto.</p> <p>Você deve especificar os endereços IP que o servidor DHCP não deve atribuir aos clientes. Normalmente, alguns endereços IP pertencem a dispositivos de rede estáticos, tais como servidores ou impressoras. O DHCP não deve atribuir esses endereços IP a outros dispositivos. Uma prática recomendada é configurar endereços excluídos no modo de configuração global antes de criar o conjunto de endereços DHCP. Isto garante que o DHCP não atribuirá acidentalmente os endereços reservados. Para excluir os endereços específicos, utilize o comando <span class="cmd"><b>ip dhcp excluded-address</b></span>.</p> <p><b>Clique no botão Conjunto de endereços DHCP na figura.</b></p> <p>A configuração de um servidor DHCP envolve a definição de um conjunto de endereços a serem atribuídos. O comando <span class="cmd"><b>ip dhcp pool</b></span> cria um conjunto com o nome especificado e coloca o roteador no modo de configuração de DHCP, o qual é identificado pelo prompt <span class="cmd">Router(dhcp-config)#</span>. </p> <p><b>Clique no botão Tarefas DHCP na figura.</b></p> <p>Esta figura relaciona as tarefas para concluir a configuração do conjunto de endereços DHCP. Algumas delas são opcionais, enquanto as outras devem ser configuradas. </p> <p>Você deve configurar os endereços disponíveis e especificar o número e máscara de rede da sub-rede do conjunto de endereços de DHCP. Utilize o comando <span class="cmd"><b>network</b></span> para definir o intervalo de endereços disponíveis. </p> <p>Você também deve definir o gateway padrão ou o roteador a serem utilizados pelos clientes com o comando <span class="cmd"><b>default-router</b></span>. Normalmente, o gateway é a interface de rede local do roteador. É necessário um endereço, mas você pode listar até oito endereços.</p> <p>Os comandos seguintes do conjunto de endereços DHCP são considerados opcionais. Por exemplo, você pode configurar o endereço IP do servidor DNS que está disponível para um cliente DHCP usando o comando <span class="cmd"><b>dns-server</b></span>. Quando configurado, é necessário um endereço, mas você pode listar até oito endereços.</p> <p>Outros parâmetros incluem a configuração da duração do empréstimo de DHCP. A configuração padrão é definitiva, mas você pode alterá-la usando o comando <span class="cmd"><b>lease</b></span>. Você também pode configurar um servidor NetBIOS WINS disponível para um cliente DHCP da Microsoft. Normalmente, isto seria configurado em um ambiente que suporta os clientes anteriores ao Windows 2000. Como a maioria das instalações agora possuem clientes com o sistema operacional do Windows mais recente, esse parâmetro não é exigido.</p> <p><b>Clique no botão Exemplo de DHCP na figura.</b></p> <p>Esta figura exibe um exemplo de configuração com os parâmetros de DHCP básicos configurados no roteador R1.</p> <p><b>Desabilitando o DHCP</b></p> <p>O serviço de DHCP é habilitado por padrão nas versões do software IOS Cisco que podem suportá-lo. Para desabilitar o serviço, utilize o comando <span class="cmd"><b>no service dhcp</b></span>. Utilize o comando de configuração global <span class="cmd"><b>service dhcp</b></span> para reabilitar o processo do servidor DHCP. Habilitar o serviço não terá efeito algum se os parâmetros não estiverem configurados.</p></content-text>
</page>
<page type="OneColumn" id="tl1407010402">
<content-media type="StaticGraphic" id="cm7669371726">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010400/tl1407010402/cm7669371726.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010400/tl1407010402/cm7669371726text.xml"/></content-media>
<content-text><p><b>Verificando o DHCP</b></p> <p>Para ilustrar como um roteador Cisco pode ser configurado para fornecer serviços de DHCP, consulte a figura. O PC1 não foi ativado e, desse modo, não possui um endereço IP. </p> <p>O roteador R1 foi configurado com os seguintes comandos:</p> <span class="cmd"><p><b>ip dhcp excluded-address 192.168.10.1 192.168.10.9</b></p></span> <span class="cmd"><p><b>ip dhcp excluded-address 192.168.10.254</b></p></span> <span class="cmd"><p><b>ip dhcp pool LAN-POOL-1</b></p></span> <span class="cmd"><p><b> network 192.168.10.0 255.255.255.0</b></p></span> <span class="cmd"><p><b> default-router 192.168.10.1</b></p></span> <span class="cmd"><p><b> domain-name span.com</b></p></span> <p>Para verificar a operação do DHCP, utilize o comando <span class="cmd"><b>show ip dhcp binding</b></span>. Esse comando exibe uma lista de todas as associações de endereços IP a endereços MAC que foram fornecidas pelo serviço de DHCP. </p> <p>Para verificar quais mensagens estão sendo recebidas ou enviadas pelo roteador, utilize o comando <b><span class="cmd">show ip dhcp server statistics</span> </b>. Esse comando exibe informações de contagem relacionadas ao número de mensagens de DHCP que foram enviadas e recebidas.</p> <p><b>Clique no botão DHCP-1 na figura.</b></p> <p>Como você pode ver na figura, atualmente não existem associações ou estatísticas sendo exibidas.</p> <p>Agora, suponha que o PC1 foi ativado e concluiu seu processo de inicialização.</p> <p><b>Clique no botão DHCP-2 na figura.</b></p> <p>Observe que as informações de associação mostram agora que o endereço IP da 192.168.10.10 foi associado a um endereço MAC. As estatísticas também exibem a atividade do DHCPDISCOVER, DHCPREQUEST, DHCPOFFER e DHCPACK.</p> <p><b>Clique no botão Cliente DHCP na figura.</b></p> <p>O comando <span class="cmd"><b>ipconfig /all</b></span> exibe os parâmetros configurados do TCP/IP no PC1. Como o PC1 foi conectado ao segmento de rede 192.168.10.0 /24, ele recebeu automaticamente um endereço IP, um sufixo DNS e o gateway padrão daquele conjunto. Não é exigida nenhuma configuração de interface DHCP. Se um PC for conectado a um segmento de rede que tenha um conjunto de endereços DHCP disponível, ele poderá obter um endereço IP automaticamente.</p> <p>Assim, como o PC2 recebe um endereço IP? O roteador R1 teria que ser configurado para fornecer um conjunto de endereços DHCP de 192.168.11.0 /24 conforme segue:</p> <span class="cmd"><p><b>ip dhcp excluded-address 192.168.11.1 192.168.11.9</b></p></span> <span class="cmd"><p><b>ip dhcp excluded-address 192.168.11.254</b></p></span> <span class="cmd"><p><b>ip dhcp pool LAN-POOL-2</b></p></span> <span class="cmd"><p><b> network 192.168.11.0 255.255.255.0</b></p></span> <span class="cmd"><p> <b>default-router 192.168.11.1</b></p></span> <span class="cmd"><p> <b>domain-name span.com</b></p></span> <p>Quando o PC2 concluir seu processo de inicialização, ele recebe um endereço IP para o segmento de rede para o qual está conectado. </p> <p><b>Clique no botão DHCP-3 na figura.</b></p> <p>Observe que as associações de DHCP agora indicam que dois hosts receberam endereços IP. As estatísticas de DHCP também refletem a troca de mensagens de DHCP.</p> <p>Outro comando útil para exibir os diversos conjuntos é o comando <span class="cmd"><b>show ip dhcp pool</b></span>. </p> <p><b>Clique no botão Conjuntos de endereços DHCP na figura.</b></p> <p>Esse comando resume as informações do conjunto de endereços DHCP.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010500">
<title><content-text>Configurando um cliente DHCP</content-text></title>
<page type="OneColumn" id="tl1407010501">
<content-media type="StaticGraphic" id="cm9863707146">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010500/tl1407010501/cm9863707146.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010500/tl1407010501/cm9863707146text.xml"/></content-media>
<content-text><p><b>Configurando um cliente DHCP</b></p> <p>Geralmente, pequenos roteadores de banda larga para uso local, tais como roteadores Linksys, podem ser configurados para conectar-se a um ISP utilizando um DSL ou um modem a cabo. Na maioria dos casos, pequenos roteadores locais são configurados para adquirir um endereço IP automaticamente de seus ISPs. Por exemplo, a figura mostra a página de configuração de WAN padrão para um roteador WRVS4400N Linksys. Observe que o tipo de conexão da Internet é definido como Configuração Automática - DHCP. Isso significa que, quando o roteador está conectado a um modem a cabo, por exemplo, ele será um cliente DHCP e solicitará um endereço IP do ISP. </p> <p>Às vezes, os roteadores Cisco em SOHO e filiais devem ser configurados de uma maneira semelhante. O método utilizado depende do ISP. Entretanto, em sua configuração mais simples, a interface Ethernet é utilizada para se conectar a um modem a cabo. Para configurar uma interface Ethernet como um cliente DHCP, o comando <span class="cmd"><b>ip address dhcp</b></span> deverá ser configurado.</p> <p><b>Clique no botão Cliente DHCP na figura.</b></p> <p>Na figura, suponha que um ISP foi configurado para fornecer a alguns clientes endereços IP do intervalo da 209.165.201.0 / 27. A saída do comando confirma o endereço atribuído.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010600">
<title><content-text>Retransmissão DHCP</content-text></title>
<page type="OneColumn" id="tl1407010601">
<content-media type="StaticGraphic" id="cm8673484145">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010600/tl1407010601/cm8673484145.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010600/tl1407010601/cm8673484145text.xml"/></content-media>
<content-text><p><b>O que é a retransmissão DHCP?</b></p> <p>Em uma rede hierárquica complexa, os servidores da empresa ficam geralmente em uma farm de servidores. Esses servidores podem fornecer os serviços de DHCP, DNS, TFTP e FTP aos clientes. O problema é que os clientes de rede geralmente não estão na mesma sub-rede que tais servidores. Portanto, os clientes devem localizar os servidores para receber os serviços, e esses serviços geralmente são localizados com o uso de mensagens de broadcast. </p> <p>Na figura, PC1 está tentando adquirir um endereço IP do servidor DHCP localizado em 192.168.11.5. Neste cenário, o roteador R1 não está configurado como um servidor DHCP.</p> <p><b>Clique no botão Problema de host na figura.</b></p> <p>Na figura, o PC1 está tentando renovar seu endereço IP. Para fazê-lo, o comando <b>ipconfig /release</b> é emitido. Observe que o endereço IP é lançado e o endereço atual é 0.0.0.0. Em seguida o comando <b>ipconfig /renew</b> é emitido. Esse comando faz o host iniciar a transmissão de uma mensagem DHCPDISCOVER por broadcast. No entanto, PC1 não pode localizar o servidor DHCP. O que acontece quando o servidor e o cliente estão separados por um roteador e, desse modo, não estão no mesmo segmento de rede? Lembre-se de que os roteadores não encaminham broadcasts.</p> <p><b>Nota:</b> Alguns clientes do Windows possuem um recurso chamado Endereçamento IP privado automático (APIPA, Automatic Private IP Addressing). Com esse recurso, um computador com Windows pode atribuir automaticamente a si mesmo um endereço IP no intervalo de 169.254.x.x no caso de um servidor DHCP não estar disponível ou não existir na rede.</p> <p>Para piorar as coisas, o DHCP não é o único serviço essencial que utiliza os broadcasts. Por exemplo, os roteadores Cisco e outros dispositivos podem utilizar broadcasts para localizar os servidores TFTP ou para localizar um servidor de autenticação, como o servidor TACACS. </p> <p>Para solucionar esse problema, um administrador poderia adicionar servidores DHCP a todas as sub-redes. Entretanto, a execução desses serviços em vários computadores cria uma sobrecarga de custo e administrativa. </p> <p>Uma solução mais simples é configurar o recurso de <content-link target="{A39F7ADB-4FBE-4B32-ABF9-5AE33817E5DC}" type="glossary">endereço auxiliar</content-link> do IOS Cisco nos roteadores e switches intermediários. Essa solução habilita os roteadores para que encaminhem broadcasts de DHCP aos servidores DHCP. Quando um roteador encaminha atribuições de endereços/solicitações de parâmetros, ele está agindo como um agente de retransmissão de DHCP. </p> <p>Por exemplo, PC1 transmitiria uma solicitação por broadcast para localizar um servidor DHCP. Se o roteador R1 estivesse configurado como um agente de retransmissão de DHCP, ele interceptaria essa solicitação e a encaminharia ao servidor DHCP localizado na sub-rede 192.168.11.0.</p> <p>Para configurar o roteador R1 como um agente de retransmissão de DHCP, você precisa configurar a interface mais próxima do cliente com o comando de configuração de interface <span class="cmd"><b>ip helper-address</b></span>. Esse comando retransmite as solicitações de broadcast para os principais serviços a um endereço configurado. Configure o endereço IP auxiliar na interface que recebe o broadcast. </p> <p><b>Clique no botão Configuração de retransmissão na figura.</b></p> <p>O roteador R1 agora está configurado como um agente de retransmissão de DHCP. Ele aceita as solicitações de broadcast para o serviço de DHCP e então as encaminha como unicast ao endereço IP 192.168.11.5. </p> <p><b>Clique no botão Renovação de host na figura.</b></p> <p>Como você pode ver, o PC1 agora pode adquirir um endereço IP do servidor DHCP.</p> <p>O DHCP não é o único serviço que pode ser configurado no roteador para que ele faça a retransmissão. Por padrão, o comando <span class="cmd"><b>ip helper-address</b></span> encaminha os seguintes oito serviços de UDP:</p> <p><ul><li>Porta 37: Tempo </li><li>Porta 49: TACACS</li><li>Porta 53: DNS</li><li>Porta 67: Servidor DHCP/BOOTP</li><li>Porta 68: Cliente DHCP/BOOTP</li><li>Porta 69: TFTP</li><li>Porta 137: serviço de nomes NetBIOS</li><li>Porta 138: serviço de datagrama NetBIOS</li></ul></p> <p>Para especificar as portas adicionais, utilize o comando <span class="cmd"><b>ip forward-protocol</b></span> para especificar exatamente quais tipos de pacotes de broadcast serão encaminhados.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010700">
<title><content-text>Configurando um servidor DHCP usando o SDM</content-text></title>
<page type="OneColumn" id="tl1407010701">
<content-media type="StaticGraphic" id="cm8714511774">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010700/tl1407010701/cm8714511774.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010700/tl1407010701/cm8714511774text.xml"/></content-media>
<content-text><p><b>Configurando um servidor DHCP usando o SDM</b></p> <p>Os roteadores Cisco também podem ser configurados como um servidor DHCP utilizando o SDM. Neste exemplo, o roteador R1 será configurado como o servidor DHCP nas interfaces Fa0/0 e Fa0/1. </p> <p><b>Clique no botão Tarefas de DHCP na figura.</b></p> <p>A função do servidor DHCP é habilitada em Additional Tasks [Tarefas adicionais] na guia Configure [Configurar]. Na lista de tarefas, clique na pasta DHCP e selecione <b>Conjuntos de endereços DHCP</b> para adicionar um novo conjunto. Clique em <b>Adicionar</b> para criar o novo conjunto de endereços DHCP.</p> <p><b>Clique no botão Adicionar conjunto na figura.</b></p> <p>A janela Adicionar conjunto de endereços DHCP contém as opções necessárias para configurar o conjunto de endereços IP do DHCP. Os endereços IP designados pelo servidor DHCP são tirados de um conjunto comum. Para configurar o conjunto, especifique o endereço IP inicial e o endereço IP final do intervalo. </p> <p>O SDM Cisco configura o roteador para que ele exclua automaticamente o endereço IP da interface de rede local do conjunto. Você não deve usar o endereço IP de rede ou sub-rede ou o endereço de broadcast na rede no intervalo de endereços que você especificar. </p> <p>Se você precisar excluir os outros endereços IP no intervalo, poderá fazê-lo ajustando os endereços IP inicial e final. Por exemplo, se você precisar excluir os endereços IP de 192.168.10.1 até 192.168.10.9, definirá o endereço IP inicial como 192.168.10.10. Isso permite que o roteador comece a atribuição de endereços com 192.168.10.10. </p> <p>As outras opções disponíveis são:</p> <p><ul><li><b>Servidor DNS 1 e Servidor DNS 2</b> - O servidor DNS é, geralmente, um servidor que mapeia um nome de dispositivo conhecido com seu endereço IP. Se você tiver um servidor DNS configurado para sua rede, digite aqui o endereço IP para o servidor. Se houver outro servidor DNS na rede, você poderá digitar neste campo o endereço IP para esse servidor. </li><li><b>Servidor WINS 1 e Servidor WINS 2</b> - Relembra que a configuração WINS geralmente está em ambientes que suportam clientes anteriores ao Windows 2000. </li><li><b>Importar todas as opções de DHCP para o banco de dados do servidor DHCP</b> - Permite importar as opções de DHCP de um servidor de nível mais alto e é usado geralmente em conjunto com um servidor DHCP da Internet. Essa opção permite que você receba informações de níveis mais altos sem ter que fazer essa configuração para esse conjunto. </li></ul></p> <p><b>Clique no botão Conjuntos de endereços DHCP na figura.</b></p> <p>Esta tela fornece um resumo dos conjuntos configurados em seu roteador. Neste exemplo, dois conjuntos foram configurados, um para cada interface Fast Ethernet no roteador R1.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407010800">
<title><content-text>Identificação e solução de problemas de DHCP</content-text></title>
<page type="OneColumn" id="tl1407010801">
<content-media type="InteractiveGraphicHotspots" id="cm3378856475">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010800/tl1407010801/cm3378856475.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010800/tl1407010801/cm3378856475text.xml"/></content-media>
<content-text><p><b>Identificação e solução de problemas de configuração de DHCP </b></p> <p>Podem surgir problemas no DHCP por diversos motivos, tais como defeitos de software nos sistemas operacionais, nos drivers da placa de rede ou nos agentes de retransmissão DHCP/BOOTP, mas os mais comuns são os problemas de configuração. Devido ao número de áreas potencialmente problemáticas, é necessário uma abordagem sistemática para identificar e solucionar os problemas.</p> <p><b>Identificação e solução de problemas – Tarefa 1: Solucionar conflitos de endereços IP</b></p> <p>O empréstimo de um endereço IP pode expirar para um cliente que ainda esteja conectado a uma rede. Se o cliente não renovar o empréstimo, o servidor DHCP poderá atribuir novamente aquele endereço IP para outro cliente. Quando o cliente fizer a reinicialização, um endereço IP será solicitado. Se o servidor DHCP não responder rapidamente, o cliente usará o último endereço IP. Ocorre, assim, uma situação em que dois clientes utilizam o mesmo endereço IP, criando um conflito.</p> <p>O comando <span class="cmd"><b>show ip dhcp conflict</b></span> exibe todos os conflitos de endereço registrados pelo servidor DHCP. O servidor usa o comando <span class="cmd"><b>ping</b></span> para detectar os conflitos. O cliente usa o Protocolo de resolução de endereços (ARP, Address Resolution Protocol) para detectar os clientes. Se um conflito de endereços for detectado, o endereço será removido do conjunto e não será atribuído até que um administrador solucione o conflito. </p> <p>Este exemplo exibe o método de detecção e hora da detecção para todos os endereços IP oferecidos pelo servidor DHCP que entraram em conflito com outros dispositivos.</p> <p><span class="cmd">R2# <b>show ip dhcp conflict</b></span></p> <p><span class="cmd">IP address Detection Method Detection time</span></p> <p><span class="cmd">192.168.1.32 Ping Feb 16 2007 12:28 PM</span></p> <p><span class="cmd">192.168.1.64 Gratuitous ARP Feb 23 2007 08:12 AM</span></p> <p><b>Identificação e solução de problemas - Tarefa 2: Verificar a conectividade física</b></p> <p>Primeiro, use o comando <span class="cmd"><b>show interface</b>  <i>interface</i></span> para confirmar se a interface do roteador que está agindo como o gateway padrão para o cliente está operacional. Se o estado da interface não estiver ativo, a porta não transmitirá o tráfego, inclusive as solicitações do cliente DHCP. </p> <p><b>Identificação e solução de problemas – Tarefa 3: Teste de conectividade de rede configurando uma estação de trabalho do cliente com um endereço IP estático</b></p> <p>Ao identificar e solucionar qualquer problema do DHCP, verifique a conectividade da rede configurando um endereço IP estático em uma estação de trabalho do cliente. Se a estação de trabalho não puder alcançar os recursos de rede com um endereço IP estaticamente configurado, isso significará que a fonte do problema não é o DHCP. Neste ponto, a identificação e solução de problemas de conectividade de rede é necessária.</p> <p><b>Identificação e solução de problemas – Tarefa 4: Verificar configurações de porta do switch (Portfast STP e outros comandos)</b></p> <p>Se o cliente DHCP não puder obter um endereço IP do servidor DHCP na inicialização, tente obter um endereço IP do servidor DHCP forçando manualmente o cliente a enviar uma solicitação DHCP. </p> <p>Se houver um switch entre o cliente e o servidor DHCP, verifique que se a porta possui uma PortFast STP habilitada e se o entroncamento/distribuição de canais está desabilitado. A configuração padrão é a PortFast desabilitada e o entroncamento/distribuição em canais automático, se aplicável. Essas mudanças de configuração solucionam os problemas mais comuns do cliente DHCP que ocorrem na instalação inicial de um switch Catalyst. Rever a seção “CCNA Exploration: Comutação de rede local e de rede sem fio” pode auxiliar na resolução desse problema.</p> <p><b>Identificação e solução de problemas – Tarefa 5: Distinguir se os clientes DHCP obtêm o endereço IP na mesma sub-rede ou VLAN que o servidor DHCP</b></p> <p>É importante distinguir se o DHCP está funcionando corretamente quando o cliente estiver na mesma sub-rede ou VLAN que o servidor DHCP. Se o DHCP estiver funcionando corretamente, o problema poderá ser o agente de retransmissão do DHCP/BOOTP. Se o problema persistir mesmo com o teste do DHCP na mesma sub-rede ou VLAN que o servidor DHCP, o problema poderá estar, de fato, no servidor DHCP.</p></content-text>
</page>
<page type="OneColumn" id="tl1407010802">
<content-media type="StaticGraphic" id="cm8098039303">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010800/tl1407010802/cm8098039303.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010800/tl1407010802/cm8098039303text.xml"/></content-media>
<content-text><p><b>Verificar a configuração de retransmissão DHCP/BOOTP do roteador </b></p> <p>Quando o servidor DHCP estiver localizado em uma rede local separada do cliente, a interface do roteador que estiver de frente para o cliente deverá ser configurada para retransmitir as solicitações DHCP. Isso é realizado configurando o endereço IP auxiliar. Se o endereço IP auxiliar não for configurado corretamente, as solicitações do cliente DHCP não serão encaminhadas ao servidor DHCP.</p> <p>Siga as seguintes etapas para verificar a configuração do roteador:</p> <p><b>Etapa 1.</b> Verifique se o comando <span class="cmd"><b>ip helper-address</b></span> está configurado na interface correta. Ele deve estar presente na interface de entrada da rede local que contém as estações de trabalho do cliente DHCP e deve ser direcionado ao servidor DHCP correto. Na figura, a saída do comando <span class="cmd"><b>show running-config</b></span> verifica se o endereço IP de retransmissão DHCP está denominando o endereço do servidor DHCP em 192.168.11.5.</p> <p><b>Etapa 2.</b> Verifique se o comando de configuração global <span class="cmd"><b>no service dhcp</b></span> não foi configurado. Esse comando desabilita o servidor DHCP e a funcionalidade de retransmissão no roteador. O comando <span class="cmd"><b>service dhcp</b></span> não aparece na configuração porque ele é a configuração padrão.</p></content-text>
</page>
<page type="OneColumn" id="tl1407010803">
<content-media type="StaticGraphic" id="cm5087573142">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010800/tl1407010803/cm5087573142.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407010000/tl1407010800/tl1407010803/cm5087573142text.xml"/></content-media>
<content-text><p><b>Verificar se o roteador está recebendo solicitações DHCP usando os comandos </b><span class="cmd"><b>debug</b></span><b>.</b></p> <p>Em roteadores configurados como servidores DHCP, o processo de DHCP falhará se o roteador não receber as solicitações do cliente. Como uma tarefa de identificação e solução de problemas, verifique se o roteador está recebendo a solicitação DHCP do cliente. Essa etapa de identificação e solução de problemas envolve a configuração de uma lista de controle de acesso para a saída do comando de depuração. A lista de controle de acesso da depuração não atrapalha o roteador.</p> <p>No modo de configuração global, crie a seguinte lista de controle de acesso:</p> <p><span class="cmd"><b>access-list 100 permit ip host 0.0.0.0 host 255.255.255.255</b></span></p> <p>Inicie a depuração usando o ACL 100 como o parâmetro de definição. No modo exec, digite o seguinte comando <span class="cmd"><b>debug</b></span>: </p> <p><span class="cmd"><b>debug ip packet detail 100</b></span></p> <p>A saída do comando na figura mostra que o roteador está recebendo as solicitações DHCP do cliente. O endereço IP de origem é 0.0.0.0 porque o cliente ainda não tem um endereço IP. O destino é 255.255.255.255 porque a mensagem de detecção do DHCP do cliente é um broadcast. As portas de origem e destino de UDP, 68 e 67, são as portas típicas usadas para o DHCP.</p> <p>Essa saída do comando mostra somente um resumo do pacote e não o pacote em si. Portanto, não será possível determinar se o pacote está correto. No entanto, o roteador recebeu um pacote de broadcast com as portas IP e UDP de origem e destino corretas para o DHCP.</p> <p><b>Verificar se o roteador está recebendo e encaminhando as solicitações DHCP usando o comando </b><span class="cmd"><b>debug ip dhcp server packet</b></span></p> <p>Um comando útil para identificar e solucionar os problemas da operação de DHCP é o comando <span class="cmd"><b>debug ip dhcp server events</b></span>. Esse comando reporta os eventos do servidor, como as atribuições de endereço e as atualizações do banco de dados. Ele também é usado para decodificar as recepções e as transmissões do DHCP. </p></content-text>
</page>
<page type="OneColumn" id="tl1407010804">
<content-media type="ActivityPKA" id="cm5818285126">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407010000/tl1407010800/tl1407010804/cm5818285126/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407010000/tl1407010800/tl1407010804/cm5818285126/icontext.xml"/></content-media>
<content-text><p>O DHCP atribui endereços IP e outras informações de configuração de rede importantes dinamicamente. Os roteadores Cisco podem usar o conjunto de recursos do IOS Cisco, Easy IP, como um servidor DHCP opcional com todos os recursos. Por padrão, o Easy IP empresta configurações por 24 horas. Nesta atividade, você irá configurar os serviços DHCP em dois roteadores e testar a sua configuração.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_1_8.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1407020000">
<title><content-text>Dimensionando redes com NAT</content-text></title>
<topic type="" id="tl1407020100">
<title><content-text>Endereçamento IP privado e público</content-text></title>
<page type="OneColumn" id="tl1407020101">
<content-media type="StaticGraphic" id="cm7216035341">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020100/tl1407020101/cm7216035341.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020100/tl1407020101/cm7216035341text.xml"/></content-media>
<content-text><p>Todos os <content-link target="{3B85FACD-786F-44AC-B83F-E42F90D4CF23}" type="glossary">endereços de Internet</content-link> públicos devem ser registrados com um Registro de internet regional (RIR, Regional Internet Registry). As organizações podem emprestar os endereços públicos de um ISP. Somente o proprietário registrado de um endereço público de internet pode atribuir esse endereço a um dispositivo de rede.</p> <p>Você deve ter observado que todos os exemplos neste curso utilizam um número um pouco restrito de endereços IP. Você também deve ter observado a semelhança entre esses números e os números que você usou em uma rede pequena para exibir as páginas de instalação da web de muitas marcas de impressoras, do DSL e de roteadores a cabo, bem como de outros periféricos. Eles são endereços de internet privados reservados retirados dos três blocos mostrados na figura. Esses endereços podem ser usados somente em redes internas e privadas. A RFC 1918 especifica que os endereços privados não devem ser roteados pela Internet. Os endereços privados são descritos, às vezes, como " não roteáveis." Entretanto, os pacotes com endereços privados podem ser roteados dentro de redes interconectadas privadas.</p> <p>Diferentemente dos endereços IP públicos, os endereços IP privados são um bloco reservado de números que podem ser usados por qualquer um. Isso significa que duas redes ou dois milhões de redes podem usar os mesmos endereços privados. Para proteger a estrutura de endereços da Internet pública, os ISPs geralmente configuram os roteadores de borda para impedir que o tráfego endereçado exclusivamente a eles seja encaminhado pela Internet.</p> <p>Ao fornecer um maior espaço de endereços do que a maioria das organizações pode obter através de um RIR, o endereçamento privado confere às empresas uma flexibilidade considerável no design da rede. Isso permite a obtenção de esquemas de endereçamento operacional e administrativamente convenientes, além de um crescimento mais fácil.</p> <p>Entretanto, como não é possível rotear endereços privados pela Internet e como não existem endereços públicos suficientes para permitir que as organizações forneçam um host para todos, as redes precisam que um mecanismo traduza os endereços privados para endereços públicos na extremidade de sua rede que funcionar em ambas as direções. Na ausência de um sistema de tradução, os hosts privados de um roteador na rede de uma organização não podem conectar-se a hosts privados de um roteador em outras organizações pela Internet. </p> <p>A Tradução de endereços de rede (NAT, Network Address Translation) fornece esse mecanismo. Antes da NAT, um host com um endereço privado não podia acessar a Internet. Usando a NAT, as empresas individuais podem designar a alguns ou todos os seus hosts com endereços privados e usar a NAT para fornecer acesso à Internet.</p> <p>Para obter uma visão mais detalhada sobre o desenvolvimento do sistema RIR, acesse o artigo do Cisco Internet Protocol Journal no site <content-link target="http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_4-4/regional_internet_registries.html" type="external">http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_4-4/regional_internet_registries.html</content-link>. </p></content-text>
</page>
</topic>
<topic type="" id="tl1407020200">
<title><content-text>O que é NAT?</content-text></title>
<page type="OneColumn" id="tl1407020201">
<content-media type="StaticGraphic" id="cm1136421622">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020200/tl1407020201/cm1136421622.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020200/tl1407020201/cm1136421622text.xml"/></content-media>
<content-text><p><b>O que é NAT?</b></p> <p>A NAT é como a recepcionista de um grande escritório. Suponha que você deixou instruções com a recepcionista para que ela não encaminhe nenhuma ligação a menos que você peça. Mais tarde, você liga para um cliente potencial e deixa uma mensagem para que ele retorne a ligação. Você diz à recepcionista que você está esperando uma ligação desse cliente e pede para que ela faça a transferência da chamada.</p> <p>O cliente liga para o número principal para seu escritório, que é o único número que ele conhece. Quando o cliente disser à recepcionista quem ele procura, a recepcionista verificará uma tabela de pesquisa que corresponde seu nome ao seu ramal. A recepcionista sabe que você pediu essa chamada; portanto, ela encaminha a pessoa que efetuou a chamada para seu ramal. </p> <p>Assim, enquanto o servidor DHCP designa os endereços IP dinâmicos para os dispositivos dentro da rede, os roteadores habilitados pela NAT retêm um ou muitos endereços IP de Internet válidos fora da rede. Quando o cliente enviar pacotes pela rede, a NAT traduzirá o endereço IP interno do cliente para um endereço externo. Para usuários externos, todo o tráfego destinado para a rede e proveniente dela possui o mesmo endereço IP ou vem do mesmo conjunto de endereços. </p> <p>A NAT tem muitos usos, mas o principal é salvar os endereços IP, permitindo que as redes usem os endereços IP privados. A NAT traduz endereços privados, não roteáveis e internos em endereços públicos e externos. A NAT tem um benefício adicional de proporcionar um nível maior de privacidade e segurança para uma rede porque ela oculta endereços IP internos de redes externas.</p> <p>Um dispositivo habilitado para NAT funciona normalmente na borda de uma <content-link target="{599C668A-E409-45CA-9965-73197F160850}" type="glossary">rede stub</content-link>. Em nosso exemplo, o R2 é o roteador de borda. Uma rede stub é uma rede que tem uma única conexão com sua rede vizinha. Como visto no ISP, o R2 forma uma rede stub.</p> <p>Quando um host dentro da rede stub, por exemplo PC1, PC2 ou PC 3, deseja transmitir um pacote para um host externo, esse pacote é encaminhado para R2, o roteador de <content-link target="{6914E21E-5AC5-4115-BB72-C467B5B39C3D}" type="glossary">gateway de borda</content-link>. O R2 executa o processo de NAT, traduzindo o endereço privado interno do host para um endereço público, roteável e externo. </p> <p>Na terminologia de NAT, a rede interna é o conjunto de redes que estão sujeitas à tradução. A rede externa se refere a todos os outros endereços. Os endereços IP possuem designações diferentes dependendo de estarem na rede privada ou na rede pública (Internet) e de o tráfego estar chegando ou saindo. </p> <p><b>Clique no botão Terminologia na figura.</b></p> <p>A figura mostra como referir-se às interfaces ao configurar a NAT. Suponha que o roteador R2 foi configurado para fornecer os recursos da NAT. Ele possui um conjunto de endereços publicamente disponíveis para emprestar aos hosts internos. Esta seção utiliza os seguintes termos ao discutir a NAT:</p> <p><ul><li><b>Endereço local interno</b> - Geralmente não é um endereço IP atribuído por um RIR ou operadora, sendo mais provavelmente um endereço privado da RFC 1918. Na figura, o endereço IP 192.168.10.10 está atribuído ao PC1 host na rede interna. </li><li><b>Endereço global interno</b> - Um endereço público válido que o host interno recebe quando sai do roteador da NAT. Quando o tráfego de PC1 é destinado para o servidor web em 209.165.201.1, o roteador R2 deverá traduzir o endereço. Nesse caso, o endereço IP 209.165.200.226 é usado como o endereço global interno para o PC1.</li><li><b>Endereço global externo</b> - Endereço IP público válido atribuído a um host na Internet. Por exemplo, o servidor web pode ser alcançado no endereço IP 209.165.201.1. </li><li><b>Endereço local externo</b> - O endereço IP local atribuído a um host na rede externa. Na maioria das situações, esse endereço será idêntico ao endereço global externo do dispositivo externo. </li></ul></p> <p><b>Nota:</b> Neste curso, faremos referência ao endereço local interno, ao endereço global interno e ao endereço global externo. O uso do endereço local externo está fora do escopo deste curso. </p> <p>O "interno" de uma configuração de NAT não é sinônimo de endereços particulares como eles são definidos pela RFC 1918. Embora os endereços "internos" sejam, geralmente, endereços privados, a NAT pode fazer a tradução entre endereços públicos "externos" e "internos".</p></content-text>
</page>
<page type="OneColumn" id="tl1407020202">
<content-media type="AnimationPartialScreen" id="cm8593325160">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020200/tl1407020202/cm8593325160.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020200/tl1407020202/cm8593325160text.xml"/></content-media>
<content-text><p><b>Como a NAT funciona?</b></p> <p>Neste exemplo, um host interno (192.168.10.10) deseja se comunicar com um servidor web externo (209.165.201.1). Ele envia um pacote a R2, o gateway de borda configurado para NAT da rede.</p> <p><b>Use os controles na figura para iniciar a animação.</b></p> <p>R2 lê o endereço IP de origem do pacote e verifica se o pacote corresponde aos critérios especificados para tradução. R2 possui uma ACL que identifica a rede interna como hosts válidos para tradução. Portanto, ele traduz um endereço IP local interno para um endereço IP global interno que, neste caso, é 209.165.200.226. Ele armazena esse mapeamento de endereço local para endereço global na tabela de NAT.</p> <p>Em seguida, o roteador envia o pacote a seu destino. Quando o servidor web responde, o pacote volta ao endereço global de R2 (209.165.200.226).</p> <p>R2 consulta a sua tabela de NAT e verifica que esse era um endereço IP que foi traduzido anteriormente. Portanto, ele traduz o endereço global interno para o endereço local interno, e o pacote é encaminhado ao PC1 no endereço IP 192.168.10.10. Se ele não localizar um mapeamento, o pacote será descartado.</p> <p><b>Mapeamento dinâmico e mapeamento estático</b> </p> <p>Existem dois tipos de tradução NAT: dinâmica e estática. </p> <p>A NAT dinâmica utiliza um conjunto de endereços públicos e os atribui por ordem de chegada. Quando um host com um endereço IP privado solicitar acesso à Internet, a NAT dinâmica escolherá um endereço IP do conjunto que não estiver mais sendo usado por outro host. Esse é o mapeamento descrito até então.</p> <p>A NAT estática usa um mapeamento exclusivo de endereços globais e locais, e tais mapeamentos permanecem constantes. A NAT estática é particularmente útil para servidores web ou hosts que devam ter um endereço consistente que possa ser acessado da Internet. Esses hosts internos podem ser servidores corporativos ou dispositivos de redes interconectadas. </p> <p>Tanto a NAT estática como a dinâmica exigem que endereços públicos suficientes estejam disponíveis para atender ao número total de sessões de usuário simultâneas.</p> <p>Para observar de outra maneira como a NAT dinâmica funciona, acesse <content-link target="http://www.cisco.com/warp/public/556/nat.swf" type="external">http://www.cisco.com/warp/public/556/nat.swf</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="tl1407020203">
<content-media type="AnimationPartialScreen" id="cm5460638819">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020200/tl1407020203/cm5460638819.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020200/tl1407020203/cm5460638819text.xml"/></content-media>
<content-text><p><b>Sobrecarga de NAT</b></p> <p>A sobrecarga de NAT (chamada à vezes de Tradução de endereço de porta ou PAT) mapeia diversos endereços IP privados para um único endereço IP público ou para alguns endereços. Isso é o que a maioria dos roteadores locais fazem. Seu ISP atribui um endereço a seu roteador, mas vários membros de sua família podem navegar na Internet simultaneamente.</p> <p>Com a sobrecarga de NAT, vários endereços podem ser mapeados para um ou alguns endereços porque cada endereço privado também é acompanhado por um número de porta. Quando um cliente abrir uma sessão de TCP/IP, o roteador de NAT atribuirá um número de porta ao seu endereço de origem. A sobrecarga de NAT garante que os clientes utilizem um número de porta TCP diferente para cada sessão do cliente com um servidor na Internet. Quando uma resposta voltar do servidor, o número de porta de origem, que se torna o número de porta de destino na viagem de retorno, determinará para qual cliente o roteador irá rotear os pacotes. Ele também validará se os pacotes de entrada foram solicitados, acrescentando um grau de segurança à sessão. </p> <p><b>Clique nos controles para iniciar e pausar a animação.</b></p> <p>Essa animação ilustra o processo. A sobrecarga de NAT utiliza números de porta de origem exclusivos no endereço IP global interno para fazer a distinção entre as traduções. Como o NAT processa cada pacote, ele usa um número de porta (neste exemplo, 1331 e 1555) para identificar o cliente do qual o pacote foi originado. O endereço de origem (SA, source address) é o endereço IP local interno com o número de porta atribuído de TCP/IP anexado. O endereço de destino (DA, destination address) é o endereço IP local externo com o número de porta de serviço anexado, neste caso a porta 80: HTTP.</p> <p>No roteador de gateway de borda (R2), a sobrecarga de NAT altera o SA para o endereço IP global interno do cliente, novamente com o número de porta anexado. O DA é o mesmo endereço, mas agora está sendo chamado de endereço IP global externo. Quando o servidor web responder, o mesmo caminho será seguido, mas ao contrário.</p> <p>Os números de porta são codificados em 16 bits. O número total de endereços internos que pode ser traduzido para um endereço externo pode ser, teoricamente, de 65.536 por cada endereço IP. Porém, na realidade, o número de endereços internos que pode ser atribuído a um único endereço IP é cerca de 4.000. </p> <p><b>Clique no botão Próxima porta disponível na figura.</b></p> <p>No exemplo anterior, os números de porta de cliente nos dois SAs, 1331 e 1555, não se alteram no gateway de borda. Esse cenário não é muito provável, pois existe uma grande chance de que esses números possam já ter sido anexados às outras sessões em andamento. </p> <p>A sobrecarga de NAT tenta preservar a porta de origem inicial. Porém, se essa porta de origem já estiver sendo usada, a sobrecarga de NAT atribuirá o primeiro número de porta disponível do início do grupo de portas apropriado: 0-511, 512-1023 ou 1024-65535. Quando não houver mais nenhuma porta disponível e houver mais de um endereço IP externo configurado, a sobrecarga de NAT irá para o próximo endereço IP para tentar alocar a porta de origem inicial novamente. Esse processo continuará até que as portas disponíveis e os endereços IP externos acabem. </p> <p>Na figura, ambos os hosts escolheram o mesmo número de porta 1444. Isso é aceitável para o endereço interno, porque ambos têm endereços IP privados exclusivos. Entretanto, no gateway de borda, os números de porta precisam ser alterados, caso contrário os dois pacotes dos dois hosts deixariam o R2 com o mesmo endereço de origem. A sobrecarga de NAT deu ao segundo endereço o primeiro número de porta disponível que, neste caso, é o 1445.</p> <p><b>Diferenças entre a NAT e a sobrecarga de NAT</b></p> <p>Um resumo das diferenças entre a NAT e a sobrecarga de NAT facilitará sua compreensão. A NAT geralmente só traduz os endereços IP em uma correspondência de 1:1 entre os endereços IP publicamente expostos e os endereços privativamente retidos. A sobrecarga de NAT modifica o endereço IP privado e o número de porta do remetente. A sobrecarga de NAT escolhe os números de porta vistos pelos hosts na rede pública.</p> <p>A NAT roteia os pacotes de entrada para seus destinos internos recorrendo ao endereço IP de origem de entrada dado pelo host na rede pública. Com a sobrecarga de NAT, geralmente existe somente um ou muito poucos endereços IP publicamente expostos. Os pacotes de entrada da rede pública são roteados aos seus destinos na rede privada por meio da consulta na tabela no dispositivo de sobrecarga de NAT que monitora os pares de portas públicas e privadas. Isso é chamado de monitoramento de conexão.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407020300">
<title><content-text>Benefícios e desvantagens de usar a NAT</content-text></title>
<page type="OneColumn" id="tl1407020301">
<content-media type="StaticGraphic" id="cm1263669050">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020300/tl1407020301/cm1263669050.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020300/tl1407020301/cm1263669050text.xml"/></content-media>
<content-text><p><b>Benefícios e desvantagens de usar a NAT</b></p> <p>A NAT oferece muitos benefícios e vantagens. Porém, existem algumas desvantagens de usá-la, inclusive a falta de suporte para alguns tipos de tráfego. </p> <p>Os benefícios de usar a NAT incluem:</p> <p><ul><li>A NAT conserva o esquema de endereçamento legalmente registrado, permitindo a privatização das intranets. A NAT conserva os endereços através da multiplexação de nível de porta de aplicativo. Com sobrecarga de NAT, os hosts internos podem compartilhar um único endereço IP público para todas as comunicações externas. Neste tipo de configuração, são necessários muito poucos endereços externos para suportar os muitos hosts internos.</li><li>A NAT aumenta a flexibilidade das conexões com a rede pública. Diversos conjuntos, conjuntos de backup e conjuntos de balanceamento de carga podem ser implementados para assegurar conexões de redes públicas confiáveis. </li><li>A NAT fornece uma consistência para esquemas de endereçamento de rede internos. Em uma rede sem endereços IP privados e NAT, a mudança de endereços IP públicos exige a renumeração de todos os hosts na rede existente. Os custos para renumerar hosts podem ser significativos. O NAT permite que o esquema existente permaneça enquanto suporta um novo esquema de endereçamento público. Isso significa que uma organização poderia mudar os ISPs e não precisaria mudar nenhum de seus clientes internos. </li><li>O NAT oferece segurança de rede. Como as redes privadas não anunciam seus endereços ou topologia interna, elas permanecem razoavelmente seguras quando usadas juntamente com a NAT para obter o acesso externo controlado. Porém, a NAT não substitui os firewalls.</li></ul></p> <p>Entretanto, a NAT apresenta algumas desvantagens. Vários problemas são criados pelo fato de os hosts na Internet parecerem comunicar-se diretamente com o dispositivo de NAT, em vez de comunicar-se com o host real dentro da rede privada. Teoricamente, um endereço IP globalmente exclusivo pode representar hosts endereçados privativamente. Isso pode ser vantajoso do ponto de vista da privacidade e segurança mas, na prática, existem desvantagens. </p> <p>A primeira desvantagem afeta o desempenho. A NAT aumenta os atrasos da comutação porque a tradução de cada endereço IP dentro dos cabeçalhos do pacote é demorada. O primeiro pacote é comutado por processo, o que significa que ele sempre passa pelo caminho mais lento. O roteador deve observar todos os pacotes para decidir se eles precisam de tradução. O roteador precisa alterar o cabeçalho de IP e, possivelmente, alterar o cabeçalho de TCP ou UDP. Se existir uma entrada de cache, os pacotes restantes passam através do caminho que foi comutado rapidamente; caso contrário, eles também são atrasados.</p> <p>Muitos protocolos e aplicativos de Internet dependem da funcionalidade fim-a-fim, com pacotes inalterados encaminhados da origem ao destino. Com a alteração dos endereços fim-a-fim, a NAT evita alguns aplicativos que utilizam o endereçamento IP. Por exemplo, alguns aplicativos de segurança, como as assinaturas digitais, falham porque o endereço IP de origem muda. Os aplicativos que usam endereços físicos em vez de um nome de domínio qualificado não alcançam os destinos que são traduzidos através do roteador de NAT. Às vezes, esse problema pode ser evitado implementando mapeamentos de NAT estáticos.</p> <p>A capacidade de rastreamento IP fim-a-fim também é perdida. Torna-se muito mais difícil rastrear pacotes que passam por muitas mudanças de endereço ao longo dos diversos saltos da NAT, dificultando a identificação e solução de problemas. Por outro lado, os hackers que querem determinar a origem de um pacote acham difícil rastrear ou obter a origem ou o endereço de destino.</p>  <p>O uso da NAT também complica os protocolos de tunelamento, como o IPsec, porque ela modifica os valores nos cabeçalhos que interferem nas verificações de integridade feitas pelo IPsec e por outros protocolos de tunelamento.</p> <p>Os serviços que exigem a iniciação de conexões de TCP da rede externa ou protocolos sem estado, como os que usam o UDP, podem ser interrompidos. A menos que o roteador de NAT se esforce especificamente para suportar esses protocolos, os pacotes de entrada não poderão chegar ao seu destino. Alguns protocolos podem acomodar uma instância de NAT entre os hosts participantes (FTP no modo passivo, por exemplo), mas falham quando ambos os sistemas são separados da Internet pela NAT. </p></content-text>
</page>
</topic>
<topic type="" id="tl1407020400">
<title><content-text>Configurando a NAT estática</content-text></title>
<page type="OneColumn" id="tl1407020401">
<content-media type="StaticGraphic" id="cm6012058594">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020400/tl1407020401/cm6012058594.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020400/tl1407020401/cm6012058594text.xml"/></content-media>
<content-text><p><b>NAT estática</b></p> <p>Lembre-se de que a NAT estática é um mapeamento exclusivo entre um endereço interno e um endereço externo. A NAT estática permite conexões iniciadas por dispositivos externos para dispositivos internos. Por exemplo, você pode desejar mapear um endereço global interno para um endereço local interno específico que está atribuído ao seu servidor web.</p> <p>A configuração das traduções de NAT estáticas é uma tarefa simples. É necessário definir os endereços a serem traduzidos e, em seguida, configurar a NAT nas interfaces apropriadas. Os pacotes que chegam em uma interface do endereço IP definido estão sujeitos à tradução. Os pacotes que chegam em uma interface externa, destinados para o endereço IP identificado, estão sujeitos à tradução.</p> <p>A figura explica os comandos para cada etapa. Você digita as traduções estáticas diretamente na configuração. Diferentemente das traduções dinâmicas, essas traduções sempre estão na tabela de NAT.</p> <p><b>Clique no botão Exemplo na figura.</b></p> <p>A figura é uma configuração de NAT estática simples aplicada em ambas as interfaces. O roteador sempre traduz os pacotes do host dentro da rede com o endereço privado de 192.168.10.254 em um endereço externo de 209.165.200.254. O host na Internet direciona as solicitações da web ao endereço IP público 209.165.200.254, e o roteador R2 sempre encaminha esse tráfego ao servidor em 192.168.10.254.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407020500">
<title><content-text>Configurando a NAT dinâmica</content-text></title>
<page type="OneColumn" id="tl1407020501">
<content-media type="StaticGraphic" id="cm3410388548">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020500/tl1407020501/cm3410388548.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020500/tl1407020501/cm3410388548text.xml"/></content-media>
<content-text><p><b>Configurando a NAT dinâmica</b></p> <p>Enquanto a NAT estática fornece um mapeamento permanente entre um endereço interno e um endereço público específico, a NAT dinâmica mapeia os endereços IP privados para endereços públicos. Esses endereços IP públicos vêm de um conjunto de NAT. A configuração de NAT dinâmica é diferente da NAT estática, mas também apresenta algumas semelhanças. Assim como a NAT estática, ela exige que a configuração identifique cada interface como uma interface interna ou externa. Entretanto, em vez de criar um mapa estático para um único endereço IP, utiliza-se um conjunto de endereços globais internos.</p> <p><b>Clique no botão Comandos na figura</b> para ver as etapas e configurar a NAT dinâmica.</p> <p>Para configurar a NAT dinâmica, você precisa de uma ACL para permitir somente os endereços que devem ser traduzidos. Ao desenvolver sua ACL, lembre-se de que há um “negar todos” implícito no final de cada ACL. Uma ACL muito permissiva pode levar a resultados imprevisíveis. A Cisco não aconselha configurar as listas de controle de acesso indicadas pelos comandos NAT com o comando <span class="cmd"><b>permit any</b></span>. O uso do comando <span class="cmd"><b>permit any</b></span> pode fazer com que a NAT consuma muitos recursos do roteador, o que pode levar a problemas de rede.</p> <p><b>Clique no botão Exemplo na figura.</b></p> <p>Essa configuração permite a tradução para todos os hosts nas redes 192.168.10.0 e 192.168.11.0 quando elas gerarem o tráfego que entrar em S0/0/0 e sair de S0/1/0. Esses hosts são traduzidos para um endereço disponível no intervalo de 209.165.200.226 - 209.165.200.240.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407020600">
<title><content-text>Configurando a sobrecarga de NAT</content-text></title>
<page type="OneColumn" id="tl1407020601">
<content-media type="StaticGraphic" id="cm2876755097">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020600/tl1407020601/cm2876755097.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020600/tl1407020601/cm2876755097text.xml"/></content-media>
<content-text><p><b>Configurando a sobrecarga de NAT para um único endereço IP público</b></p> <p>Existem duas maneiras possíveis de configurar a sobrecarga, dependendo de como o ISP aloca os endereços IP públicos. Em primeiro lugar, o ISP aloca um endereço IP público para a organização e, em seguida, aloca mais de um endereço IP público.</p> <p>A figura mostra as etapas a serem seguidas para configurar a sobrecarga de NAT com um único endereço IP. Com somente um endereço IP público, a configuração da sobrecarga geralmente atribui esse endereço público à interface externa que se conecta ao ISP. Todos os endereços internos são traduzidos para o único endereço IP ao deixar a interface externa. </p> <p><b>Clique no botão Comandos na figura</b> para ver as etapas para configurar a sobrecarga de NAT.</p> <p>A configuração é semelhante à NAT dinâmica. A diferença é que, em vez de um conjunto de endereços, a palavra-chave <span class="cmd"><b>interface</b></span> é usada para identificar o endereço IP externo. Portanto, nenhum conjunto de NAT foi definido. A palavra-chave <span class="cmd"><b>sobrecarga</b></span> permite adicionar o número da porta à tradução.</p> <p><b>Clique no botão Exemplo na figura.</b></p> <p>Este exemplo mostra como a sobrecarga de NAT é configurada. No exemplo, todos os hosts da rede 192.168.0.0 /16 (correspondentes à ACL 1) que enviam o tráfego através do roteador R2 para a Internet são traduzidos para o endereço IP 209.165.200.225 (endereço IP S0/1/0 da interface). Como a palavra-chave <span class="cmd"><b>sobrecarga</b></span> foi usada, os fluxos de tráfego foram identificados pelos números de porta.</p></content-text>
</page>
<page type="OneColumn" id="tl1407020602">
<content-media type="StaticGraphic" id="cm3955055025">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020600/tl1407020602/cm3955055025.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020600/tl1407020602/cm3955055025text.xml"/></content-media>
<content-text><p><b>Configurando a sobrecarga de NAT para um conjunto de endereços IP públicos</b></p> <p>No cenário onde o ISP fornecer mais de um endereço IP público, a sobrecarga de NAT será configurada para usar um conjunto. A principal diferença entre essa configuração e a configuração para a NAT dinâmica e exclusiva é que ela usa a palavra-chave <span class="cmd"><b>sobrecarga</b></span>. Lembre-se de que a palavra-chave <span class="cmd"><b>sobrecarga</b></span> permite a tradução de endereço de porta.</p> <p><b>Clique no botão Comandos na figura</b> para ver as etapas da configuração da sobrecarga de NAT usando um conjunto de endereços. </p> <p><b>Clique no botão Exemplo na figura.</b></p> <p>Neste exemplo, a configuração estabelece a tradução de sobrecarga para o conjunto de NAT, NAT-POOL2. O conjunto de NAT contém os endereços 209.165.200.226 - 209.165.200.240 e é traduzido usando PAT. Os hosts na rede 192.168.0.0 /16 estão sujeitos à tradução. Por fim, as interfaces interna e externa são identificadas.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407020700">
<title><content-text>Configurando o encaminhamento de porta</content-text></title>
<page type="OneColumn" id="tl1407020701">
<content-media type="StaticGraphic" id="cm4925881261">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020700/tl1407020701/cm4925881261.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020700/tl1407020701/cm4925881261text.xml"/></content-media>
<content-text><p><b>Encaminhamento de porta </b></p> <p>O encaminhamento de porta (às vezes chamado de tunelamento) é o ato de encaminhar uma porta de rede de um nó de rede para outro. Essa técnica permite que um usuário externo alcance uma porta em um endereço IP privado (dentro de uma rede local) do endereço externo através de um roteador habilitado pela NAT. </p> <p>Geralmente, os programas e as principais operações de compartilhamento de arquivos ponto a ponto, como o FTP de serviço e de saída da web, exigem que as portas do roteador sejam encaminhadas ou abertas para permitir o funcionamento desses aplicativos. Como a NAT oculta os endereços internos, o ponto a ponto só funciona no sentido contrário onde a NAT pode mapear as solicitações de saída de registro em relação às respostas de entrada. </p> <p>O problema é que a NAT não permite que as solicitações sejam iniciadas do exterior. Essa situação pode ser resolvida com uma intervenção manual. O encaminhamento de porta permite identificar as portas específicas que podem ser encaminhadas para os hosts internos.</p> <p>Lembre-se de que os aplicativos de software da Internet interagem com portas de usuário que precisam estar abertas ou disponíveis para esses aplicativos. Diferentes aplicativos usam diferentes portas. Por exemplo, a Telnet usa a porta 23, o FTP usa as portas 20 e 21, o HTTP usa a porta 80 e o SMTP usa a porta 25. Isso torna previsível a identificação dos serviços de rede pelos aplicativos e roteadores. Por exemplo, o HTTP opera pela porta 80, que é conhecida. Quando você digita o endereço http://cisco.com, o navegador exibe o site da Cisco Systems, Inc. Observe que nós não precisamos especificar o número de porta HTTP para as solicitações de página porque o aplicativo supõe a porta 80. </p> <p><b>Configurando o encaminhamento de porta </b></p> <p>O encaminhamento de porta permite que os usuários na Internet acessem os servidores internos usando o endereço de porta de WAN e o número de porta externo correspondente. Quando os usuários enviam esses tipos de solicitações para seu endereço IP de porta de WAN pela Internet, o roteador encaminha essas solicitações aos servidores apropriados em sua rede local. Por questões de segurança, os roteadores de banda larga não permitem, por padrão, que seja encaminhada nenhuma solicitação de rede externa para um host interno. </p> <p>Por exemplo, a figura está exibindo a janela Encaminhamento de porta simples de um roteador de SOHO de classe de negócios, Linksys WRVS4400N. Atualmente, o encaminhamento de porta não está configurado. </p> <p><b>Clique no botão Exemplo de encaminhamento de porta na figura.</b></p> <p>Você pode habilitar o encaminhamento de porta para os aplicativos e especificar o endereço local interno para o qual encaminhar as solicitações. Por exemplo, na figura, as solicitações de serviço do HTTP que chegam ao Linksys são encaminhadas, neste momento, para o servidor web com o endereço local interno de 192.168.1.254. Se o endereço IP WAN externo do roteador de SOHO for 209.165.200.158, o usuário externo poderá digitar http://209.165.200.158 e o roteador de Linksys redirecionará a solicitação de HTTP para o servidor web interno no endereço IP 192.168.1.254, usando o número de porta 80 padrão.</p> <p>Nós podemos especificar uma porta diferente da porta padrão 80. Entretanto, o usuário externo teria que saber o número de porta específico a ser usado. </p> <p>A abordagem que você adota para configurar o encaminhamento de porta depende da marca e modelo do roteador de banda larga na rede. Porém, existem algumas etapas genéricas a serem seguidas. Se as instruções fornecidas pelo seu ISP ou que vieram com o roteador não fornecerem uma orientação adequada, o site <content-link target="http://www.portforward.com/" type="external">www.portforward.com</content-link> oferece guias para diversos roteadores de banda larga. Você pode seguir as instruções para adicionar ou excluir portas conforme o necessário para que as necessidades de qualquer aplicativo que você deseja aceitar ou rejeitar sejam atendidas. </p></content-text>
</page>
</topic>
<topic type="" id="tl1407020800">
<title><content-text>Verificando, identificando e solucionando problemas das configurações de NAT</content-text></title>
<page type="OneColumn" id="tl1407020801">
<content-media type="StaticGraphic" id="cm7432783830">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020800/tl1407020801/cm7432783830.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020800/tl1407020801/cm7432783830text.xml"/></content-media>
<content-text><p><b>Verificando a NAT e a sobrecarga de NAT</b></p> <p>É importante verificar a operação de NAT. Existem vários comandos de roteador úteis para exibir e apagar as traduções de NAT. Este tópico explica como verificar a operação de NAT usando as ferramentas disponíveis nos roteadores Cisco.</p> <p>Um dos comandos mais úteis ao verificar a operação de NAT é o comando <span class="cmd"><b>show ip nat translations</b></span>. Antes de usar os comandos <span class="cmd"><b>show</b></span> para verificar a NAT, você deve apagar as entradas de tradução dinâmica que ainda estejam presentes porque, por padrão, as traduções dinâmicas de endereço expiram da tabela de tradução NAT após um período de falta de uso. </p> <p>Na figura, o roteador R2 foi configurado para fornecer a sobrecarga de NAT aos clientes de 192.168.0.0 /16. Quando os hosts internos saem do roteador R2 para a Internet, eles são traduzidos para o endereço IP da interface serial com um número de porta de origem exclusivo. </p> <p>Suponha que os dois hosts na rede interna acessaram os serviços da web pela Internet. </p> <p><b>Clique no botão Traduções de NAT na figura.</b></p> <p>Observe que a saída do comando <span class="cmd"><b>show ip nat translations</b></span> exibe os detalhes das duas atribuições de NAT. Adicionar <span class="cmd"><b>verbose</b></span> ao comando exibirá as informações adicionais sobre cada tradução, inclusive há quanto tempo a entrada foi criada e usada.</p> <p>O comando exibe todas as traduções estáticas que foram configuradas, além das traduções dinâmicas que foram criadas pelo tráfego. Cada tradução é identificada através do protocolo e através dos endereços locais e globais, internos e externos.</p> <p><b>Clique no botão Estatísticas de NAT na figura.</b></p> <p>O comando <span class="cmd"><b>show ip nat statistics</b></span> exibe informações sobre o número total de traduções ativas, os parâmetros de configuração de NAT, quantos endereços estão no conjunto e quantos foram alocados.</p> <p>Na figura, os hosts iniciaram o tráfego da web, além do tráfego ICMP. </p> <p>Como alternativa, use o comando <span class="cmd"><b>show run</b></span> e procure a NAT, a lista de comandos de acesso, a interface ou comandos de conjunto com os valores exigidos. Examine-os cuidadosamente e corrija os erros que encontrar.</p> <p>Por padrão, a tradução expira depois de 24 horas, a menos que os temporizadores sejam reconfigurados com o comando <span class="cmd"><b>ip nat translation timeout</b>  <i>timeout_ seconds</i></span> no modo de configuração global. </p> <p><b>Clique no botão NAT apagado na figura.</b></p> <p>Às vezes é útil apagar as entradas dinâmicas antes do tempo padrão. Isso é especialmente verdadeiro ao testar a configuração de NAT. Para apagar as entradas dinâmicas antes de o tempo limite expirar, use comando global <span class="cmd"><b>clear ip nat translation</b></span>. </p> <p>A tabela na figura está exibindo os vários modos de apagar as traduções de NAT. Você pode especificar qual tradução apagar ou pode apagar todas as traduções da tabela usando o comando global <span class="cmd"><b>clear ip nat translation *</b></span>, como mostrado no exemplo. </p> <p>Somente as traduções dinâmicas são apagadas da tabela. As traduções estáticas não podem ser apagadas da tabela de tradução.</p></content-text>
</page>
<page type="OneColumn" id="tl1407020802">
<content-media type="StaticGraphic" id="cm8529346800">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020800/tl1407020802/cm8529346800.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407020000/tl1407020800/tl1407020802/cm8529346800text.xml"/></content-media>
<content-text><p><b>Identificação e solução de problemas de configuração da NAT e da sobrecarga de NAT</b></p> <p>Quando você tiver problemas de conectividade IP em um ambiente de NAT, geralmente é difícil determinar suas causas. A primeira etapa da resolução do problema é excluir a NAT como a causa. Siga estas etapas para verificar se a NAT está funcionando como esperado:</p> <p><b>Etapa 1.</b> Com base na configuração, defina claramente o que a NAT deve alcançar. Isso pode revelar um problema com a configuração.</p> <p><b>Etapa 2.</b> Verifique se as traduções corretas se encontram na tabela usando o comando <span class="cmd"><b>show ip nat translations</b></span>.</p> <p><b>Etapa 3.</b> Use os comandos <span class="cmd"><b>clear</b></span> e <span class="cmd"><b>debug</b></span> para verificar se a NAT está funcionando conforme o esperado. Verifique se as entradas dinâmicas são recriadas depois de serem apagadas.</p> <p><b>Etapa 4.</b> Observe detalhadamente o que acontece com o pacote e verifique se os roteadores possuem as informações de roteamento corretas para mover o pacote.</p> <p>Use o comando <span class="cmd"><b>debug ip nat</b></span> para verificar a operação do recurso de NAT exibindo as informações sobre os pacotes que são traduzidos pelo roteador. O comando <span class="cmd"><b>debug ip nat detailed</b></span> gera uma descrição de cada pacote considerado para tradução. Esse comando também exibe informações sobre certos erros ou condições de exceção, como a falha para alocar um endereço global.</p> <p>A figura apresenta uma amostra da saída do comando <span class="cmd"><b>debug ip nat</b></span>. Na saída do comando, é possível observar que o host interno 192.168.10.10 iniciou o tráfego para o host externo 209.165.200.254 e foi traduzido para o endereço 209.165.200.225. </p> <p>Ao decodificar a saída do comando da depuração, observe o que os símbolos e valores seguintes indicam: </p> <p><ul><li><b>*</b> - O asterisco próximo à NAT indica que a tradução está ocorrendo no caminho de comutação rápida. O primeiro pacote em uma conversação sempre é comutado por processo, o que é mais lento. Se existir uma entrada de cache, os pacotes restantes passam através do caminho que foi comutado rapidamente. </li><li><b>s=</b> - Refere-se ao endereço IP de origem. </li><li><b>a.b.c.d---> w.x.y.z</b> - Indica que o endereço de origem a.b.c.d é traduzido para w.x.y.z. </li><li><b>d=</b> - Refere-se ao endereço IP de destino. </li><li><b>[xxxx]</b> - O valor em colchetes é o número de identificação IP. Essas informações podem ser úteis para a depuração porque elas habilitam a correlação com outros rastros de pacote de analisadores de protocolo. </li></ul></p> <p>Você pode ver as seguintes demonstrações sobre como verificar, identificar e solucionar problemas da NAT nestes locais:</p> <p>Flash Animation Case Study: Can Ping Host, but Cannot Telnet: Animação em flash com duração de sete minutos sobre por que um dispositivo pode executar ping no host, mas não pode usar a telnet: <content-link target="http://www.cisco.com/warp/public/556/index.swf" type="external">http://www.cisco.com/warp/public/556/index.swf</content-link>. </p> <p>Flash Animation Case Study: Cannot Ping Beyond NAT: Animação em flash com duração de dez minutos sobre como um dispositivo não pode executar ping além da NAT: <content-link target="http://www.cisco.com/warp/public/556/TS_NATcase2/index.swf" type="external">http://www.cisco.com/warp/public/556/TS_NATcase2/index.swf</content-link>.</p></content-text>
</page>
<page type="OneColumn" id="tl1407020803">
<content-media type="ActivityPKA" id="cm7730771414">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407020000/tl1407020800/tl1407020803/cm7730771414/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407020000/tl1407020800/tl1407020803/cm7730771414/icontext.xml"/></content-media>
<content-text><p>A NAT traduz endereços privados, não roteáveis e internos em endereços públicos, roteáveis. A NAT tem um benefício adicional de proporcionar um nível de privacidade e segurança para uma rede porque ela oculta endereços IP internos de redes externas. Nesta atividade, você configurará a NAT dinâmica e estática.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_2_8.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1407030000">
<title><content-text>IPv6</content-text></title>
<topic type="" id="tl1407030100">
<title><content-text>Motivos para usar o IPv6</content-text></title>
<page type="OneColumn" id="tl1407030101">
<content-media type="InteractiveGraphicHotspots" id="cm5084072158">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030100/tl1407030101/cm5084072158.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030100/tl1407030101/cm5084072158text.xml"/></content-media>
<content-text><p><b>Por que precisamos de mais espaço de endereço</b></p> <p>Para compreender os problemas de endereçamento IP que atingem os administradores de rede, considere que o espaço de endereço do IPv4 fornece, aproximadamente, 4.294.967.296 endereços exclusivos. Desses, apenas 3,7 bilhões de endereços podem ser atribuídos porque o sistema de endereçamento do IPv4 separa os endereços em classes e reserva os endereços para multicast, teste e outros usos específicos.</p> <p>Com base nos números de janeiro de 2007, aproximadamente 2,4 bilhões dos endereços de IPv4 disponíveis já foram atribuídos a usuários finais ou ISPs. Isso deixa aproximadamente 1,3 bilhão de endereços ainda disponíveis do espaço de endereços do IPv4. Apesar desse número aparentemente grande, o espaço de endereços do IPv4 está acabando. </p> <p><b>Clique no botão Reproduzir na figura</b> para ver a rapidez desses acontecimentos durante os últimos 14 anos.</p> <p>Na última década, a comunidade da Internet analisou o esgotamento dos endereço do IPv4 e publicou pilhas de relatórios. Alguns relatórios preveem o esgotamento dos endereços de IPv4 por volta de 2010 e outros dizem que isso não acontecerá até 2013. </p> <p><b>Clique no botão Redução na figura </b>para ver como o espaço de endereços disponíveis está sendo reduzido.</p> <p>O crescimento da Internet, aliado ao aumento do poder da computação, aumentou o alcance dos aplicativos baseados em IP. </p> <p><b>Clique no botão Por que o IPv6 na figura </b>e pense sobre o que está levando a uma mudança para o IPv6. </p> <p>O conjunto de números está sendo reduzido pelos seguintes motivos:</p> <p><ul><li><b>Crescimento da população</b> - A população da Internet está crescendo. Em novembro de 2005, a Cisco estimou que havia 973 milhões de usuários aproximadamente. Esse número dobrou desde então. Além disso, os usuários ficam online por mais tempo, reservando os endereços IP por períodos mais longos e entrando em contato com cada vez mais pontos diariamente.</li><li><b>Usuários móveis</b> - A indústria produziu mais de um bilhão de telefones celulares. Foram produzidos mais de 20 milhões de dispositivos móveis habilitados para IP, inclusive assistentes digitais pessoais (<content-link target="{CF04F531-2FED-4CAF-9318-56BECA3BF996}" type="glossary">PDAs</content-link>, personal digital assistants), canetas digitais, blocos de notas e leitores de códigos de barra. Cada vez mais dispositivos móveis habilitados para IP ficam online todos os dias. Os telefones celulares antigos não precisavam de endereços IP, mas os novos precisam.</li><li><b>Transporte</b> - Haverá mais de um bilhão de automóveis por volta de 2008. Os modelos mais novos são habilitados para IP para permitir que a monitoração remota forneça uma manutenção e suporte em tempo hábil. A Lufthansa já fornece a conectividade da Internet em seus voos. Mais operadoras, incluindo os navios, fornecerão serviços semelhantes.</li><li><b>Equipamentos eletrônicos</b> - Os dispositivos mais novos permitem a monitoração remota usando a tecnologia IP. São exemplos os gravadores de vídeo digital (DVRs, Digital Video Recorder), que fazem o download de guias de programas e os atualizam pela Internet. As redes locais podem conectar esses dispositivos. </li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1407030102">
<content-media type="InteractiveGraphicHotspots" id="cm7560691137">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030100/tl1407030102/cm7560691137.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030100/tl1407030102/cm7560691137text.xml"/></content-media>
<content-text><p><b>Motivos para usar o IPv6</b></p> <p>O movimento para mudar do IPv4 para o IPv6 já começou, especialmente na Europa, Japão e na região da Ásia-Pacífico. Essas áreas estão esgotando seus endereços IPv4 distribuídos, o que torna o IPv6 ainda mais atraente e necessário. O movimento foi oficialmente iniciado no Japão no ano 2000, quando o governo japonês determinou a incorporação do IPv6 e definiu o prazo final para 2005 para que se atualizassem os sistemas existentes em todos os negócios e no setor público. A Coreia, China e Malásia tiveram iniciativas semelhantes. </p> <p>Em 2002, a IPv6 Task Force da Comunidade Europeia formou uma aliança estratégica para encorajar a adoção do IPv6 em todo o mundo. A IPv6 Task Force norte-americana começou a exigir que os mercados norte-americanos adotassem o IPv6. Os primeiros avanços significativos nos Estados Unidos são provenientes do Departamento de Defesa Norte-Americano (<content-link target="{AE4224F3-7DB9-4E61-BFBF-C195E1251D86}" type="glossary">DoD</content-link>, U.S Department of Defense). Prevendo o futuro e conhecendo as vantagens de dispositivos habilitados para IP, o DoD designou, já em 2003, que todos os novos equipamentos comprados, além de serem habilitados para IP, fossem habilitados também para o IPv6. Na realidade, todos os órgãos públicos norte-americanos devem começar a usar o IPv6 em suas redes principais por volta de 2008, e eles estão trabalhando para cumprir com esse prazo. </p> <p>A capacidade de dimensionar as redes para as demandas futuras requer um fornecimento ilimitado de endereços IP e uma mobilidade aprimorada que o DHCP e a NAT sozinhos não conseguem atingir. O IPv6 satisfaz os requisitos cada vez mais complexos do endereçamento hierárquico que o IPv4 não fornece. </p> <p>Devido à enorme base instalada do IPv4 no mundo, não é difícil avaliar que a transição das implantações do IPv4 para o IPv6 seja um desafio. Entretanto existe uma variedade de técnicas, inclusive uma opção de configuração automática, para fazer a transição de modo mais fácil. O mecanismo de transição usado por você dependerá das necessidades de sua rede.</p> <p>A figura compara as representações binárias e alfanuméricas dos endereços do IPv4 e do IPv6. Um endereço IPv6 é um valor binário de 128 bits que pode ser exibido como 32 dígitos hexadecimais. O IPv6 deve fornecer endereços suficientes para as necessidades do crescimento futuro da Internet por muitos anos. Existem endereços IPv6 suficientes para alocar mais do que o espaço de endereços de Internet do IPv4 inteiro a todas as pessoas do mundo.</p> <p><b>Clique no botão Perspectiva na figura.</b></p> <p>Então, o que aconteceu com o IPv5? O IPv5 foi usado para definir um protocolo experimental de streaming em tempo real. Para evitar qualquer confusão, foi decidido não usar o IPv5 e nomear o novo protocolo IP como IPv6.</p></content-text>
</page>
<page type="OneColumn" id="tl1407030103">
<content-media type="InteractiveGraphicHotspots" id="cm9648652735">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030100/tl1407030103/cm9648652735.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030100/tl1407030103/cm9648652735text.xml"/></content-media>
<content-text><p>O IPv6 não existiria não fosse o esgotamento reconhecido de endereços IPv4 disponíveis. Porém, além do maior espaço de endereços IP, o desenvolvimento do IPv6 apresentou oportunidades para aplicar as lições aprendidas a partir das limitações do IPv4 para criar um protocolo com recursos novos e aprimorados. </p> <p>Uma arquitetura de cabeçalho e uma operação de protocolo simplificados se traduzem em gastos operacionais reduzidos. Os recursos de segurança integrados significam práticas de segurança mais fáceis, extremamente ausentes em muitas redes atuais. Entretanto, talvez a melhoria mais significativa oferecida pelo IPv6 sejam os recursos de autoconfiguração que ele possui. </p> <p>A Internet está evoluindo rapidamente de uma coleção de dispositivos fixos para uma rede fluida de dispositivos móveis. O IPv6 permite que os dispositivos móveis adquiram e façam a transição rapidamente entre endereços conforme eles se movem entre redes externas, sem que haja necessidade de um agente externo. (Um agente externo é um roteador que pode funcionar como o ponto de anexo para um dispositivo móvel quando for de sua rede local para uma rede externa.) </p> <p>A autoconfiguração de endereço também significa uma conectividade de rede plug and play mais sólida. A autoconfiguração suporta clientes que tenham qualquer combinação de computadores, impressoras, câmeras digitais, rádios digitais, telefones IP, dispositivos domésticos habilitados para a Internet e brinquedos eletrônicos conectados às suas redes locais. Muitos fabricantes já integram o IPv6 em seus produtos.</p> <p>Muitos dos aprimoramentos oferecidos pelo IPv6 são explicados nesta seção, incluindo:</p> <p><ul><li>Endereçamento IP aprimorado</li><li>Cabeçalho simplificado</li><li>Mobilidade e segurança </li><li>Riqueza de transição</li></ul></p> <p><b>Endereçamento IP aprimorado</b></p> <p>Um espaço maior de endereço oferece vários aprimoramentos, incluindo: </p> <p><ul><li>Melhor acessibilidade e flexibilidade globais.</li><li>Melhor agregação de prefixos de IP anunciados nas tabelas de roteamento.</li><li><content-link target="{96D0E7A6-DD4B-43FD-9C6A-060803CD1AD7}" type="glossary">Hosts multihome</content-link>. Multihoming é uma técnica para aumentar a confiabilidade da conexão da Internet de uma rede IP. Com o IPv6, um host pode ter vários endereços IP sobre um link upstream físico. Por exemplo, um host pode conectar-se a vários ISPs.</li><li>A autoconfiguração, que pode incluir endereços de camada de enlace de dados no espaço de endereço.</li><li>Mais opções de plug and play para mais dispositivos.</li><li>Reendereçamento público-para-privado e fim-a-fim sem tradução de endereços. Ele torna a rede ponto a ponto (P2P) mais funcional e mais fácil de ser implantada.</li><li>Mecanismos simplificados para renumeração e modificação do endereço.</li></ul></p> <p><b>Clique no botão Cabeçalho simples na figura.</b></p> <p>A figura compara a estrutura de cabeçalho de IPv6 simplificada ao cabeçalho de IPv4. O cabeçalho de IPv4 possui 20 octetos e 12 campos de cabeçalho básicos, seguidos por um campo de opções e uma porção de dados (normalmente o segmento de <content-link target="{3813DE36-B20A-4CED-834A-BAF0BBBA1474}" type="glossary">Camada de transporte</content-link>). O cabeçalho de IPv6 possui 40 octetos, três campos de cabeçalho básicos de IPv4 e cinco campos de cabeçalho adicionais. </p> <p>O cabeçalho simplificado de IPv6 oferece várias vantagens com relação ao IPv4: </p> <p><ul><li>Melhor eficiência de roteamento para desempenho e escalabilidade de taxa de encaminhamento</li><li>Ausência de broadcasts e, desse modo, ausência de ameaças de broadcast storms</li><li>Sem necessidade de processar checksums</li><li>Mecanismos de cabeçalho de extensão simplificados e mais eficientes</li><li>Rótulos de fluxo para processamento por fluxo sem a necessidade de abrir o pacote interno de transporte para identificar os diversos fluxos de tráfego</li></ul></p> <p><b>Mobilidade e segurança aprimoradas</b></p> <p>A mobilidade e a segurança ajudam a garantir a conformidade com a funcionalidade dos padrões de <content-link target="{01D9F02E-61C1-4D40-9704-C1D6CFC0B8D4}" type="glossary">IP móveis</content-link> e Segurança IP (IPsec). A mobilidade permite que as pessoas com dispositivos de rede móveis, muitas com conectividade sem fio, movam-se entre as redes.</p> <p><ul><li>O padrão de IP móvel da IETF está disponível para o IPv4 e o IPv6. Ele permite que os dispositivos móveis se movam em conexões de rede estabelecidas sem interrupções. O dispositivos móveis usam um endereço secundário para obter essa mobilidade. Com o IPv4, esses endereços são configurados manualmente. Com o IPv6, as configurações são dinâmicas, dando uma mobilidade integrada aos dispositivos habilitados para Ipv6.</li><li>O IPsec está disponível para IPv4 e IPv6. Embora as funcionalidades sejam essencialmente idênticas em ambos os ambientes, o IPsec é obrigatório no IPv6, tornando a Internet do IPv6 mais segura. </li></ul></p> <p><b>Riqueza de transição</b></p> <p>O IPv4 não desaparecerá do dia para a noite. Ao contrário, ele coexistirá com o IPv6 e será gradualmente substituído por ele. Por essa razão, o IPv6 foi criado com técnicas de migração para abranger todos os casos concebíveis de atualização do IPv4. Porém, no final das contas, muitas foram rejeitadas pela comunidade tecnológica. </p> <p>Existem atualmente três abordagens principais.</p> <p><ul><li><content-link target="{5A031F62-DB2B-48CE-B80C-76DCB2E7D508}" type="glossary">Pilha dupla</content-link> </li><li>Tunelamento <content-link target="{B1567C90-CA76-41D5-B8C9-9C429E35C2E3}" type="glossary">6to4</content-link> </li><li>NAT-PT, tunelamento <content-link target="{69BFF587-F4F9-46D6-B107-2206D93FDF74}" type="glossary">ISATAP</content-link> e tunelamento <content-link target="{7C12AA82-1FCF-4BF4-8866-726DB4A139F0}" type="glossary">Teredo</content-link> (métodos de último caso)</li></ul></p> <p>Algumas dessas abordagens serão discutidas com mais detalhes posteriormente nesse capítulo. </p> <p>O conselho atual para fazer a transição para o IPv6 é "Pilha dupla onde puder, túnel onde precisar!"</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030200">
<title><content-text>Endereçamento IPv6</content-text></title>
<page type="OneColumn" id="tl1407030201">
<content-media type="StaticGraphic" id="cm9707697458">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030200/tl1407030201/cm9707697458.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030200/tl1407030201/cm9707697458text.xml"/></content-media>
<content-text><p><b>Representação de endereço IPv6</b></p> <p>Você conhece o endereço IPv4 de 32 bits como uma série de quatro campos de 8 bits, separada por pontos. Porém, endereços IPv6 maiores, de 128 bits, precisam de uma representação diferente por causa de seu tamanho. Os endereços IPv6 usam dois-pontos para separar as entradas em uma série de hexadecimal de 16 bits. </p> <p><b>Clique no botão Representação na figura. </b></p> <p>A figura mostra o endereço <b>2031:0000:130F:0000:0000:09C0:876A:130B</b>. O IPv6 não requer uma notação de cadeia de endereços explícita. A figura mostra como encurtar o endereço aplicando as seguintes diretrizes:</p> <p><ul><li>Os zeros à esquerda em um campo são opcionais. Por exemplo, o campo 09C0 é igual ao 9C0 e o campo 0000 é igual a 0. Assim 2031:<b>0000</b>: 130F:0000:0000:<b>09C0</b>:876A:130B podem ser escritos como 2031:<b>0</b>: 130F:0000:0000:<b>9C0</b>: 876A:130B.</li><li>Os campos sucessivos de zeros podem ser representados como dois sinais de dois-pontos "::”. Entretanto, este método de taquigrafia só pode ser usado uma vez em cada endereço. Por exemplo, 2031:0:130F:<b>0000</b>:<b>0000</b>:9C0:876A:130B pode ser escrito como 2031:0:130F::9C0:876A:130B.</li><li>Um endereço especificado é escrito como "::" porque contém somente zeros.</li></ul></p> <p>Usando o "::", a notação reduz bastante o tamanho da maioria dos endereços, como mostrado. Um analista de endereços identifica o número de zeros faltantes separando duas partes quaisquer de um endereço e digitando 0s até que os 128 bits estejam completos.</p> <p><b>Clique no botão Exemplos na figura</b> para obter alguns exemplos adicionais.</p></content-text>
</page>
<page type="OneColumn" id="tl1407030202">
<content-media type="InteractiveGraphicHotspots" id="cm7203451769">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030200/tl1407030202/cm7203451769.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030200/tl1407030202/cm7203451769text.xml"/></content-media>
<content-text><p><b>Endereço de unicast global do IPv6</b></p> <p>O IPv6 possui um formato de endereço que permite eventualmente uma maior agregação para o ISP. <content-link target="{49C1C003-C9B7-4CB4-AA14-3048046FCBBE}" type="glossary">Endereços de unicast globais</content-link> consistem geralmente de um prefixo de roteamento global de 48 bits e uma ID de sub-rede de 16 bits. As organizações individuais podem usar um campo de sub-rede de 16 bits para criar sua própria hierarquia de endereçamento local. Esse campo permite que uma organização use até 65.535 sub-redes individuais.</p> <p>Na parte superior da figura, podemos ver como a hierarquia adicional é acrescentada ao prefixo de roteamento global de 48 bits com o prefixo de registro, prefixo de ISP e prefixo do site. </p> <p>O endereço de unicast global atual que é atribuído pelo <content-link target="{38055F33-7CF2-40FC-808E-01A24C982FBE}" type="glossary">IANA</content-link> usa o intervalo de endereços iniciado com o valor binário 001 (2000::/3), que é 1/8 do espaço total do endereço IPv6 e que é o maior bloco de endereços atribuídos. O IANA está alocando o espaço de endereços IPv6 nos intervalos de 2001::/16 para os cinco registros RIR (ARIN, RIPE NCC, APNIC, LACNIC e AfriNIC). </p> <p>Para obter mais informações, consulte a RFC 3587, Formato de endereços de unicast de IPv6, que substitui a RFC 2374.</p> <p><b>Endereços reservados</b></p> <p>O IETF reserva uma porção do espaço de endereços IPv6 para vários usos, presentes e futuros. Os endereços reservados representam 1/256 do espaço de endereço IPv6 total. Alguns dos outros tipos de endereços IPv6 são originados deste bloco.</p> <p><b>Endereços privados</b></p> <p>Um bloco de endereços IPv6 é reservado para endereços privados, assim como é feito no IPv4. Esses endereços privados são locais somente para um link ou local específico e, portanto, nunca são roteados para fora de uma rede corporativa específica. Os endereços privados possuem um valor de primeiro octeto de "FE" em notação hexadecimal, com o próximo dígito hexadecimal sendo um valor de 8 para F. </p> <p>Esses endereços são divididos ainda em dois tipos, com base no escopo.</p> <p><ul><li><b>Endereços locais de site</b> são endereços semelhantes à Alocação de endereços para internet privada no IPv4 da RFC 1918 de hoje. O escopo desses endereços é um site ou organização inteiros. Entretanto, o uso dos endereços locais é problemático e está sendo substituído desde 2003 pela RFC 3879. Em hexadecimais, os endereços locais começam com "FE" e então de "C" até "F" para o terceiro dígito hexadecimal.</li><li><b><content-link target="{6377B8ED-80CC-4001-9545-3A313F4F76CC}" type="glossary">Endereços de enlace locais</content-link></b> são novos para o conceito de endereçamento com IP na Camada de rede. Esses endereços têm um escopo menor do que os endereços locais de site. Eles se referem somente a um link físico específico (rede física). Os roteadores não encaminham datagramas utilizando endereços de enlace locais, nem mesmo dentro da organização. Eles servem somente para comunicação local em um segmento de rede físico específico. Eles são usados para comunicações de link como a configuração de endereço automática, detecção de vizinho e detecção de roteador. Muitos protocolos de roteamento do IPv6 também usam endereços de enlace locais. Os endereços de enlace locais começam com "FE" e, assim, possuem um valor de "8" para "B" para o terceiro dígito hexadecimal.</li></ul></p> <p><b>Endereço de loopback </b></p> <p>Assim como ocorre no IPv4, foi fornecido um endereço IPv6 de loopback especial para testes. Os datagramas enviados para esse endereço retornam para o dispositivo de origem. Entretanto, existe apenas um endereço no IPv6 para essa função, e não um bloco inteiro. O endereço de loopback é 0:0:0:0:0:0:0:1, normalmente expresso com o uso da compressão do zero com o ":: 1."</p> <p><b>Endereço não especificado </b></p> <p>No IPv4, um endereço IP somente com zeros tem um significado especial. Ele se refere ao próprio host e é usado quando um dispositivo não souber seu próprio endereço. No IPv6, esse conceito foi formalizado, e o endereço somente com zeros (0:0:0:0:0:0:0:0) recebe o nome de endereço "não especificado." Ele é usado normalmente no campo de origem de um datagrama, o qual é enviado por um dispositivo que busca ter seu endereço IP configurado. É possível aplicar a compressão de endereços a esse endereço. Como somente contém zeros, ele se tornará simplesmente "::".</p></content-text>
</page>
<page type="OneColumn" id="tl1407030203">
<content-media type="StaticGraphic" id="cm5400670251">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030200/tl1407030203/cm5400670251.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030200/tl1407030203/cm5400670251text.xml"/></content-media>
<content-text><p><b>Gerenciamento de endereços IPv6 </b></p> <p>Os endereços do IPv6 usam identificadores de interface para identificar as interfaces em um link. Considere-os como a "porção de host" de um endereço IPv6. Os identificadores de interface devem ser exclusivos em um link específico. Os identificadores de interface são sempre de 64 bits e são derivados dinamicamente de um endereço de Camada 2 (endereço MAC). </p> <p>Você pode atribuir uma ID de endereço IPv6 estática ou dinamicamente:</p> <p><ul><li>Atribuição estática usando uma ID de interface manual </li><li>Atribuição estática usando uma ID de interface EUI-64 </li><li><content-link target="{040D2316-5F29-4499-8C5D-3A27CABE2D2A}" type="glossary">Configuração automática sem estado</content-link></li><li>DHCP para IPv6 (DHCPv6)</li></ul></p> <p><b>Atribuição de ID de interface manual</b></p> <p>Uma maneira de atribuir um endereço IPv6 estaticamente a um dispositivo é atribuir o prefixo (rede) e a porção da ID de interface (host) do endereço IPv6. Para configurar um endereço IPv6 em uma interface do roteador Cisco, use o comando <span class="cmd"><b>ipv6 address</b><i> ipv6-address/prefix-length</i></span> no modo de configuração de interface. O exemplo seguinte mostra a atribuição de um endereço IPv6 à interface de um roteador Cisco:</p> <p><span class="cmd">RouterX(config-if)#<b>ipv6 address 2001:DB8:2222:7272::72/64</b></span></p> <p><b>Atribuição de ID de interface EUI-64</b></p> <p>Outra maneira de atribuir um endereço IPv6 é configurar a porção do prefixo (rede) do endereço IPv6 e derivar a porção da ID de interface (host) do endereço MAC de camada 2 do dispositivo, conhecido como a ID de interface <content-link target="{C8E4563F-02F5-4500-AE1B-97518D13514D}" type="glossary">EUI-64</content-link>. </p> <p><b>Clique no botão EUI-64 na figura. </b></p> <p>O padrão EUI-64 explica como expandir os endereços MAC do IEEE 802 de 48 para 64 bits inserindo o 0xFFFE de 16 bits no meio do 24º bit do endereço MAC, a fim de criar um identificador de interface de 64 bits exclusivo.</p> <p>Para configurar um endereço IPv6 em uma interface do roteador Cisco e habilitar o processamento de IPv6 usando o EUI-64 nessa interface, use o comando <span class="cmd"><b>ipv6 address </b><i>ipv6-prefix/prefix-length</i><b> eui-64</b></span> no modo de configuração de interface. O exemplo seguinte mostra a atribuição de um endereço EUI-64 à interface de um roteador Cisco: </p> <p><span class="cmd">RouterX(config-if)#<b>ipv6 address 2001:DB8:2222:7272::/64 eui-64</b></span></p> <p><b>Configuração automática sem estado </b></p> <p>A configuração automática configura automaticamente o endereço IPv6. No IPv6, presume-se que os dispositivos que não sejam do PC, bem como os terminais de computador, serão conectados à rede. O mecanismo de configuração automática foi introduzido para permitir que a rede plug-and-play desses dispositivos ajudem a reduzir a sobrecarga de administração. </p> <p><b>DHCPv6 (sem estado)</b> </p> <p>O DHCPv6 permite que os servidores DHCP transmitam os parâmetros de configuração, como os endereços de rede IPv6, para os nós do IPv6. Ele oferece o recurso de alocação automática de endereços de rede reutilizáveis e uma flexibilidade de configuração adicional. Esse protocolo é um correspondente sem estado da configuração automática de endereços sem estado do IPv6 (RFC 2462) e pode ser usado separado da configuração automática de endereços sem estado do IPv6, ou simultaneamente a ela, para obter os parâmetros de configuração.</p> <p>Para obter mais informações sobre a atribuição de endereços IPv6, acesse o site: <content-link target="http://www.netbsd.org/docs/network/ipv6/" type="external">http://www.netbsd.org/docs/network/ipv6/</content-link>. </p></content-text>
</page>
</topic>
<topic type="" id="tl1407030300">
<title><content-text>Estratégias de transição do IPv6</content-text></title>
<page type="OneColumn" id="tl1407030301">
<content-media type="StaticGraphic" id="cm1536308169">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030300/tl1407030301/cm1536308169.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030300/tl1407030301/cm1536308169text.xml"/></content-media>
<content-text><p><b>Estratégias de transição do IPv6</b></p> <p>A transição do IPv4 não exige melhorias concomitantes em todos os nós. Muitos mecanismos de transição permitem uma integração tranquila do IPv4 e IPv6. Outros mecanismos que permitem que os nós de IPv4 se comuniquem com os nós de IPv6 estão disponíveis. Situações diferentes exigem estratégias diferentes. A figura ilustra a riqueza de estratégias de transição disponíveis.</p> <p>Lembre-se do conselho: "Pilha dupla onde puder, túnel onde precisar." Esses dois métodos são as técnicas mais comuns para fazer a transição de IPv4 para IPv6. </p> <p><b>Empilhamento duplo</b></p> <p>O empilhamento duplo é um método de integração no qual um nó possui implementação e conectividade a uma rede IPv4 e a uma rede IPv6. Essa é a opção recomendada e envolve a execução de IPv4 e IPv6 ao mesmo tempo. Os roteadores e os switches são configurados para suportar ambos os protocolos, sendo que o IPv6 é o protocolo preferido.</p> <p><b>Tunelamento</b></p> <p>A segunda técnica de transição mais importante é o tunelamento. Existem várias técnicas de tunelamento disponíveis, incluindo:</p> <p><ul><li>Tunelamento manual de IPv6 sobre IPv4 - Um pacote de IPv6 é encapsulado dentro do protocolo IPv4. Esse método exige roteadores de pilha dupla.</li><li>Tunelamento dinâmico 6to4 – Estabelece a conexão das ilhas de IPv6 automaticamente através de uma rede IPv4, normalmente a Internet. Ele aplica automaticamente um prefixo de IPv6 válido e exclusivo a cada ilha de IPv6, permitindo a rápida implantação do IPv6 em uma rede corporativa sem que ocorra a recuperação de endereço dos ISPs ou dos registros.</li></ul></p> <p>Outras técnicas de tunelamento menos populares, que estão além do escopo deste curso, incluem:</p> <p><ul><li>Protocolo de endereçamento automático de túnel intra-site (ISATAP, Intra-Site Automatic Tunnel Addressing Protocol) – Mecanismo de tunelamento de sobreposição automática que usa a rede de IPv4 subjacente como uma camada de enlace para o IPv6. Os túneis do ISATAP permitem que os hosts de pilha dupla individuais de IPv4 ou IPv6 dentro de um local se comuniquem com outros hosts em um link virtual, criando uma rede de IPv6 que utiliza a infraestrutura de IPv4. </li><li>Tunelamento Teredo - Uma tecnologia de transição de IPv6 que fornece o tunelamento automático de host para host em vez de um tunelamento de gateway. Essa abordagem transmite o tráfego unicast de IPv6 quando os hosts de pilha dupla (hosts que executam tanto o IPv6 quanto o IPv4) estão localizados atrás de um ou de vários NATs de IPv4.</li></ul></p> <p><b>Tradução do protocolo NAT (NAT-PT)</b></p> <p>O software IOS Cisco Release 12.3(2)T e mais recente (com o conjunto de recursos apropriado) também inclui o NAT-PT entre IPv6 e IPv4. Essa tradução permite a comunicação direta entre hosts que usam versões diferentes do protocolo IP. Essas traduções são mais complexas do que a NAT de IPv4. Neste momento, essa técnica de tradução é a opção menos favorável e deve ser usada como o último recurso.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030400">
<title><content-text>Pilha dupla do IOS Cisco</content-text></title>
<page type="OneColumn" id="tl1407030401">
<content-media type="StaticGraphic" id="cm4224964936">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030400/tl1407030401/cm4224964936.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030400/tl1407030401/cm4224964936text.xml"/></content-media>
<content-text><p><b>Pilha dupla do IOS Cisco</b></p> <p>O empilhamento duplo é um método de integração que permite que um nó tenha conectividade a uma rede IPv4 e a uma rede IPv6 simultaneamente. Cada nó possui duas pilhas de protocolo com a configuração na mesma interface ou em várias interfaces. </p> <p>A abordagem da pilha dupla para a integração de IPv6, na qual os nós possuem tanto as pilhas de IPv4 quanto as de IPv6, será um dos métodos de integração mais comumente usados. Um nó de pilha dupla escolhe qual pilha usar com base no endereço de destino do pacote. Um nó de pilha dupla deve preferir o IPv6 quando ele estiver disponível. Os aplicativos antigos exclusivos de IPv4 continuam funcionando como antes. Os aplicativos novos e modificados tiram proveito de ambas as camadas de IP.</p> <p>Uma nova interface de programação de aplicativos (<content-link target="{14979236-EFA0-4318-9A62-AE00FAED7118}" type="glossary">API</content-link>, Application Programming Interface) foi definida para suportar os endereços de IPv4 e de IPv6 e solicitações de DNS. Uma API facilita a troca de mensagens ou de dados entre dois ou mais aplicativos de software diferentes. Um exemplo de uma API é a interface virtual entre duas funções de software, como um processador de textos e uma planilha. A API é integrada aos aplicativos de software para traduzir o IPv4 em IPv6 e vice-versa, usando o mecanismo de conversão de IP. Os novos aplicativos podem usar o IPv4 e o IPv6. </p> <p>A experiência de portar os aplicativos de IPv4 para IPv6 sugere que, para a maioria dos aplicativos, há uma alteração mínima em alguns pontos localizados dentro do código-fonte. Essa técnica é bastante conhecida e tem sido aplicada nas últimas outras transições de protocolo. Ela permite melhorias de aplicativos graduais, uma por uma, para o IPv6.</p> <p><b>Clique no botão Configurando a interface de IPv6 na figura.</b></p> <p>O software IOS Cisco Release 12.2(2)T e mais recente (com o conjunto de recursos apropriado) são habilitados para o IPv6. Logo após a configuração do IPv4 e IPv6 básicos na interface, a interface sofre o empilhamento duplo e encaminha o tráfego de IPv4 e de IPv6 naquela interface. Observe que um endereço de IPv4 e um endereço de IPv6 foram configurados.</p> <p>O uso do IPv6 em um roteador do IOS Cisco exige que você use o comando de configuração global <span class="cmd"><b>ipv6 unicast-routing</b></span>. Esse comando habilita o encaminhamento de datagramas de IPv6.</p> <p>Você deve configurar todas as interfaces que encaminham o tráfego de IPv6 com um endereço de IPv6 usando o comando de interface <span class="cmd"><b>ipv6 address</b>  <i>IPv6-address</i> [/<i>prefix length</i>]</span>.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030500">
<title><content-text>Tunelamento de IPv6</content-text></title>
<page type="OneColumn" id="tl1407030501">
<content-media type="StaticGraphic" id="cm2393730549">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030500/tl1407030501/cm2393730549.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030500/tl1407030501/cm2393730549text.xml"/></content-media>
<content-text><p><b>Tunelamento de IPv6</b></p> <p>O tunelamento é um método de integração onde um pacote de IPv6 é encapsulado dentro de outro protocolo, como o IPv4. Esse método permite a conexão das ilhas de IPv6 sem que haja a necessidade de converter as redes intermediárias para o IPv6. Quando o IPv4 for usado para encapsular o pacote de IPv6, um tipo de protocolo de 41 será especificado no cabeçalho de IPv4, e o pacote incluirá um cabeçalho de IPv4 de 20 bytes sem opções, um cabeçalho de IPv6 e a payload. Ele também exige roteadores de pilha dupla. </p> <p>O tunelamento apresenta estes dois problemas. A unidade máxima de transmissão (<content-link target="{8E084A16-DBE2-402F-89CA-127F980A1F3A}" type="glossary">MTU</content-link>, Maximum Transmission Unit) será diminuída efetivamente em 20 octetos se o cabeçalho de IPv4 não contiver nenhum campo opcional. Além disso, é geralmente difícil identificar e solucionar problemas de uma rede tunelada.</p> <p>O tunelamento é uma técnica de integração e transição intermediária e não deve ser considerada como uma solução final. Uma arquitetura de IPv6 nativa será o objetivo final.</p></content-text>
</page>
<page type="OneColumn" id="tl1407030502">
<content-media type="StaticGraphic" id="cm5883982319">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030500/tl1407030502/cm5883982319.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030500/tl1407030502/cm5883982319text.xml"/></content-media>
<content-text><p><b>Túnel IPv6 manualmente configurado</b></p> <p>Um túnel manualmente configurado equivale a um link permanente entre dois domínios de IPv6 sobre um backbone de IPv4. A utilização principal é para conexões estáveis que exigem uma comunicação regular segura entre dois roteadores de extremidade ou entre um sistema final e um roteador de extremidade, ou para a conexão com redes IPv6 remotas. Os roteadores finais devem ter passado por empilhamento duplo, e a configuração não pode mudar dinamicamente conforme as necessidades da rede e do roteamento precisem de mudanças.</p> <p>Os administradores configuram um endereço IPv6 estático manualmente em uma interface de túnel e atribuem endereços IPv4 estáticos configurados manualmente à origem do túnel e ao destino do túnel. O host ou roteador em cada extremidade de um túnel configurado deve suportar as pilhas do protocolo IPv4 e IPv6. Os túneis manualmente configurados podem ser configurados entre roteadores de borda ou entre um roteador de borda e um host.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030600">
<title><content-text>Considerações de roteamento com o IPv6</content-text></title>
<page type="OneColumn" id="tl1407030601">
<content-media type="StaticGraphic" id="cm6689742715">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030600/tl1407030601/cm6689742715.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030600/tl1407030601/cm6689742715text.xml"/></content-media>
<content-text><p><b>Configurações de roteamento com o IPv6</b></p> <p>Assim como o roteamento entre domínios com endereços classless (<content-link target="{BD788C82-F372-4866-A50A-3F374EA9A92F}" type="glossary">CIDR</content-link>, Classless Interdomain Routing) do IPv4, o IPv6 usa o roteamento de correspondência com o prefixo mais longo. O IPv6 utiliza versões modificadas da maioria dos protocolos de roteamento comuns para lidar com os endereços IPv6 mais longos e com estruturas de cabeçalho diferentes.</p> <p>Espaços de endereços maiores abrem espaço para alocações de endereço grandes para os ISPs e as organizações. Um ISP agrega todos os prefixos de seus clientes em um único prefixo e anuncia esse único prefixo para a Internet de IPv6. O espaço de endereços aumentado é suficiente para permitir que as organizações definam um único prefixo para toda a sua rede.</p> <p>Mas como isso afeta o desempenho do roteador? Uma breve revisão de como um roteador funciona em uma rede ajudará a ilustrar como o IPv6 afeta o roteamento. Conceitualmente, um roteador possui três áreas funcionais:</p> <p><ul><li>O plano de controle trata da interação do roteador com os outros elementos de rede, fornecendo as informações necessárias para tomar as decisões e para controlar a operação global do roteador. Este plano executa processos tais como os protocolos de roteamento e o gerenciamento de rede. Essas funções são geralmente complexas. </li><li>O plano de dados lida com o encaminhamento de pacotes de uma interface física ou lógica para outra. Ele envolve diferentes mecanismos de comutação como a comutação de processo e o Cisco Express Forwarding (CEF) em roteadores do software IOS Cisco. </li><li>Os serviços aprimorados incluem recursos avançados aplicados ao encaminhar dados, como a filtragem de pacotes, qualidade de serviço (QoS, Quality of Service), criptografia, tradução e auditoria. </li></ul></p> <p>O IPv6 apresenta essas funções com novos desafios específicos. </p> <p><b>Plano de controle do IPv6</b></p> <p>A habilitação do IPv6 em um roteador inicia os processos operacionais de seu plano de controle especificamente para o IPv6. As características do protocolo moldam o desempenho desses processos e a quantidade de recursos necessários para operá-los: </p> <p><ul><li><b>Tamanho de endereço do IPv6</b> - O tamanho do endereço afeta as funções de processamento de informações de um roteador. Sistemas que usam uma CPU de 64 bits, um barramento ou uma estrutura de memória, podem transmitir os endereços de origem e destino de IPv4 em um único ciclo de processamento. Para o IPv6, os endereços de origem e destino exigem quatro ciclos de dois ciclos cada para processar as informações de endereço de origem e de destino. Como resultado, é provável que os roteadores que confiam exclusivamente no processamento de software funcionem mais lentamente do que quando estão em um ambiente de IPv4. </li><li><b>Endereços de nó de IPv6 múltiplos</b> - Como os nós de IPv6 podem utilizar vários endereços de unicast de IPv6, o consumo de memória do cache de Detecção de vizinho pode ser afetado. </li><li><b>Protocolos de roteamento de IPv6</b> - Os protocolos de roteamento de IPv6 são semelhantes aos seus correspondentes do IPv4 mas, como um prefixo do IPv6 é quatro vezes maior do que um prefixo de IPv4, as atualizações de roteamento precisam levar mais informações. </li><li><b>Tamanho da tabela de roteamento</b> - O maior espaço de endereços do IPv6 leva a redes maiores e a uma Internet muito maior. Isso implica em tabelas de roteamento maiores e em requisitos de memória maiores para suportá-los. </li></ul></p> <p><b>Plano de dados do IPv6</b></p> <p>O plano de dados encaminha pacotes IP com base nas decisões feitas pelo plano de controle. O mecanismo de encaminhamento analisa as informações de pacote IP relevantes e faz uma busca para fazer a correspondência das informações analisadas com as políticas de encaminhamento definidas pelo plano de controle. O IPv6 afeta o desempenho das funções de análise e busca: </p> <p><ul><li><b>Cabeçalhos de extensão de IPv6 de análise</b> - Os aplicativos, incluindo o IPv6 móvel, geralmente usam informações de endereço IPv6 nos cabeçalhos de extensão, aumentando assim seu tamanho. Esses campos adicionais exigem um processamento adicional. Por exemplo, um roteador que usa as ACLs para filtrar as informações de Camada 4 precisa aplicar as ACLs aos pacotes com cabeçalhos de extensão, bem como aos que não têm esses cabeçalhos. Se o tamanho do cabeçalho de extensão exceder o tamanho fixo do registro do hardware do roteador, haverá falha na comutação do hardware, e os pacotes poderão ser colocados na comutação de software ou poderão ser ignorados. Isto afeta gravemente o desempenho de encaminhamento do roteador.</li><li><b>Pesquisa de endereço IPv6</b> - O IPv6 executa uma pesquisa de pacotes que entram no roteador para localizar a interface de saída correta. No IPv4, o processo de decisão de encaminhamento analisa um endereço de destino de 32 bits. No IPv6, a decisão de encaminhamento poderia exigir possivelmente uma análise de um endereço de 128 bits. A maioria dos roteadores de hoje executa pesquisas utilizando um circuito integrado específico de aplicativo (ASIC, application-specific integrated circuit) com uma configuração fixa que executa as funções para as quais eles foram criados originalmente – o IPv4. Isso pode resultar novamente na colocação dos pacotes em um processamento de software mais lento ou fazer com que eles sejam todos ignorados.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1407030602">
<content-media type="StaticGraphic" id="cm9788136090">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030600/tl1407030602/cm9788136090.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030600/tl1407030602/cm9788136090text.xml"/></content-media>
<content-text><p><b>Protocolo de roteamento RIPNg</b></p> <p>As rotas do IPv6 usam os mesmos protocolos e técnicas que o IPv4. Embora os endereços sejam mais longos, os protocolos usados no roteamento de IPv6 são simplesmente extensões lógicas dos protocolos usados no IPv4. </p> <p>A RFC 2080 define a última geração do Protocolo de informações de roteamento (<content-link target="{6701051E-5D1C-4E48-BEA4-CEA3B1FDD38A}" type="glossary">RIPng</content-link>, Routing Information Protocol next generation) como um protocolo de roteamento simples baseado em RIP. O RIPng não é nem mais potente e nem menos potente do que o RIP, porém ele fornece uma maneira simples de ativar uma rede de IPv6 sem a necessidade de criar um novo protocolo de roteamento. </p> <p>O RIPng é um protocolo de roteamento do vetor de distância com um limite de 15 saltos que usa o split horizon e as <content-link target="{FA51E5B4-5747-4E97-BDC0-91ACEF0FD13E}" type="glossary">atualizações de poison reverse</content-link> para evitar os loops de roteamento. Sua simplicidade vem do fato de ele não exigir nenhum conhecimento global da rede. Somente os roteadores vizinhos trocam mensagens locais.</p> <p>O RIPng inclui as seguintes características:</p> <p><ul><li>Baseia-se no RIP versão 2 (RIPv2) do IPv4 e é semelhante ao RIPv2</li><li>Utiliza o IPv6 para o transporte</li><li>Inclui o prefixo de IPv6 e o endereço IPv6 do próximo salto</li><li>Utiliza o <content-link target="{911B0C25-02FF-4A99-8506-EC16E30CA08F}" type="glossary">grupo multicast</content-link> <content-link target="{08F907A1-240A-4B98-8B5F-EECFD0E9F5B5}" type="glossary">FF02::9</content-link> como o endereço de destino para atualizações de RIP (semelhante à função de broadcast executada pelo RIP no IPv4)</li><li>Envia atualizações na porta UDP 521</li><li>É suportado pelo IOS Cisco Release 12.2 (2) T e mais recentes</li></ul></p> <p>Em implantações que sofreram empilhamento dual, são necessários o RIP e o RIPng.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030700">
<title><content-text>Configurando os endereços IPv6</content-text></title>
<page type="OneColumn" id="tl1407030701">
<content-media type="StaticGraphic" id="cm2303979149">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030700/tl1407030701/cm2303979149.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030700/tl1407030701/cm2303979149text.xml"/></content-media>
<content-text><p><b>Habilitando o IPv6 em roteadores Cisco</b></p> <p>Existem duas etapas básicas para ativar o IPv6 em um roteador. Primeiro, você deve ativar o encaminhamento de tráfego IPv6 no roteador e, em seguida, você deve configurar cada interface que exija o IPv6. </p> <p>Por padrão, o encaminhamento de tráfego do IPv6 está desabilitado em um roteador Cisco. Para ativá-lo entre as interfaces, é necessário configurar o comando global <span class="cmd"><b>ipv6 unicast-routing</b></span>. </p> <p>O comando <span class="cmd"><b>ipv6 address</b></span> pode configurar um endereço IPv6 global. O endereço de enlace local será configurado automaticamente quando um endereço for atribuído à interface. Você deve especificar o endereço IPv6 de 128 bits inteiro ou deve especificar o uso do prefixo de 64 bits usando a opção <span class="cmd"><b>eui-64</b></span>.</p></content-text>
</page>
<page type="OneColumn" id="tl1407030702">
<content-media type="StaticGraphic" id="cm3099516220">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030700/tl1407030702/cm3099516220.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030700/tl1407030702/cm3099516220text.xml"/></content-media>
<content-text><p><b>Exemplo de configuração do endereço IPv6</b></p> <p>Você pode especificar completamente o endereço IPv6 ou pode computar o identificador de host (64 bits mais à direta) do identificador de EUI-64 da interface. No exemplo, o endereço IPv6 da interface é configurado usando o formato EUI-64.</p> <p>Como alternativa, você pode especificar completamente o endereço IPv6 inteiro para atribuir um endereço a uma interface do roteador usando o comando <span class="cmd"><b>ipv6 address</b>  <i>ipv6-address/prefix-length</i></span> no modo de configuração de interface.</p> <p>A configuração de um endereço IPv6 em uma interface configura automaticamente o endereço de enlace local para essa interface. </p></content-text>
</page>
<page type="OneColumn" id="tl1407030703">
<content-media type="StaticGraphic" id="cm9959481463">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030700/tl1407030703/cm9959481463.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030700/tl1407030703/cm9959481463text.xml"/></content-media>
<content-text><p><b>Resolução de nome IPv6 do IOS Cisco </b></p> <p>Existem duas maneiras de realizar a resolução de nome no processo de software do IOS Cisco:</p> <p><ul><li>Definir um nome estático para um endereço IPv6 usando o comando <span class="cmd"><b>ipv6 host name</b> [<i>port</i>] <i>ipv6-address1</i> [<i>ipv6-address2...ipv6-address4</i>]</span>. Você pode definir até quatro endereços IPv6 para um nome de host. A opção de porta se refere à porta Telnet a ser usada para o host associado.</li><li>Especificar o servidor DNS usado pelo roteador com o comando <span class="cmd"><b>ip name-server</b>  <i>address</i></span>. O endereço pode ser um endereço IPv4 ou IPv6. É possível especificar até seis servidores DNS com esse comando.</li></ul></p></content-text>
</page>
</topic>
<topic type="" id="tl1407030800">
<title><content-text>Configurando o RIPng com IPv6</content-text></title>
<page type="OneColumn" id="tl1407030801">
<content-media type="StaticGraphic" id="cm3387824408">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030800/tl1407030801/cm3387824408.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030800/tl1407030801/cm3387824408text.xml"/></content-media>
<content-text><p><b>Configurar o RIPng com IPv6</b></p> <p>Ao configurar os protocolos de roteamento suportados no IPv6, é necessário criar o processo de roteamento, habilitar o processo de roteamento nas interfaces e personalizar o protocolo de roteamento para sua rede privada.</p> <p>Antes de configurar o roteador para que ele execute o RIP de IPv6, faça a habilitação global usando o comando de configuração global <span class="cmd"><b>ipv6 unicast-routing</b></span> e habilite o IPv6 nas interfaces em que o RIP de IPv6 deverá ser habilitado.</p> <p>Para habilitar o roteamento RIPng no roteador, use o comando de configuração global <span class="cmd"><b>ipv6 router rip </b><i>name</i></span>. O parâmetro <span class="cmd"><i>name</i></span> (nome) identifica o processo RIP. Este nome de processo é usado posteriormente ao configurar o RIPng nas interfaces participantes.</p> <p>Para o RIPng, em vez de usar o comando <span class="cmd"><b>network</b></span> para identificar quais interfaces devem executar o RIPng, você usa o comando <span class="cmd"><b>ipv6 rip </b><i>name</i><b> enable</b></span> no modo de configuração de interface para habilitar o RIPng em uma interface. O parâmetro <span class="cmd"><i>name</i></span> (nome) deve corresponder ao parâmetro de nome no comando <span class="cmd"><b>ipv6 router rip</b></span>.</p> <p>A habilitação do RIP em uma interface cria dinamicamente um processo de "router rip" se necessário.</p></content-text>
</page>
<page type="OneColumn" id="tl1407030802">
<content-media type="StaticGraphic" id="cm9465482678">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030800/tl1407030802/cm9465482678.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030800/tl1407030802/cm9465482678text.xml"/></content-media>
<content-text><p><b>Exemplo: RIPng para configuração de IPv6</b></p> <p>O exemplo mostra uma rede de dois roteadores. O roteador R1 está conectado à rede padrão. Nos roteadores R2 e R1, o nome RT0 identifica o processo de RIPng. O RIPng é habilitado na primeira interface Ethernet do roteador R1 usando o comando <span class="cmd"><b>ipv6 rip RT0 enable</b></span>. O roteador R2 mostra que o RIPng está habilitado nas interfaces Ethernet usando o comando <span class="cmd"><b>ipv6 rip RT0 enable</b></span>.</p> <p>Essa configuração permite que as interfaces Ethernet 1 no roteador R2 e Ethernet 0 de ambos os roteadores troquem informações de roteamento de RIPng.</p></content-text>
</page>
</topic>
<topic type="" id="tl1407030900">
<title><content-text>Verificando, identificando e solucionando problemas de RIPng</content-text></title>
<page type="OneColumn" id="tl1407030901">
<content-media type="StaticGraphic" id="cm6738828042">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030900/tl1407030901/cm6738828042.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407030000/tl1407030900/tl1407030901/cm6738828042text.xml"/></content-media>
<content-text><p><b>Verificando, identificando e solucionando problemas de RIPng para o IPv6</b></p> <p>Depois de configurar o RIPng, é necessário fazer uma verificação. A figura relaciona os vários comandos show que podem ser usados.</p> <p><b>Clique no botão Identificação e solução de problemas na figura.</b></p> <p>Se você descobrir que o RIPng não está funcionando corretamente durante a verificação, será preciso identificar e solucionar o problema.</p> <p>A figura relaciona os comandos usados para identificar e solucionar os problemas de RIPng.</p></content-text>
</page>
<page type="FullScreen" id="tl1407030902">
<content-media type="ActivityPopup" id="cm1804566569">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407030000/tl1407030900/tl1407030902/cm1804566569/" mime="shockwave/flash" scale="true" type="directory" width="800" height="450" external="tl1407000000/tl1407030000/tl1407030900/tl1407030902/cm1804566569/icontext.xml"/></content-media>
<content-text><p>Atividade de memória flash</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1407040000">
<title><content-text>Laboratórios do capítulo</content-text></title>
<topic type="" id="tl1407040100">
<title><content-text>Configuração básica DHCP e NAT</content-text></title>
<page type="OneColumn" id="tl1407040101">
<content-media type="ActivityLab" id="cm4964607610">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040100/tl1407040101/cm4964607610/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040100/tl1407040101/cm4964607610/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, você irá configurar os serviços DHCP e NAT IP. Um roteador é o servidor DHCP. O outro roteador encaminha solicitações DHCP ao servidor. Você também definirá as configurações de NAT estáticas e dinâmicas, inclusive a sobrecarga de NAT. Quando você concluir as configurações, verifique a conectividade entre os endereços internos e externos.</p></content-text>
</page>
<page type="OneColumn" id="tl1407040102">
<content-media type="ActivityPKA" id="cm8735836513">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040100/tl1407040102/cm8735836513/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040100/tl1407040102/cm8735836513/icontext.xml"/></content-media>
<content-text><p>Esta atividade é uma variação do laboratório 7.4.1. O Packet Tracer pode não suportar todas as tarefas especificadas no laboratório prático. Esta atividade não deve ser considerada equivalente à conclusão do laboratório prático. O Packet Tracer não substitui um experimento em laboratório prático com equipamentos reais.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_4_1.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl1407040200">
<title><content-text>Configuração avançada DHCP e NAT</content-text></title>
<page type="OneColumn" id="tl1407040201">
<content-media type="ActivityLab" id="cm8894517315">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040200/tl1407040201/cm8894517315/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040200/tl1407040201/cm8894517315/icontext.xml"/></content-media>
<content-text><p>Neste laboratório, configure os serviços de endereço IP usando a rede mostrada no diagrama de topologia. Se você precisar de assistência, consulte o laboratório de configuração básico de DHCP e NAT. No entanto, tente fazer o máximo possível.</p></content-text>
</page>
<page type="OneColumn" id="tl1407040202">
<content-media type="ActivityPKA" id="cm3656238578">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040200/tl1407040202/cm3656238578/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040200/tl1407040202/cm3656238578/icontext.xml"/></content-media>
<content-text><p>Esta atividade é uma variação do laboratório 7.4.2. O Packet Tracer pode não suportar todas as tarefas especificadas no laboratório prático. Esta atividade não deve ser considerada equivalente à conclusão do laboratório prático. O Packet Tracer não substitui um experimento em laboratório prático com equipamentos reais.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_4_2.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl1407040300">
<title><content-text>Identificação e solução de problemas de DHCP e NAT</content-text></title>
<page type="OneColumn" id="tl1407040301">
<content-media type="ActivityLab" id="cm8434137066">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040300/tl1407040301/cm8434137066/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040300/tl1407040301/cm8434137066/icontext.xml"/></content-media>
<content-text><p>Os roteadores da sua empresa foram configurados por um engenheiro de rede sem experiência. Vários erros na configuração resultaram em problemas de conectividade. Seu chefe lhe pediu para identificar e solucionar os problemas, corrigir os erros de configuração e documentar seu trabalho. Com seus conhecimentos de DHCP, NAT e métodos de teste padrão, identifique e corrija os erros. Certifique-se de que todos os clientes tenham total conectividade. </p></content-text>
</page>
<page type="OneColumn" id="tl1407040302">
<content-media type="ActivityPKA" id="cm7633888453">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407040000/tl1407040300/tl1407040302/cm7633888453/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407040000/tl1407040300/tl1407040302/cm7633888453/icontext.xml"/></content-media>
<content-text><p>Esta atividade é uma variação do laboratório 7.4.3. O Packet Tracer pode não suportar todas as tarefas especificadas no laboratório prático. Esta atividade não deve ser considerada equivalente à conclusão do laboratório prático. O Packet Tracer não substitui um experimento em laboratório prático com equipamentos reais.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_4_3.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b> </p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl1407050000">
<title><content-text>Resumo do capítulo</content-text></title>
<topic type="" id="tl1407050100">
<title><content-text>Resumo</content-text></title>
<page type="OneColumn" id="tl1407050101">
<content-media type="InteractiveGraphicHotspots" id="cm1915434518">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407050000/tl1407050100/tl1407050101/cm1915434518.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407050000/tl1407050100/tl1407050101/cm1915434518text.xml"/></content-media>
<content-text><p>Este capítulo tratou das principais soluções do problema da diminuição do espaço de endereços de Internet. Você aprendeu a usar o DHCP para atribuir endereços IP privados dentro de sua rede. Isso conserva o espaço de endereços públicos e impede uma sobrecarga administrativa considerável gerenciando acréscimos, mudanças e alterações. Você aprendeu a implementar o NAT e a sobrecarga de NAT para conservar o espaço de endereços públicos e criar intranets seguras privadas sem afetar sua conexão de ISP. Entretanto, a NAT possui desvantagens no que se refere a seus efeitos negativos no desempenho do dispositivo, segurança, mobilidade e conectividade fim-a-fim.</p> <p>No geral, a capacidade de dimensionar as redes para as demandas futuras requer um fornecimento ilimitado de endereços IP e uma mobilidade aprimorada que o DHCP e a NAT sozinhos não conseguem atingir. O IPv6 satisfaz os requisitos cada vez mais complexos do endereçamento hierárquico que o IPv4 não fornece. O aparecimento do IPv6 não lida somente com o esgotamento dos endereços IPv4 e deficiências de NAT, ele fornece novos e melhores recursos. Na breve introdução ao IPv6 nesta lição, você aprendeu como os endereços IPv6 são estruturados, como eles irão aprimorar a segurança e a mobilidade da rede e como o mundo do IPv4 fará a transição para o IPv6.</p></content-text>
</page>
<page type="FullScreen" id="tl1407050102">
<content-media type="StaticGraphic" id="cm7087997872">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407050000/tl1407050100/tl1407050102/cm7087997872.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1407000000/tl1407050000/tl1407050100/tl1407050102/cm7087997872text.xml"/></content-media>
<content-text><p>Verifique sua compreensão</p></content-text>
</page>
<page type="OneColumn" id="tl1407050103">
<content-media type="ActivityPKA" id="cm8704662622">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407050000/tl1407050100/tl1407050103/cm8704662622/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1407000000/tl1407050000/tl1407050100/tl1407050103/cm8704662622/icontext.xml"/></content-media>
<content-text><p>Nesta atividade final, você irá configurar PPP, OSPF, DHCP, NAT e roteamento padrão para ISP. Em seguida, você verificará sua configuração.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do arquivo PDF abaixo.</p> <p><content-link target="E4_PTAct_7_5_1.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl1407060000">
<title><content-text>Teste do capítulo</content-text></title>
<topic type="" id="tl1407060100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl1407060101">
<content-media type="ChapterQuiz" id="cm6921524731">	<title><content-text></content-text></title>	<media ref="tl1407000000/tl1407060000/tl1407060100/tl1407060101/cm6921524731/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl1407000000/tl1407060000/tl1407060100/tl1407060101/cm6921524731/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>

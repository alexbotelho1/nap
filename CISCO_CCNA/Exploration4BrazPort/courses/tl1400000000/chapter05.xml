<chapter type="" id="tl1405000000">
<title><content-text>ACLs</content-text></title>
<section type="ChapterIntroduction" id="tl1405000000">
<title><content-text>Introdução</content-text></title>
<topic type="" id="tl1405000100">
<title><content-text>Introdução</content-text></title>
<page type="OneColumn" id="tl1405000101">
<content-media type="ChapterIntroduction" id="cm5680274071">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405000000/tl1405000100/tl1405000101/cm5680274071.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405000000/tl1405000100/tl1405000101/cm5680274071text.xml"/></content-media>
<content-text><p>Segurança de rede é um assunto enorme, e grande parte dele está além do escopo deste curso. No entanto, uma das habilidades mais importantes das quais um administrador de rede precisa é dominar as listas de controle de acesso (ACLs). Os administradores utilizam as ACLs a fim de parar o tráfego ou permitir apenas o tráfego especificado enquanto interrompe todo o restante do tráfego em suas redes. Este capítulo inclui uma oportunidade para desenvolver o seu domínio de ACLs com uma série de lições, atividades e exercícios de laboratório.</p> <p>Os designers de rede utilizam firewalls para proteger redes do uso não autorizado. Os firewalls são soluções em hardware ou software que aplicam políticas de segurança de rede. Considere uma trava na porta de um quarto dentro de um edifício. A trava só permite que usuários autorizados com uma chave ou cartão de acesso abram a porta. Da mesma forma, um firewall filtra pacotes não autorizados ou potencialmente perigosos para que não entrem na rede. Em um roteador Cisco, você pode configurar um firewall simples que forneça recursos de filtragem de tráfego básicos utilizando ACLs. </p> <p>Uma ACL é uma lista sequencial de instruções de permissão ou negação que se aplicam a endereços ou protocolos de camada superior. As ACLs fornecem uma forma eficiente de controlar o tráfego dentro e fora da sua rede. Você pode configurar as ACLs para todos os protocolos de rede roteados. </p> <p>A razão mais importante para configurar as ACLs é fornecer segurança para a sua rede. Este capítulo explica como utilizar ACLs padrão e estendidas como parte de uma solução em segurança e ensina como configurá-las em um roteador Cisco. Dicas, considerações, recomendações e diretrizes gerais sobre como utilizar ACLs são incluídas. </p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1405010000">
<title><content-text>Utilizando as ACLs para proteger redes</content-text></title>
<topic type="" id="tl1405010100">
<title><content-text>Uma conversa TCP</content-text></title>
<page type="OneColumn" id="tl1405010101">
<content-media type="StaticGraphic" id="cm3263797222">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010100/tl1405010101/cm3263797222.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010100/tl1405010101/cm3263797222text.xml"/></content-media>
<content-text><p>As ACLs permitem controlar o tráfego dentro e fora da sua rede. Esse controle pode ser tão simples quanto permitir ou negar hosts de rede ou endereços. No entanto, as ACLs também podem ser configuradas para controlar o tráfego da rede com base na porta TCP utilizada. Para compreender como uma ACL funciona com o TCP, permita-nos observar o diálogo que ocorre durante uma conversa TCP quando você faz o download de uma página da Web no seu computador.</p> <p>Quando você solicita dados de um servidor Web, o IP cuida da comunicação entre o PC e o servidor. O TCP cuida da comunicação entre o seu navegador (aplicativo) e o software do servidor de rede. Quando você envia um email, observa uma página da Web ou faz o download de um arquivo, o TCP é responsável por dividir os dados em pacotes IP para que eles sejam enviados, além de montar os dados a partir dos pacotes quando eles chegam. O processo TCP é muito semelhante a uma conversa na qual dois nós em uma rede concordam em transmitir dados entre um e o outro. </p> <p>Lembre-se de que o TCP fornece um serviço de fluxo de bytes confiável, orientado à conexão. O termo orientado a conexão significa que os dois aplicativos que utilizam o TCP devem estabelecer uma conexão TCP para que eles possam trocar dados. TCP é um protocolo em full duplex, o que significa que cada conexão TCP dá suporte a um par de fluxos de bytes, cada um com fluxo em uma direção. O TCP inclui um mecanismo de controle de fluxo para cada fluxo de bytes que permite ao receptor limitar quantos dados o remetente pode transmitir. O TCP também implementa um mecanismo de controle de congestionamento.</p> <p><b>Clique no botão Reproduzir na figura </b>para exibir a animação.</p> <p>A animação mostra como ocorre uma conversa TCP/IP. Os pacotes TCP são marcados com flags que denotam sua finalidade: SYN inicia (sincroniza) a sessão; ACK é uma <content-link target="{5BD1CB6F-D813-41FC-957A-674825DFA6C6}" type="glossary">confirmação (ACK)</content-link> de que o pacote aguardado foi recebido e FIN encerra a sessão. SYN/ACK confirma que a transferência foi sincronizada. Entre os segmentos de dados TCP estão o protocolo de nível mais alto necessário ao direcionamento dos dados de aplicativo para o aplicativo correto. </p> <p><b>Clique no botão Números de porta TCP/UDP na figura.</b></p> <p>O segmento de dados TCP também identifica a porta correspondente ao serviço solicitado. Por exemplo, HTTP é a porta 80, <content-link target="{24CE73E3-8272-411F-A003-3BCA8A0A690F}" type="glossary">SMTP</content-link> é a porta 25 e FTP é a porta 20 e 21. A figura mostra exemplos de portas UDP e TCP.</p> <p><b>Clique nos botões da figura</b> para explorar portas TCP/UDP.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010200">
<title><content-text>Filtragem de pacote</content-text></title>
<page type="OneColumn" id="tl1405010201">
<content-media type="StaticGraphic" id="cm3905391231">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010200/tl1405010201/cm3905391231.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010200/tl1405010201/cm3905391231text.xml"/></content-media>
<content-text><p>A filtragem de pacote, às vezes chamada de filtragem de pacote estática, controla o acesso a uma rede, analisando os pacotes de entrada e de saída e transmitindo ou paralisando-os com base em critérios informados. </p> <p>Um roteador funciona como um filtro de pacote ao encaminhar ou negar pacotes de acordo com as regras de filtragem. Quando um pacote chega ao roteador de filtragem de pacote, o roteador extrai determinadas informações do cabeçalho do pacote e toma decisões de acordo com as regras do filtro quanto à possibilidade do pacote ser transmitido ou descartado. A filtragem de pacote funciona na camada de rede do modelo de referência OSI ou na camada de Internet do TCP/IP.</p> <p>Por ser um dispositivo da Camada 3, um roteador de filtragem de pacote utiliza regras para determinar se deve permitir ou negar tráfego com base nos endereços IP de origem e de destino, na <content-link target="{441C7EAE-60F8-44FB-BA7D-5E7A328EA87A}" type="glossary">porta de origem</content-link> e na <content-link target="{ABABC373-9634-45E2-B00C-B3993E9C39B9}" type="glossary">porta de destino</content-link>, além do protocolo do pacote. Essas regras são definidas utilizando-se listas de controle de acesso ou ACLs. </p> <p>Lembre-se de que uma ACL é uma lista sequencial de instruções de permissão ou negação que se aplicam a endereços IP ou protocolos de camada superior. A ACL pode extrair as seguintes informações do cabeçalho do pacote, testá-lo em relação às suas regras e tomar decisões "permitir" ou "negar" com base em:</p> <p><ul><li>Endereço IP de origem</li><li>Endereço IP de destino</li><li>Tipo de mensagem ICMP</li></ul></p> <p>A ACL também pode extrair informações de camada superior e testá-las em relação às suas regras. Entre as informações da camada superior estão:</p> <p><ul><li>Porta de origem TCP/UDP</li><li>Porta de destino TCP/UDP</li></ul></p> <p><b>Clique nos botões da figura</b> para obter uma visão geral de como uma ACL permite ou nega um pacote. Embora as animações exibam a filtragem de pacote que ocorre na Camada 3, é preciso observar que a filtragem também poderia ocorrer na Camada 4.</p></content-text>
</page>
<page type="OneColumn" id="tl1405010202">
<content-media type="StaticGraphic" id="cm3855881543">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010200/tl1405010202/cm3855881543.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010200/tl1405010202/cm3855881543text.xml"/></content-media>
<content-text><p><b>Exemplo de filtragem de pacote</b></p> <p>Para compreender o conceito de como um roteador utiliza a filtragem de pacote, imagine que um segurança foi colocado diante de uma porta fechada. As instruções do segurança são para permitir apenas as pessoas cujos nomes estão em uma lista para passar pela porta. O segurança está filtrando as pessoas com base nos critérios da presença de seus nomes na lista autorizada.</p> <p>Por exemplo, você poderia dizer, "Só permita acesso à Web para usuários da rede A. Negue acesso à Web para usuários da rede B, mas permita a eles todos os demais acessos". Consulte a figura para examinar o caminho de decisão utilizado pelo filtro de pacote para realizar essa tarefa. </p> <p>Para esse cenário, o filtro de pacote observa todos os pacotes da seguinte forma:</p> <p><ul><li>Se o pacote for um TCP SYN da rede A que utiliza a porta 80, ele terá permissão para passar. Todos os demais acessos são negados para esses usuários.</li><li>Se o pacote for um TCP SYN da rede B que utiliza a porta 80, ele será bloqueado. No entanto, todos os demais acessos são permitidos.</li></ul></p> <p>Este é apenas um simples exemplo. Você pode configurar várias regras para ainda permitir ou negar serviços a usuários específicos. Você também pode filtrar pacotes no nível de porta utilizando uma ACL estendida, abordada na Seção 3.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010300">
<title><content-text>O que é ACL?</content-text></title>
<page type="OneColumn" id="tl1405010301">
<content-media type="StaticGraphic" id="cm2831656548">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010300/tl1405010301/cm2831656548.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010300/tl1405010301/cm2831656548text.xml"/></content-media>
<content-text><p>ACL é um script de configuração de roteador que controla se um roteador permite ou nega a passagem a pacotes com base nos critérios encontrados no cabeçalho de pacote. As ACLs estão entre os objetos mais utilizados no software IOS Cisco. As ACLs também são utilizadas para selecionar tipos de tráfego a ser analisado, encaminhado ou processado de outras formas. </p> <p>Na medida em que cada pacote passa por uma interface com uma ACL associada, a ACL é verificada de cima para baixo, uma linha por vez, procurando um padrão correspondente ao pacote de entrada. A ACL aplica uma ou mais políticas de segurança corporativas, aplicando uma regra de permissão ou negação para determinar o destino do pacote. As ACLs podem ser configuradas para controlar o acesso a uma rede ou sub-rede. </p> <p>Por padrão, um roteador não tem nenhuma ACL configurada e, por isso, não filtra o tráfego. O tráfego que entra no roteador é roteado de acordo com a tabela de roteamento. Se você não utilizar as ACLs no roteador, todos os pacotes que puderem ser roteados pelo roteador passarão pelo roteador até o próximo segmento de rede.</p> <p>Aqui estão algumas diretrizes para utilizar ACLs:</p> <p><ul><li>Utilize as ACLs em roteadores de firewall colocados entre as suas redes interna e externa, como a Internet. </li><li>Utilize as ACLs em um roteador colocado entre duas partes da sua rede para controlar o tráfego que entra ou sai de uma determinada parte da sua rede interna. </li><li>Configure as ACLs em roteadores de borda (roteadores situados nas extremidades das suas redes). Isso fornece um buffer muito básico da rede externa ou entre uma área menos controlada da sua própria rede e uma área mais confidencial da sua rede. </li><li>Configure as ACLs para cada protocolo de rede configurado nas interfaces do roteador de borda. Você pode configurar as ACLs em uma interface para filtrar o tráfego de entrada, o tráfego de saída ou ambos.</li></ul></p> <p><b>Clique no botão ACLs em um roteador na figura.</b></p> <p><b>Os três Ps</b></p> <p>Uma regra geral para aplicar as ACLs em um roteador pode ser lembrada, basta memorizar os três Ps. Você pode configurar uma ACL por protocolo, por direção, por interface: </p> <p><ul><li><b>Uma ACL por protocolo</b> – para controlar o fluxo de tráfego em uma interface, uma ACL deve ser definida para cada protocolo habilitado na interface. </li><li><b>Uma ACL por direção</b> – as ACLs controlam o tráfego em uma direção por vez em uma interface. Duas ACLs separadas devem ser criadas para controlar os tráfegos de entrada e de saída. </li><li><b>Uma ACL por interface</b> – as ACLs controlam o tráfego de uma interface, por exemplo, <content-link target="{D5A87C5D-D58F-4F8F-8703-6DF905E32FBD}" type="glossary">Fast Ethernet</content-link> 0/0.</li></ul></p> <p>Escrever ACLs pode ser uma tarefa desafiante e complexa. Cada interface pode ter vários protocolos e direções definidas. O roteador no exemplo tem duas interfaces configuradas para IP, AppleTalk e IPX. Esse roteador pode exigir 12 ACLs separadas: uma ACL para cada protocolo, duas para cada direção e duas para o número de portas. </p> <p>As ACLs executam as seguintes tarefas:</p> <p><ul><li>Limitam o tráfego da rede para aumentar o desempenho da rede. Por exemplo, se a política corporativa não permitir tráfego de vídeo na rede, as ACLs que bloqueiam o tráfego de vídeo poderão ser configuradas e aplicadas. Isso reduziria muito a carga de rede e aumentaria o desempenho da rede. </li><li>Fornecer controle de fluxo do tráfego. As ACLs podem restringir a entrega das atualizações de roteamento. Se as atualizações não forem obrigatórias por conta das condições de rede, a largura de banda será preservada. </li><li>Forneça um nível básico de segurança para o acesso à rede. As ACLs podem permitir a um host acessar uma parte da rede e impedir outro host de acessar a mesma área. Por exemplo, o acesso à rede de recursos humanos pode ser restringido para selecionar os usuários. </li><li>Decida que tipos de tráfego encaminhar ou bloquear nas interfaces do roteador. Por exemplo, uma ACL pode permitir tráfego de email, mas bloqueia todo o tráfego de Telnet. </li><li>Controle as áreas que um cliente pode acessar em uma rede. </li><li>Os hosts na tela para permitir ou negar acesso a serviços de rede. As ACLs podem permitir ou negar a um usuário o acesso a tipos de arquivo, como FTP ou HTTP.</li></ul></p> <p>As ACLs inspecionam pacotes de rede com base em critérios, como endereço de origem, endereço de destino, protocolos e números de porta. Além de permitir ou negar tráfego, uma ACL pode classificar o tráfego para habilitar o processamento por prioridades na linha. Esse recurso é semelhante a ter uma passagem VIP para um show ou evento esportivo. A passagem VIP oferece privilégios a convidados selecionados não oferecidos a proprietários de entradas, como poder entrar em uma área restrita e ser escoltado até seus assentos.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010400">
<title><content-text>Operação ACL</content-text></title>
<page type="OneColumn" id="tl1405010401">
<content-media type="StaticGraphic" id="cm2216638840">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010400/tl1405010401/cm2216638840.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010400/tl1405010401/cm2216638840text.xml"/></content-media>
<content-text><p><b>Como as ACLs funcionam</b></p> <p>As ACLs definem o conjunto de regras que dão controle adicional para pacotes que entram por interfaces de entrada, pacotes retransmitidos pelo roteador e pacotes que saem pelas interfaces de saída do roteador. As ACLs não funcionam em pacotes com origem no próprio roteador. </p> <p>As ACLs são configuradas para se aplicar ao tráfego de entrada ou ao tráfego de saída.</p> <p><ul><li><b>ACLs de entrada</b> – os pacotes de entrada são processados antes de serem roteados para a interface de saída. Uma ACL de entrada será eficiente porque evita a sobrecarga das pesquisas de roteamento se o pacote for descartado. Se for permitido pelos testes, o pacote será processado para roteamento. </li><li><b>ACLs de saída</b> – os pacotes de entrada são roteados para a interface de saída e, em seguida, processados pela ACL de saída.</li></ul></p> <p>As instruções ACL funcionam em ordem sequencial. Elas avaliam pacotes em relação à ACL, de cima para baixo, uma instrução por vez. </p> <p>A figura mostra a lógica de uma ACL de entrada. Se o cabeçalho de um pacote corresponder a uma instrução ACL, as demais instruções na lista serão ignoradas e o pacote será permitido ou negado conforme determinação da instrução correspondente. Se o cabeçalho de um pacote não corresponder a uma instrução ACL, o pacote será testado em relação à próxima instrução da lista. Esse processo de comparação continua até o término da lista.</p> <p>Uma instrução incluída no final abrange todos os pacotes para os quais as condições não se mostraram verdadeiras. Essa condição de teste final corresponde a todos os demais pacotes e resultados em uma instrução "negar". Em vez de continuar dentro ou fora de uma interface, o roteador ignora todos esses pacotes restantes. Essa instrução final costuma ser conhecida como "negar qualquer instrução implicitamente" ou "negar todo o tráfego". Por conta dessa instrução, uma ACL deve ter pelo menos uma instrução de permissão; do contrário, a ACL bloqueia todo o tráfego.</p> <p>Você pode aplicar uma ACL a várias interfaces. No entanto, talvez só haja uma ACL por protocolo, direção e interface.</p> <p><b>Clique no botão ACLs de saída na figura. </b></p> <p>A figura mostra a lógica de uma ACL de saída. Para que um pacote seja encaminhado para uma interface de saída, o roteador verifica a tabela de roteamento para ver se o pacote pode ser roteado. Se não puder ser roteado, o pacote será ignorado. Em seguida, o roteador verifica se a interface de saída é agrupada em uma ACL. Os exemplos de operação de ACL de saída são os seguintes: </p> <p><ul><li>Se a interface de saída não for agrupada em uma ACL de saída, o pacote será enviado diretamente para a interface de saída. </li><li> Se a interface de saída for agrupada em uma ACL de saída, o pacote não será enviado pela interface de saída até ser testado pela combinação de instruções ACL associadas a essa interface. Com base nos testes ACL, o pacote é permitido ou negado.</li></ul></p> <p>Para listas de saída, "permitir" significa enviar o pacote para o buffer de saída e "negar" significa descartá-lo. </p></content-text>
</page>
<page type="OneColumn" id="tl1405010402">
<content-media type="InteractiveGraphicHotspots" id="cm5386173190">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010400/tl1405010402/cm5386173190.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010400/tl1405010402/cm5386173190text.xml"/></content-media>
<content-text><p><b>A ACL e o roteamento e os processos ACL em um roteador</b></p> <p>A figura mostra a lógica do roteamento e dos processos ACL em um roteador. Quando um pacote chega a uma interface do roteador, o processo do roteador é o mesmo, independentemente das ACLs serem utilizadas ou não. À medida que um quadro entra em uma interface, o roteador verifica se o destino do endereço da Camada 2 de destino corresponde ao seu ou se o quadro é de broadcast. </p> <p>Se o endereço do quadro for aceito, as informações do quadro serão removidas e o roteador verificará se há uma ACL na interface de entrada. Se houver uma ACL, o pacote agora será testado em relação às instruções na lista. </p> <p>Se o pacote corresponder a uma instrução, ele será aceito ou rejeitado. Se for aceito na interface, o pacote será verificado em relação às entradas da tabela de roteamento para determinar a interface de destino e comutado para essa interface. </p> <p>Em seguida, o roteador verifica se a interface de destino tem uma ACL. Se houver uma ACL, o pacote será testado em relação às instruções na lista. </p> <p>Se corresponder a uma instrução, o pacote será aceito ou rejeitado. </p> <p>Se não houver nenhuma ACL ou o pacote for aceito, o pacote será encapsulado no novo protocolo da Camada 2 e encaminhado pela interface para o próximo dispositivo.</p> <p><b>A instrução implícita do critério "Negar todo o tráfego"</b></p> <p>Ao final de toda lista de acesso, há uma instrução implícita do critério "negar todo o tráfego". Ela também é conhecida às vezes como a instrução "deny any implícito". Por isso, se não corresponder a nenhuma das entradas ACL, um pacote será bloqueado automaticamente. "negar todo o tráfego" implícito é o comportamento padrão das ACLs, não podendo ser alterado. </p> <p>Existe uma advertência chave associada a esse comportamento "negar tudo": para a maioria dos protocolos, se definir uma lista de acesso de entrada para a filtragem de tráfego, você deverá incluir instruções de critérios da lista de acesso explícitas para permitir atualizações de roteamento. Se não fizer, você poderá efetivamente perder a comunicação com a interface quando as atualizações de roteamento forem bloqueadas pela instrução implícita "negar todo o tráfego" ao final da lista de acesso.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010500">
<title><content-text>Tipos de ACLs Cisco</content-text></title>
<page type="OneColumn" id="tl1405010501">
<content-media type="StaticGraphic" id="cm6647878239">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010500/tl1405010501/cm6647878239.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010500/tl1405010501/cm6647878239text.xml"/></content-media>
<content-text><p>Há dois tipos de ACLs Cisco, padrão e estendida.</p> <p><b>ACLs padrão</b></p> <p>As ACLs padrão permitem a você permitir ou negar tráfego de endereços IP de origem. O destino do pacote e as portas envolvidas não importam. O exemplo permite todo o tráfego da rede 192.168.30.0/24. Por conta da "negar tudo" implícita ao final, todo os demais tráfegos são bloqueados com essa ACL. As ACLs padrão são criadas no modo de configuração global.</p> <p><b>Clique no botão ACL estendida na figura.</b></p> <p><b>ACLs estendidas</b></p> <p>As ACLs estendidas filtram pacotes IP com base em vários atributos, por exemplo, tipo de protocolo, endereço IP de origem, endereço IP de destino, portas TCP e UDP de origem, portas TCP e UDP de destino e informações do tipo de protocolo opcionais para maior granularidade de controle. Na figura, a ACL 103 permite tráfego com origem em qualquer endereço na rede 192.168.30.0/24 para qualquer host de destino na porta 80 (HTTP). As ACLs estendidas são criadas no modo de configuração global. </p>  <p>Os comandos para ACLs são explicados nos próximos tópicos.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010600">
<title><content-text>Como uma ACL padrão funciona</content-text></title>
<page type="OneColumn" id="tl1405010601">
<content-media type="InteractiveGraphicHotspots" id="cm4802758335">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010600/tl1405010601/cm4802758335.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010600/tl1405010601/cm4802758335text.xml"/></content-media>
<content-text><p>Uma ACL padrão é uma coleção sequencial de condições para permitir e negar que se aplicam a endereços IP. O destino do pacote e as portas envolvidas não são abordados. </p> <p>O processo de decisão está mapeado na figura. O software IOS Cisco testa endereços em relação às condições individualmente. A primeira correspondência determina se o software aceita ou rejeita o endereço. Como o software para de testar condições depois da primeira correspondência, a ordem das condições é essencial. Se nenhuma condição corresponder, o endereço será rejeitado.</p> <p>As duas tarefas principais envolvidas na utilização das ACLs são as seguintes:</p> <p><b>Etapa 1.</b> Criar uma lista de acesso, especificando um número da lista de acesso ou nome e condições de acesso.</p> <p><b>Etapa 2.</b> Aplicar a ACL a interfaces ou linhas de terminal.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010700">
<title><content-text>Numerando e nomeando ACLs</content-text></title>
<page type="OneColumn" id="tl1405010701">
<content-media type="InteractiveGraphicHotspots" id="cm2565216131">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010700/tl1405010701/cm2565216131.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010700/tl1405010701/cm2565216131text.xml"/></content-media>
<content-text><p>Utilizar ACLs numeradas é um método efetivo para determinar o tipo de ACL em redes menores com tráfego definido de maneira mais homogênea. No entanto, um número não informa a finalidade da ACL. Por essa razão, começando pelo IOS Cisco release 11.2, você pode utilizar um nome para identificar uma ACL Cisco. </p>  <p>A figura sumariza a regra para designar as ACLs numeradas e as ACLs nomeadas. </p>  <p>Em relação a ACLs numeradas, caso você esteja se perguntando por que os números de 200 a 1.299 são ignorados, é porque esses números são utilizados por outros protocolos. Este curso só aborda ACLs IP. Por exemplo, os números de 600 a 699 são utilizados por AppleTalk, e os números de 800 a 899 são utilizados por IPX.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405010800">
<title><content-text>Onde colocar ACLs</content-text></title>
<page type="OneColumn" id="tl1405010801">
<content-media type="StaticGraphic" id="cm2020304204">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010800/tl1405010801/cm2020304204.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010800/tl1405010801/cm2020304204text.xml"/></content-media>
<content-text><p>A localização apropriada de uma ACL para filtrar tráfego indesejável faz a rede operar com mais eficiência. As ACLs podem agir como firewalls para filtrar pacotes e eliminar o tráfego indesejável. Onde você coloca as ACLs pode reduzir o tráfego desnecessário. Por exemplo, o tráfego a ser negado em um destino remoto não deve utilizar recursos de rede ao longo da rota até esse destino. </p> <p>Toda ACL deve ser colocada onde tenha o maior impacto em termos de eficiência. As regras básicas são:</p> <p><ul><li>Localize as ACLs estendidas mais próximas da origem do tráfego negado. Dessa forma, o tráfego indesejável é filtrado sem atravessar a infraestrutura de rede.</li><li>Como as ACLs padrão não especificam endereços de destino, coloque-as o mais próximo possível do destino. </li></ul></p> <p>Consideremos um exemplo de onde colocar as ACLs na nossa rede. A interface e o local de rede se baseiam naquilo que você deseja que a ACL faça. </p> <p>Na figura, o administrador deseja impedir o tráfego com origem na rede 192.168.10.0/24 de chegar à rede 192.168.30.0/24. Uma ACL na interface de saída de R1 também nega a R1 a possibilidade de enviar tráfego a outros locais. A solução é colocar uma ACL padrão na interface de entrada de R3 a fim de parar todo o tráfego do endereço de origem 192.168.10.0/24. Uma ACL padrão só atende às necessidades porque se preocupa com os endereços IP de origem. </p> <p><b>Clique no botão ACL estendida na figura.</b></p> <p>Considere que os administradores só podem colocar as ACLs em dispositivos que eles controlem. Por isso, o local deve ser determinado dentro do contexto de até onde o controle do administrador de rede se estende. Nesta figura, o administrador das redes 192.168.10.0/24 e 192.168.11.0/24 (conhecidas como Dez e Onze, respectivamente, neste exemplo) deseja negar o tráfego Telnet e FTP de Onze para a rede 192.168.30.0/24 (Trinta, neste exemplo). Ao mesmo tempo, outro tráfego deve ter permissão para deixar Dez.</p> <p>Há várias formas de fazer isso. Uma ACL estendida em R3 que bloqueasse Telnet e FTP em Onze realizaria a tarefa, mas o administrador não controla R3. Além disso, essa solução ainda permite ao tráfego indesejado cruzar toda a rede apenas para ser bloqueado no destino. Isso afeta a eficiência geral da rede. </p> <p>Uma solução é utilizar uma ACL estendida de saída que especifique os endereços de origem e de destino (Onze e Trinta, respectivamente) e diga "O tráfego Telnet e FTP de Onze não pode ir para Trinta". Coloque essa ACL estendida na porta de saída S0/0/0 de R1. </p> <p>Uma desvantagem dessa solução é que esse tráfego de Dez também estaria sujeito a algum processamento por parte da ACL, embora o tráfego Telnet e FTP seja permitido.</p> <p>A melhor solução é se aproximar da origem e colocar uma ACL estendida na interface de entrada Fa0/2 de R1. Isso assegura que pacotes de Onze não entram em R1 e, subsequentemente, não podem cruzar Dez ou mesmo entrar em R2 ou R3. O tráfego com outros endereços de destino e portas ainda é permitido em R1. </p></content-text>
</page>
</topic>
<topic type="" id="tl1405010900">
<title><content-text>Diretrizes gerais para criar ACLs</content-text></title>
<page type="OneColumn" id="tl1405010901">
<content-media type="StaticGraphic" id="cm2891471269">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010900/tl1405010901/cm2891471269.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010900/tl1405010901/cm2891471269text.xml"/></content-media>
<content-text><p><b>Práticas recomendadas ACL</b></p> <p>A utilização das ACLs exige atenção a detalhes e muito cuidado. Equívocos podem sair caros em termos de indisponibilidade, identificação e solução de problemas e um serviço de rede ruim. Antes de começar a configurar uma ACL, o planejamento básico é obrigatório. A figura apresenta diretrizes que formam a base de uma lista de práticas recomendadas da ACL.</p></content-text>
</page>
<page type="FullScreen" id="tl1405010902">
<content-media type="ActivityCustom" id="cm8144236397">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405010000/tl1405010900/tl1405010902/cm8144236397.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405010000/tl1405010900/tl1405010902/cm8144236397text.xml"/></content-media>
<content-text><p><b>Atividade: Utilizando as ACLs para proteger redes</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1405020000">
<title><content-text>Configurando ACLs padrão</content-text></title>
<topic type="" id="tl1405020100">
<title><content-text>Inserindo instruções de critérios</content-text></title>
<page type="OneColumn" id="tl1405020101">
<content-media type="StaticGraphic" id="cm6276605533">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020100/tl1405020101/cm6276605533.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020100/tl1405020101/cm6276605533text.xml"/></content-media>
<content-text><p>Antes de começar a configurar uma ACL padrão, revisaremos conceitos importantes da ACL abordados na Seção 1. </p>  <p>Lembre-se de que, ao entrar no roteador, o tráfego é comparado com instruções ACL com base na ordem em que ocorrem as entradas no roteador. O roteador continua processando as instruções ACL até que haja uma correspondência. Por essa razão, você deve ter a entrada ACL mais utilizada na parte superior da lista. Se nenhuma correspondência for encontrada quando o roteador chegar ao final da lista, o tráfego será negado porque as ACLs têm uma negação implícita para todo o tráfego que não atenda a nenhum dos critérios testados. Uma ACL única com apenas uma entrada de negação tem o efeito de negar todo o tráfego. Você deve ter pelo menos uma instrução de permissão em uma ACL, ou todo o tráfego será bloqueado. </p>  <p>Por exemplo, as duas ACLs (101 e 102) na figura têm o mesmo efeito. A rede 192.168.10.0 teria permissão para acessar a rede 192.168.30.0, mas 192.168.11.0, não. </p></content-text>
</page>
</topic>
<topic type="" id="tl1405020200">
<title><content-text>Configurando uma ACL padrão</content-text></title>
<page type="OneColumn" id="tl1405020201">
<content-media type="InteractiveGraphicHotspots" id="cm3415638131">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020200/tl1405020201/cm3415638131.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020200/tl1405020201/cm3415638131text.xml"/></content-media>
<content-text><p><b>Lógica da ACL padrão</b></p> <p>Na figura, os pacotes que chegam por Fa0/0 são verificados em relação aos seus endereços de origem:</p> <p><span class="cmd"><b>access-list 2 deny host 192.168.10.1</b></span></p> <p><span class="cmd"><b>access-list 2 permit 192.168.10.0 0.0.0.255</b></span></p> <p><span class="cmd"><b>access-list 2 deny 192.168.0.0 0.0.255.255</b></span></p> <p><span class="cmd"><b>access-list 2 permit 192.0.0.0 0.255.255.255</b></span></p> <p>Se forem permitidos, os pacotes serão roteados pelo roteador para uma interface de saída. Se não forem permitidos, os pacotes serão ignorados na interface de entrada. </p></content-text>
</page>
<page type="OneColumn" id="tl1405020202">
<content-media type="InteractiveGraphicHotspots" id="cm8011270740">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020200/tl1405020202/cm8011270740.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020200/tl1405020202/cm8011270740text.xml"/></content-media>
<content-text><p><b>Configurando ACLs padrão</b></p> <p>Para configurar ACLs padrão numeradas em um roteador Cisco, você deve primeiro criar a ACL padrão e ativar a ACL em uma interface. </p> <p>O comando no modo de configuração global <span class="cmd"><b>access-list</b></span> define uma ACL padrão com um número no intervalo de 1 a 99. O software IOS Cisco release 12.0.1 estendeu esses números, permitindo de 1300 a 1999 fornecer um máximo de 799 ACLs padrão possíveis. Esses números adicionais são conhecidos como ACLs IP expandidas. </p> <p>A sintaxe completa do comando ACL padrão é a seguinte: </p> <p><span class="cmd">Router(config)#<b>access-list </b><i>access-list-number</i><b> [deny | permit | remark] </b><i>source</i> [<i>source-wildcard</i>] [<b>log</b>]</span></p> <p>A sintaxe completa do comando da ACL padrão para filtrar um determinado host é a seguinte:</p> <p><span class="cmd">Router(config)#<b>access-list </b><i>access-list-number</i><b> [deny | permit] </b><i>source </i><b>[log]</b></span></p> <p>A figura fornece uma explicação detalhada da sintaxe de uma ACL padrão. </p>  <p>Por exemplo, para criar uma ACL numerada designada <b>10</b> que permitisse a rede 192.168.10.0 /24, você digitaria: </p>  <p><span class="cmd">R1(config)#<b>access-list 10 permit 192.168.10.0 0.0.0.255</b></span></p> <p><b>Clique no botão Remover ACL na figura. </b></p>  <p>A forma <span class="cmd"><b>no</b></span> desse comando remove uma ACL padrão. Na figura, a saída do comando <span class="cmd"><b>show access-list</b></span> exibe as ACLs atuais configuradas no roteador R1. </p>  <p>Para remover a ACL, o comando no modo de configuração global <span class="cmd"><b>no access-list</b></span> é utilizado. A emissão do comando <span class="cmd"><b>show access-list</b></span> confirma se a lista de acesso 10 foi removida. </p>  <p><b>Clique no botão Comentário na figura.</b> </p>  <p>Normalmente, os administradores criam ACLs e compreendem perfeitamente todas as finalidades de cada instrução dentro da ACL. No entanto, quando uma ACL for revista mais tarde, talvez não seja tão óbvia quanto já foi. </p>  <p>A palavra-chave <span class="cmd"><b>remark</b></span> é utilizada na documentação e facilita muito a compreensão das listas de acesso. Cada comentário é limitado a 100 caracteres. A ACL na figura, embora bastante simples, é utilizada para fornecer um exemplo. Durante a revisão da ACL na configuração, o comentário também é exibido. </p>  <p>O próximo tópico explica como utilizar a máscara curinga para identificar redes específicas e hosts.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405020300">
<title><content-text>Máscara curinga ACL</content-text></title>
<page type="OneColumn" id="tl1405020301">
<content-media type="InteractiveGraphicHotspots" id="cm8206635982">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020300/tl1405020301/cm8206635982.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020300/tl1405020301/cm8206635982text.xml"/></content-media>
<content-text><p><b>Mascaramento curinga</b></p> <p>Entre as instruções ACLs estão máscaras, também chamadas de <content-link target="{EC64B381-7EEB-4D3C-8BAA-2518364DC220}" type="glossary">máscaras curinga</content-link>. Máscara curinga é uma string de dígitos binários que informam ao roteador que partes do número da sub-rede observar. Embora não tenham nenhuma relação funcional com máscaras de sub-rede, as máscaras curinga fornecem uma função semelhante. A máscara determina a proporção de um endereço IP de origem ou de destino a ser aplicada à correspondência de endereço. Os números 1 e 0 na máscara identificam como tratar os bits de endereço IP correspondentes. No entanto, eles são utilizados para fins diferentes, seguindo regras diferentes. </p>  <p>As máscaras curinga e de sub-rede têm 32 bits e utilizam 1s e 0s binários. As máscaras de sub-rede utilizam 1s e 0s binários para identificar a rede, a sub-rede e a porção de host de um endereço IP. As máscaras curinga utilizam 1s e 0s binário para filtrar endereços IP individuais ou grupos e permitir ou negar acesso a recursos com base em um endereço IP. Definindo máscaras curinga com cuidado, você pode permitir ou negar um ou vários endereços IP </p>  <p>As máscaras curinga e de sub-rede são diferentes quanto à forma com que comparam 1s e 0s binários. As máscaras curinga utilizam as seguintes regras para comparar 1s e 0s binários: </p> <p><ul><li>Bit da máscara curinga 0 – comparar o valor do bit correspondente no endereço </li><li>Bit da máscara curinga 1 – ignorar o valor do bit correspondente no endereço</li></ul></p> <p>A figura explica como máscaras curinga diferentes filtram endereços IP. Ao observar o exemplo, lembre-se de que o 0 binário significa uma correspondência e que o 1 binário significa ignorar. </p>  <p><b>Nota:</b> as máscaras curinga costumam ser conhecidas como máscaras inversas. A razão é que, diferentemente de uma máscara de sub-rede na qual o 1 binário é igual a uma correspondência e 0 binário, não, o inverso é verdadeiro. </p> <p><b>Clique no botão Exemplo de máscara curinga na figura</b>.</p>  <p><b>Utilizando uma máscara curinga</b> </p>  <p>A tabela na figura mostra os resultados da aplicação de uma  máscara curinga 0.0.255.255 a um endereço IP de 32 bits. Lembre-se de que um 0 binário indica um valor correspondente. </p></content-text>
</page>
<page type="OneColumn" id="tl1405020302">
<content-media type="StaticGraphic" id="cm6167914068">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020300/tl1405020302/cm6167914068.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020300/tl1405020302/cm6167914068text.xml"/></content-media>
<content-text><p><b>Máscaras curinga correspondentes a sub-redes IP</b></p> <p>O cálculo da máscara curinga pode ser um pouco confuso inicialmente. A figura fornece três exemplos de máscaras curinga. </p> <p>O primeiro exemplo que a máscara curinga estipula é de que todo bit no IP 192.168.1.1 deve corresponder exatamente. A máscara curinga equivale à máscara de sub-rede 255.255.255.255.</p> <p>No segundo exemplo, a máscara curinga estipula que qualquer coisa corresponderá. A máscara curinga equivale à máscara de sub-rede 0.0.0.0.</p> <p>No terceiro exemplo, a máscara curinga estipula que corresponderá a qualquer host dentro da rede 192.168.1.0 /24. A máscara curinga equivale à máscara de sub-rede 255.255.255.0.</p> <p>Esses exemplos foram bastante simples e diretos. No entanto, o cálculo de máscaras curinga pode ficar um pouco mais difícil. </p> <p><b>Clique no botão Máscara curinga 2 na figura. </b></p> <p>Os dois exemplos na figura são mais complicados do que os três últimos que você exibiu. No exemplo 1, os dois primeiros octetos e os quatro primeiros bits do terceiro octeto devem corresponder exatamente. Os últimos quatro bits no terceiro octeto e o último octeto podem ser qualquer número válido. Isso resulta em uma máscara que verifica de 192.168.16.0 a 192.168.31.0</p> <p>O Exemplo 2 mostra uma máscara curinga que corresponde aos dois primeiros octetos, e o bit menos significativo no terceiro octeto. O último octeto e os sete primeiros bits no terceiro octeto podem ser qualquer número válido. O resultado é uma máscara que permitiria ou negaria todos os hosts de sub-redes ímpares dentro da rede principal 192.168.0.0.</p> <p>O cálculo das máscaras curinga pode ser difícil, mas você pode fazer isso facilmente, subtraindo a máscara de sub-rede de 255.255.255.255. </p> <p><b>Clique no botão Exemplo 1 na figura.</b></p> <p>Por exemplo, suponhamos que você queira permitir o acesso a todos os usuários da rede 192.168.3.0. Subtraia a máscara de sub-rede, que é 255.255.255.0 de 255.255.255.255, conforme a indicação na figura. A solução produz a máscara curinga 0.0.0.255.</p> <p><b>Clique no botão Exemplo 2 na figura.</b></p> <p>Agora suponhamos que você queira permitir o acesso à rede para os 14 usuários da sub-rede 192.168.3.32 /28. Como a máscara da sub-rede IP é 255.255.255.240, use 255.255.255.255 e subtraia da máscara de sub-rede 255.255.255.240. Desta vez, a solução produz a máscara curinga 0.0.0.15.</p> <p><b>Clique no botão Exemplo 3 na figura.</b></p> <p>Neste terceiro exemplo, suponhamos que você queira apenas comparar as redes 192.168.10.0 e 192.168.11.0. Novamente, você usa 255.255.255.255 e subtrai a máscara de sub-rede normal, que, neste caso, seria 255.255.254.0. O resultado é 0.0.1.255.</p> <p>Ainda que você possa obter o mesmo resultado com duas instruções, como:</p> <p><span class="cmd">R1(config)# <b>access-list 10 permit 192.168.10.0 0.0.0.255</b></span></p> <p><span class="cmd">R1(config)# <b>access-list 10 permit 192.168.11.0 0.0.0.255</b></span></p> <p>É muito mais eficiente configurar a máscara curinga como:</p> <p><span class="cmd">R1(config)# <b>access-list 10 permit 192.168.10.0 0.0.1.255</b></span></p> <p>Isso pode não parecer mais eficiente, mas quando você considera se quis comparar a rede 192.168.16.0 a 192.168.31.0 da seguinte forma:</p> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.16.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.17.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.18.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.19.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.20.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.21.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.22.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.23.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.24.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.25.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.26.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.27.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.28.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.29.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.30.0 0.0.0.255</b></p></span> <span class="cmd"><p>R1(config)# <b>access-list 10 permit 192.168.31.0 0.0.0.255</b></p></span> <p>Você pode ver que a configuração da seguinte máscara curinga a torna mais eficiente:</p> <p><span class="cmd">R1(config)# <b>access-list 10 permit 192.168.16.0 0.0.15.255</b></span></p></content-text>
</page>
<page type="OneColumn" id="tl1405020303">
<content-media type="StaticGraphic" id="cm7283882959">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020300/tl1405020303/cm7283882959.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020300/tl1405020303/cm7283882959text.xml"/></content-media>
<content-text><p><b>Palavras-chave de máscara curinga</b></p> <p>Trabalhar com representações decimais de bits de máscara curinga binários pode ser entediante. Para simplificar essa tarefa, as palavras-chave <span class="cmd"><b>host</b></span> e <span class="cmd"><b>any</b></span> ajudam a identificar as utilizações mais comuns da máscara curinga. Essas palavras-chave eliminam a entrada de máscaras curinga durante a identificação de um host específico ou rede. Elas também facilitam a leitura de uma ACL, fornecendo dicas visuais sobre a origem ou destino dos critérios.</p>  <p><ul><li>A opção <span class="cmd"><b>host</b></span> substitui a máscara 0.0.0.0. Essa máscara informa que todos os bits de endereço IP devem corresponder ou apenas um host é correspondente.</li><li>A opção <span class="cmd"><b>any</b></span> substitui o endereço IP e a máscara 255.255.255.255. Essa máscara diz para ignorar todo o endereço IP ou aceitar qualquer endereço. </li></ul></p> <p><b>Exemplo 1: Processo de máscara curinga com um único endereço IP</b></p> <p>No exemplo, em vez de inserir <span class="cmd"><b>192.168.10.10 0.0.0.0</b></span>, você pode utilizar <span class="cmd"><b>host 192.168.10.10</b></span>. </p>  <p><b>Exemplo 2: Processo de máscara curinga com a correspondência de qualquer endereço IP</b></p> <p>No exemplo, em vez de inserir <span class="cmd"><b>0.0.0.0 255.255.255.255</b></span>, você pode utilizar a palavra-chave <span class="cmd"><b>any</b></span> sozinha.</p></content-text>
</page>
<page type="OneColumn" id="tl1405020304">
<content-media type="StaticGraphic" id="cm7509972350">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020300/tl1405020304/cm7509972350.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020300/tl1405020304/cm7509972350text.xml"/></content-media>
<content-text><p><b>As palavras-chave any e host</b></p> <p>Nesta figura, temos dois exemplos. O Exemplo 1 está exibindo como utilizar a opção <span class="cmd"><b>any</b></span> para substituir 0.0.0.0 para o endereço IP com uma máscara curinga 255.255.255.255.</p> <p>O Exemplo 2 está exibindo como utilizar a opção <span class="cmd"><b>host</b></span> para substituir a máscara curinga.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405020400">
<title><content-text>Aplicando ACLs padrão a interfaces</content-text></title>
<page type="OneColumn" id="tl1405020401">
<content-media type="InteractiveGraphicHotspots" id="cm9702332224">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020400/tl1405020401/cm9702332224.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020400/tl1405020401/cm9702332224text.xml"/></content-media>
<content-text><p><b>Procedimentos de configuração da ACL padrão</b></p> <p>Depois de ser configurada, a ACL padrão é vinculada a uma interface utilizando-se o comando <span class="cmd"><b>ip access-group</b></span>: </p> <p><span class="cmd">Router(config-if)#<b>ip access-group</b> {<i>access-list-number</i> | <i>access-list-name</i>} {<b>in</b> | <b>out</b>}</span></p> <p>Para remover uma ACL de uma interface, primeiro digite o comando <span class="cmd"><b>no ip access-group</b></span> na interface e, em seguida, o comando global <span class="cmd"><b>no access-list</b></span> para remover toda a ACL.</p> <p>A figura lista as etapas e a sintaxe para configurar e aplicar uma ACL padrão numerada em um roteador. </p> <p><b>Clique no botão Exemplo 1 na figura </b>para obter um exemplo de uma ACL que permita uma única rede.</p> <p>Essa ACL só permite ao tráfego da rede de origem 192.168.10.0 ser encaminhado por S0/0/0. O tráfego das redes que não sejam 192.168.10.0 é bloqueado. </p> <p>A primeira linha identifica a ACL como lista de acesso 1. Ela permite o tráfego correspondente aos parâmetros selecionados. Nesse caso, o endereço IP e a máscara curinga que identificam a rede de origem são 192.168.10.0 0.0.0.255. Lembre-se de que há uma instrução negar tudo implícita equivalente ao adicionar a linha <span class="cmd"><b>access-list 1 deny 0.0.0.0 255.255.255.255</b></span>. </p> <p>O comando de configuração da interface <span class="cmd"><b>ip access-group 1 out</b></span> vincula a ACL 1 à interface Serial 0/0/0 como um filtro de saída.</p> <p>Por isso, a ACL 1 só permite a hosts da rede 192.168.10.0 /24 sair do roteador R1. Ela nega qualquer outra rede, inclusive a rede 192.168.11.0. </p> <p><b>Clique no botão Exemplo 2 na figura </b>para obter um exemplo de uma ACL que negue um host específico.</p> <p>Essa ACL substitui o exemplo anterior, mas também bloqueia o tráfego de um endereço específico. O primeiro comando exclui a versão anterior da ACL 1. A próxima instrução da ACL nega o host de PC1 localizado em 192.168.10.10. Qualquer outro host na rede 192.168.10.0 /24 é permitido. Mais uma vez, as instruções negar implícitas correspondem a todas as demais redes.</p> <p>A ACL é novamente reaplicada à interface S0/0/0 em uma direção de saída.</p> <p><b>Clique no botão Exemplo 3 na figura </b>para obter um exemplo de uma ACL que negue um host específico e permita algumas sub-redes.</p> <p>Essa ACL substitui o exemplo anterior, mas ainda bloqueia o tráfego do PC1 de host. Ela também permite a todo o outro tráfego de rede local sair do roteador R1. </p> <p>Os dois primeiros comandos são iguais aos do exemplo anterior. O primeiro comando exclui a versão anterior da ACL 1 e a próxima instrução da ACL nega o host de PC1 localizado em 192.168.10.10. </p> <p>A terceira linha é nova e permite todos os hosts das redes 192.168.x.x /16. Isso agora significa que todos os hosts da rede 192.168.10.0 /24 ainda correspondem, mas agora os hosts da rede 192.168.11.0, também. </p> <p>A ACL é novamente reaplicada à interface S0/0/0 em uma direção de saída. Por isso, ambas as redes locais conectadas ao roteador R1 podem deixar a interface S0/0/0 com exceção do host de PC1.</p></content-text>
</page>
<page type="OneColumn" id="tl1405020402">
<content-media type="InteractiveGraphicHotspots" id="cm8801288441">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020400/tl1405020402/cm8801288441.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020400/tl1405020402/cm8801288441text.xml"/></content-media>
<content-text><p><b>Utilizando uma ACL para controlar o acesso VTY</b></p> <p>A Cisco recomenda a utilização de SSH em conexões administrativas para roteadores e switches. Se a imagem do software IOS Cisco em seu roteador não dá suporte a SSH, você pode melhorar parcialmente a segurança das linhas administrativas, restringindo o acesso a VTY. Restringir o acesso a VTY é uma técnica que permite definir quais endereços IP têm permissão de acesso Telnet ao processo EXEC do roteador. Você pode controlar qual estação de trabalho administrativa ou rede gerencia o seu roteador com uma ACL e uma instrução <span class="cmd"><b>access-class</b></span> para as suas linhas VTY. Você também pode utilizar essa técnica com SSH mais melhorar ainda mais a segurança do acesso administrativo.</p> <p>O comando <span class="cmd"><b>access-class</b></span> no modo de configuração da linha restringe conexões de entrada e de saída entre um VTY específico (em um dispositivo Cisco) e os endereços em uma lista de acesso. </p> <p>As listas de acesso padrão e estendida se aplicam a pacotes que percorrem um roteador. Elas não foram projetadas para bloquear pacotes com origem dentro do roteador. Por padrão, uma ACL estendida de Telnet de saída não impede sessões Telnet iniciadas por roteador. </p> <p>A filtragem do tráfego Telnet é normalmente considerada uma função da ACL IP estendida porque filtra um protocolo de nível mais alto. No entanto, como você está utilizando o comando <span class="cmd"><b>access-class</b></span> para filtrar sessões Telnet de entrada ou de saída pelo endereço de origem e aplicar filtragem a linhas VTY, você pode utilizar instruções ACL padrão para controlar acesso a VTY.</p> <p>A sintaxe do comando access-class é:</p> <p><span class="cmd"><b>access-class </b><i>access-list-number</i> {<b>in</b> [<b>vrf-also</b>] | <b>out</b>}</span></p> <p>O parâmetro <span class="cmd"><b>in</b></span> restringe conexões de entrada entre um dispositivo Cisco e os endereços na lista de acesso, e o parâmetro <span class="cmd"><b>out</b></span> restringe conexões de saída entre um determinado dispositivo Cisco e os endereços na lista de acesso. </p> <p>Um exemplo que permite VTY 0 e 4 é mostrado na figura. Por exemplo, a ACL na figura é configurada para permitir a redes 192.168.10.0 e 192.168.11.0 acessar VTYs de 0 a 4. Todas as demais redes têm acesso negado a VTYs.</p> <p>O seguinte deve ser considerado durante a configuração das listas de acesso em VTYs:</p> <p><ul><li>As restrições idênticas devem ser definidas em todos os VTYs, porque um usuário pode tentar se conectar a um deles. </li></ul></p></content-text>
</page>
</topic>
<topic type="" id="tl1405020500">
<title><content-text>Editando ACLs numeradas</content-text></title>
<page type="OneColumn" id="tl1405020501">
<content-media type="StaticGraphic" id="cm4281828616">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020500/tl1405020501/cm4281828616.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020500/tl1405020501/cm4281828616text.xml"/></content-media>
<content-text><p><b>Editando ACLs numeradas</b></p> <p>Durante a configuração de uma ACL, as instruções são adicionadas na ordem em que são inseridas no final da ACL. No entanto, não há nenhum recurso de edição interno que permita editar uma alteração em uma ACL. Você não pode inserir ou excluir linhas de maneira seletiva. </p> <p>É altamente recomendável que qualquer ACL seja criada em um editor de texto, como o Bloco de Notas da Microsoft. Isso permite a você criar ou editar a ACL e, em seguida, colá-la no roteador. Em relação a uma ACL existente, você poderia utilizar o comando <span class="cmd"><b>show running-config</b></span> para exibir a ACL, copiar e colá-la no editor de texto, fazer as alterações necessárias e recarregá-la. </p> <p>Por exemplo, suponhamos que o endereço IP de host na figura tenha sido digitado incorretamente. Em vez do host 192.168.10.100, deveria ter sido o host 192.168.10.11. Aqui estão as etapas para editar e corrigir a ACL 20:</p> <p><b>Etapa 1.</b> Exibir a ACL utilizando o comando <span class="cmd"><b>show running-config</b></span>. O exemplo na figura utiliza a palavra-chave <span class="cmd"><b>include</b></span> para exibir apenas as instruções ACL.</p> <p><b>Etapa 2.</b> Realçar a ACL, copiar e colá-la para o Bloco de Notas da Microsoft. Edite a lista conforme exigido. Quando a ACL for exibida corretamente no Bloco de Notas da Microsoft, realce-a e copie. </p> <p><b>Etapa 3.</b> No modo de configuração global, desabilite a lista de acesso utilizando o comando <span class="cmd"><b>no access-list 20</b></span>. Do contrário, as novas instruções seriam adicionadas à ACL existente. Em seguida, cole a nova ACL na configuração do roteador.</p> <p>Deve-se mencionar que durante a utilização do comando <span class="cmd"><b>no access-list</b></span>, nenhuma ACL está protegendo a sua rede. Além disso, lembre-se de que, se cometer um erro na nova lista, você terá que desabilitá-la e identificar e solucionar o problema. Nesse caso, mais uma vez, a sua rede não tem nenhuma ACL durante o processo de correção. </p></content-text>
</page>
<page type="OneColumn" id="tl1405020502">
<content-media type="StaticGraphic" id="cm3166620168">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020500/tl1405020502/cm3166620168.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020500/tl1405020502/cm3166620168text.xml"/></content-media>
<content-text><p><b>Comentando ACLs</b></p> <p>Você pode utilizar a palavra-chave <span class="cmd"><b>remark</b></span> para incluir comentários sobre entradas em qualquer ACL padrão ou estendida. Os comentários simplificam a compreensão e a verificação da ACL. Cada linha de comentário é limitada a 100 caracteres.</p> <p>O comentário pode ficar antes ou depois de uma instrução <span class="cmd"><b>permit</b></span> ou <span class="cmd"><b>deny</b></span>. Você deve manter a consistência quanto ao local onde coloca o comentário para que fique claro o que cada um descreve em relação a instruções <span class="cmd"><b>permit</b></span> ou <span class="cmd"><b>deny</b></span>. Por exemplo, seria confuso ter alguns comentários antes das instruções <span class="cmd"><b>permit</b></span> ou <span class="cmd"><b>deny</b></span> associadas e outros depois.</p> <p>Para incluir um comentário sobre as ACLs padrão ou estendida numeradas por IP, utilize o comando de configuração global <span class="cmd"><b>access-list </b><i>access-list number</i><b> remark </b><i>remark</i></span>. Para remover o comentário, utilize a forma <span class="cmd"><b>no</b></span> desse comando.</p> <p>No primeiro exemplo, a ACL padrão permite o acesso à estação de trabalho que pertence a Jones e nega acesso à estação de trabalho que pertence a Smith.</p> <p>Para uma entrada em uma ACL nomeada, utilize o comando de configuração <span class="cmd"><b>remark</b></span>. Para remover o comentário, utilize a forma <span class="cmd"><b>no</b></span> desse comando. O segundo exemplo mostra uma ACL nomeada estendida. Lembre-se da definição anterior de ACLs estendidas, de que elas são utilizadas para controlar números de porta específicos ou serviços. No segundo exemplo, o comentário diz que a estação de trabalho de Jones não tem permissão para utilizar Telnet de saída.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405020600">
<title><content-text>Criando ACLs nomeadas padrão</content-text></title>
<page type="OneColumn" id="tl1405020601">
<content-media type="StaticGraphic" id="cm3069019443">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020600/tl1405020601/cm3069019443.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020600/tl1405020601/cm3069019443text.xml"/></content-media>
<content-text><p>Nomear uma ACL facilita a compreensão de sua função. Por exemplo, uma ACL para negar FTP poderia se chamar NO_FTP. Quando você identifica a sua ACL com um nome em vez de um número, o modo de configuração e a sintaxe do comando são um pouco diferentes.</p> <p>A figura mostra as etapas para criar uma ACL nomeada padrão.</p> <p><b>Etapa 1.</b> Começando no modo de configuração global, utilizar o comando <span class="cmd"><b>ip access-list</b></span> para criar uma ACL nomeada. Os nomes de ACL são alfanuméricos, devendo ser exclusivos e não começar com um número.</p> <p><b>Etapa 2.</b> No modo de configuração da ACL nomeada, utilizar as instruções <span class="cmd"><b>permit</b></span> ou <span class="cmd"><b>deny</b></span> para especificar uma ou mais condições e determinar se um pacote foi encaminhado ou ignorado.</p> <p><b>Etapa 3.</b> Retornar ao modo EXEC privilegiado com o comando <span class="cmd"><b>end</b></span>.</p> <p><b>Clique no botão Exemplo na figura.</b></p> <p>Na figura, a saída do comando da tela mostra os comandos utilizados para configurar uma ACL nomeada padrão no roteador R1, a interface Fa0/0 que nega ao host 192.168.11.10 acesso à rede 192.168.10.0. </p> <p>Usar maiúsculas em nomes da ACL não é obrigatório, mas os destaca durante a exibição da saída do comando running-config.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405020700">
<title><content-text>Monitorando e verificando ACLs</content-text></title>
<page type="OneColumn" id="tl1405020701">
<content-media type="InteractiveGraphicHotspots" id="cm6736343230">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020700/tl1405020701/cm6736343230.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020700/tl1405020701/cm6736343230text.xml"/></content-media>
<content-text><p>Quando você concluir a configuração de uma ACL, utilize os comandos <span class="cmd"><b>show</b></span> do IOS Cisco para verificar a configuração. Na figura, o exemplo superior mostra a sintaxe do IOS Cisco para exibir o conteúdo de todas as ACLs. O exemplo inferior mostra o resultado da emissão do comando <span class="cmd"><b>show access-lists</b></span> no roteador R1. Os nomes de ACL em maiúsculas, VENDAS e ENG, se destacam na saída do comando na tela.</p> <p>Lembre-se de que você começou configurando as ACLs inicialmente; você quis implementar as políticas de segurança da sua organização. Agora que você verificou se as ACLs estão configuradas conforme desejado, a próxima etapa é confirmar se as ACLs funcionam conforme planejado.</p> <p>As diretrizes discutidas anteriormente nesta seção sugerem que você configure as ACLs em uma rede de teste e implemente as ACLs testadas na rede de produção. Embora uma discussão sobre como preparar um cenário de teste da ACL esteja além do escopo deste curso, você precisa saber que confirmar se as suas ACLs funcionam conforme o planejado pode ser um processo complexo e demorado.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405020800">
<title><content-text>Editando ACLs nomeadas</content-text></title>
<page type="OneColumn" id="tl1405020801">
<content-media type="StaticGraphic" id="cm1192848608">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020800/tl1405020801/cm1192848608.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405020000/tl1405020800/tl1405020801/cm1192848608text.xml"/></content-media>
<content-text><p>As ACLs nomeadas têm uma grande vantagem sobre as ACLs numeradas por serem mais fáceis de editar. Começando pelo software IOS Cisco release 12.3, as ACLs IP nomeadas permitem excluir entradas individuais em uma ACL específica. Você pode usar números de sequência para inserir instruções em qualquer lugar da ACL nomeada. Se estiver utilizando uma versão anterior do software IOS Cisco, você só poderá adicionar instruções na parte inferior da ACL nomeada. Como pode excluir entradas individuais, você pode modificar a sua ACL sem ter que excluir e, em seguida, reconfigurar toda a ACL.</p> <p>O exemplo na figura mostra uma ACL aplicada à interface S0/0/0 de R1. Ela restringiu o acesso ao servidor Web. Observando este exemplo, você pode ver duas coisas que ainda não viu neste curso:</p> <p><b>Clique no botão Saída do roteador na figura.</b></p> <p><ul><li>Na primeira saída do comando <span class="cmd"><b>show</b></span>, você pode ver que a ACL nomeada WEBSERVER tem três linhas numeradas que indicam regras de acesso para o servidor Web. </li><li>Conceder acesso a outra estação de trabalho na lista requer apenas a inserção de uma linha numerada. No exemplo, a estação de trabalho com o endereço IP 192.168.11.10 está sendo adicionada.</li><li>A saída do comando <span class="cmd"><b>show</b></span> verifica se a nova estação de trabalho agora tem permissão.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1405020802">
<content-media type="ActivityPKA" id="cm7048713311">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405020000/tl1405020800/tl1405020802/cm7048713311/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405020000/tl1405020800/tl1405020802/cm7048713311/icontext.xml"/></content-media>
<content-text><p>As ACLs padrão são scripts de configuração de roteador que controlam se um roteador permite ou nega pacotes com base no endereço de origem. Esta atividade vai ensinar a definir critérios de filtragem, configurar as ACLs padrão, aplicar as ACLs a interfaces de roteador e verificar e testar a implementação da ACL.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do PDF abaixo.</p> <p><content-link target="E4_PTAct_5_2_8.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1405030000">
<title><content-text>Configurando ACLs estendidas</content-text></title>
<topic type="" id="tl1405030100">
<title><content-text>ACLs estendidas</content-text></title>
<page type="OneColumn" id="tl1405030101">
<content-media type="StaticGraphic" id="cm6238261633">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030100/tl1405030101/cm6238261633.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405030000/tl1405030100/tl1405030101/cm6238261633text.xml"/></content-media>
<content-text><p><b>Testando pacotes com ACLs estendidas</b></p> <p>Para obter um controle de filtragem de tráfego mais preciso, você pode utilizar ACLs estendidas numeradas de 100 a 199 e de 2.000 a 2.699, fornecendo um total de 800 ACLs estendidas possíveis. As ACLs estendidas também podem ser nomeadas. </p> <p>As ACLs estendidas são mais utilizadas que as ACLs padrão porque fornecem um intervalo maior de controle e, por isso, acrescentam à sua solução de segurança. Assim como as ACLs padrão, as ACLs estendidas verificam os endereços do pacote de origem, mas também verificam o endereço de destino, protocolos e números de porta (ou serviços). Isso proporciona um número maior de critérios nos quais a ACL se baseia. Por exemplo, uma ACL estendida pode permitir tráfego de email simultaneamente de uma rede para um destino específico enquanto nega transferências de arquivos e navegação na Web. </p> <p>A figura mostra o caminho de decisão lógico utilizado por uma ACL estendida criada para filtragem com base nos endereços de origem e de destino, no protocolo e nos números de porta. Neste exemplo, a ACL filtra primeiro o endereço de origem e, em seguida, a porta e o protocolo da origem. Em seguida, ela filtra o endereço de destino, a porta e o protocolo do destino e toma uma decisão final de permitir ou negar. </p> <p>Lembre-se de que, como as entradas são processadas em ACLs uma depois da outra, uma decisão 'Não' não necessariamente equivale a 'Negar'. Na medida em que você passa pelo caminho de decisão lógico, observe que um 'Não' significa ir para a próxima entrada até que todas as entradas sejam testadas. Somente quando todas as entradas foram processadas é que a decisão 'Permitir' ou 'Negar' é finalizada.</p> <p>A próxima página fornece um exemplo de uma ACL estendida.</p></content-text>
</page>
<page type="OneColumn" id="tl1405030102">
<content-media type="StaticGraphic" id="cm5690109249">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030100/tl1405030102/cm5690109249.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405030000/tl1405030100/tl1405030102/cm5690109249text.xml"/></content-media>
<content-text><p><b>Testando portas e serviços</b></p> <p>A possibilidade de filtrar com base no protocolo e no número da porta permite criar ACLs estendidas muito específicas. Utilizando o número de porta apropriado, você pode especificar um aplicativo, configurando o número de porta ou o nome de uma porta bem conhecida. </p> <p>A figura mostra alguns exemplos de como um administrador especifica um número de porta TCP ou UDP, colocando-o no final da instrução da ACL estendida. Operações lógicas podem ser utilizadas, como igual (eq), diferente (neq), maior que (gt) e menor que (lt). </p> <p><b>Clique no botão Portas na figura.</b></p> <p>A figura mostra como gerar uma lista dos números de porta e palavras-chave que você pode utilizar enquanto cria uma ACL utilizando <span class="cmd"><b>R1(config)#access-list 101 permit tcp any eq ?</b></span> .</p></content-text>
</page>
</topic>
<topic type="" id="tl1405030200">
<title><content-text>Configurando ACLs estendidas</content-text></title>
<page type="OneColumn" id="tl1405030201">
<content-media type="StaticGraphic" id="cm2360478292">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030200/tl1405030201/cm2360478292.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405030000/tl1405030200/tl1405030201/cm2360478292text.xml"/></content-media>
<content-text><p>As etapas procedurais para configurar as ACLs estendidas são iguais a ACLs padrão: você primeiro cria a ACL estendida e só então a ativa em uma interface. No entanto, a sintaxe do comando e os parâmetros são mais complexos para dar suporte aos recursos adicionais fornecidos por ACLs estendidas. </p> <p>A figura mostra a sintaxe do comando comum para ACLs estendidas. O campo de rolagem fornece detalhes das palavras-chave e dos parâmetros. Na medida em que avança neste capítulo, há explicações e exemplos que ampliarão ainda mais a sua compreensão. </p> <p><b>Clique no botão Configurando ACLs estendidas na figura.</b></p> <p>A figura mostra um exemplo de como você poderia criar uma ACL estendida específica para as suas necessidades de rede. Neste exemplo, o administrador de rede precisa restringir o acesso à Internet para permitir apenas a navegação no site. A ACL 103 se aplica ao tráfego que deixa a rede 192.168.10.0 e a ACL 104 ao tráfego que chega à rede. </p> <p>A ACL 103 atende à primeira parte do requisito. Ela permite ao tráfego proveniente de qualquer endereço na rede 192.168.10.0 ir para qualquer destino, estando sujeito à limitação do tráfego chegar apenas até as portas 80 (HTTP) e 443 (HTTPS).</p> <p>A natureza de HTTP exige que esse tráfego volte na rede, mas o administrador de rede quer restringir esse tráfego a trocas HTTP nos sites solicitados. A solução em segurança deve negar qualquer outro tráfego que chega até a rede. A ACL 104 faz isso bloqueando todo o tráfego de entrada, exceto pelas conexões estabelecidas. HTTP estabelece conexões que começam pela solicitação original e passam pela troca de mensagens ACK, FIN e SYN. </p> <p>Observe que o exemplo utiliza o parâmetro <span class="cmd"><b>established</b></span>. </p> <p>Esse parâmetro permite a respostas trafegar com origem na rede 192.168.10.0 /24 e retornar à entrada em s0/0/0. Uma correspondência ocorrerá se o datagrama TCP tiver os bits ACK ou de redefinição (RST) definidos, o que indica que o pacote pertence a uma conexão existente. Com o parâmetro <span class="cmd"><b>established</b></span>, o roteador permitirá apenas ao tráfego estabelecido voltar e bloquear todos os demais tráfegos.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405030300">
<title><content-text>Aplicando ACLs estendidas a interfaces</content-text></title>
<page type="OneColumn" id="tl1405030301">
<content-media type="StaticGraphic" id="cm1466341838">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030300/tl1405030301/cm1466341838.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405030000/tl1405030300/tl1405030301/cm1466341838text.xml"/></content-media>
<content-text><p>Nos diga como configurar uma lista de acesso estendida, aproveitando o exemplo anterior. Lembre-se de que nós queremos permitir aos usuários navegar em sites seguros e não seguros. Primeiro considere se o tráfego que você deseja filtrar está entrando ou saindo. A tentativa de acessar sites na Internet é tráfego saindo. Receber emails na Internet é tráfego entrando na empresa. No entanto, durante a consideração de como aplicar uma ACL a uma interface, entrar e sair ganham significados diferentes, dependendo do ponto de vista. </p> <p>No exemplo da figura, R1 tem duas interfaces. Ela tem uma porta serial, S0/0/0, e uma porta Fast Ethernet, Fa0/0. O tráfego de Internet que chega entra pela interface S0/0/0, mas sai pela interface Fa0/0 para alcançar PC1. O exemplo aplica a ACL à interface serial em ambas as direções.</p> <p><b>Clique no botão Negar FTP na figura.</b></p> <p>Este é um exemplo da negação de tráfego FTP na sub-rede 192.168.11.0 para a sub-rede 192.168.10.0, mas que permite todo o tráfego restante. Observe a utilização de máscaras curinga. Lembre-se de que, como o FTP exige as portas 20 e 21, você precisa especificar ambas <span class="cmd"><b>eq 20</b></span> e <span class="cmd"><b>eq 21</b></span> para negar FTP.</p> <p>Com ACLs estendidas, você pode escolher utilizar números de porta como os do exemplo ou chamar uma porta bem conhecida pelo nome. Em um exemplo anterior de uma ACL estendida, as instruções foram anotadas da seguinte forma:</p> <p><span class="cmd"><b>access-list 114 permit tcp 192.168.20.0 0.0.0.255 any eq ftp</b></span></p> <p><span class="cmd"><b>access-list 114 permit tcp 192.168.20.0 0.0.0.255 any eq ftp-data</b></span></p> <p>Observe que para FTP, <span class="cmd"><b>ftp</b></span> e <span class="cmd"><b>ftp-data</b></span> devem ser mencionados. </p> <p><b>Clique no botão Negar Telnet na figura.</b></p> <p>Este exemplo nega tráfego Telnet de 192.168.11.0, mas permite todo o tráfego IP restante de qualquer outra origem para qualquer destino de entrada em Fa0/1. Observe a utilização das palavras-chave <span class="cmd"><b>any</b></span>, o que significa de qualquer lugar para qualquer lugar.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405030400">
<title><content-text>Criando ACLs estendidas nomeadas</content-text></title>
<page type="OneColumn" id="tl1405030401">
<content-media type="StaticGraphic" id="cm7153995744">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030400/tl1405030401/cm7153995744.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405030000/tl1405030400/tl1405030401/cm7153995744text.xml"/></content-media>
<content-text><p>Você pode criar ACLs estendidas nomeadas basicamente da mesma forma como criou ACLs padrão nomeadas. Os comandos para criar uma ACL nomeada são diferentes para ACLs padrão e estendidas.</p> <p>Começando no modo EXEC privilegiado, siga estas etapas para criar uma ACL estendida utilizando nomes.</p> <p><b>Etapa 1.</b> Começando no modo de configuração global, utilizar o comando <span class="cmd"><b>ip access-list extended </b><i>name</i></span> para definir uma ACL estendida nomeada. </p> <p><b>Etapa 2.</b> No modo de configuração da ACL nomeada, especificar as condições que você deseja permitir ou negar.</p> <p><b>Etapa 3.</b> Retornar ao modo EXEC privilegiado e verificar a sua ACL com o comando <span class="cmd"><b>show access-lists</b> [<i>number</i> | <i>name</i>]</span>.</p> <p><b>Etapa 4.</b> Como opção e etapa recomendada, salvar as suas entradas no arquivo de configuração com o comando <span class="cmd"><b>copy running-config startup-config</b></span>.</p> <p>Para remover uma ACL estendida nomeada, utilize o comando no modo de configuração global <span class="cmd"><b>no ip access-list extended </b><i>name</i></span>.</p> <p>A figura mostra a versão nomeada da ACL criada anteriormente.</p></content-text>
</page>
<page type="OneColumn" id="tl1405030402">
<content-media type="ActivityPKA" id="cm3778528024">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405030000/tl1405030400/tl1405030402/cm3778528024/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405030000/tl1405030400/tl1405030402/cm3778528024/icontext.xml"/></content-media>
<content-text><p>As ACLs estendidas são scripts de configuração de roteador que controlam se um roteador permite ou nega pacotes com base no endereço de origem ou de destino, bem como protocolos ou portas. As ACLs estendidas dão mais flexibilidade e granularidade do que as ACLs padrão. Esta atividade vai ensinar a definir critérios de filtragem, configurar as ACLs estendidas, aplicar as ACLs a interfaces de roteador, e verificar e testar a implementação da ACL.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do PDF abaixo.</p> <p><content-link target="E4_PTAct_5_3_4.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1405040000">
<title><content-text>Configurar ACLs complexas</content-text></title>
<topic type="" id="tl1405040100">
<title><content-text>O que são ACLs complexas?</content-text></title>
<page type="OneColumn" id="tl1405040101">
<content-media type="StaticGraphic" id="cm3547853820">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040100/tl1405040101/cm3547853820.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040100/tl1405040101/cm3547853820text.xml"/></content-media>
<content-text><p><b>Tipos de ACLs complexas</b></p> <p>As ACLs padrão e estendidas podem se tornar a base para ACLs complexas, que fornecem funcionalidade adicional. A tabela na figura sumariza as três categorias de ACLs complexas.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405040200">
<title><content-text>ACLs dinâmicas</content-text></title>
<page type="OneColumn" id="tl1405040201">
<content-media type="StaticGraphic" id="cm6192297488">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040200/tl1405040201/cm6192297488.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040200/tl1405040201/cm6192297488text.xml"/></content-media>
<content-text><p><b>O que são ACLs dinâmicas?</b></p> <p>O lock-and-key é um recurso de segurança de filtragem de tráfego que utiliza ACLs dinâmicas, às vezes conhecidas como ACLs lock-and-key. O lock-and-key só está disponível para tráfego IP. As ACLs dinâmicas dependem da conectividade Telnet, da autenticação (local ou remota) e das ACLs estendidas.</p> <p>A configuração da ACL dinâmica começa com a aplicação de uma ACL estendida para bloquear tráfego no roteador. Os usuários que desejam atravessar o roteador são bloqueados pela ACL estendida até utilizarem Telnet para se conectar ao roteador e serem autenticados. A conexão Telnet é descartada, e uma ACL dinâmica de entrada única é adicionada à ACL estendida existente. Isso permite o tráfego durante um período específico; timeouts ociosos e absolutos são possíveis. </p> <p><b>Quando utilizar ACLs dinâmicas </b></p> <p>Algumas razões comuns para utilizar as ACLs dinâmicas são as seguintes:</p> <p><ul><li>Quando você quiser que um usuário remoto específico ou grupo de usuários remotos acesse um host dentro da sua rede, ao mesmo tempo em que conectam nos hosts remotos via Internet. Lock-and-key autentica o usuário e permite acesso limitado pelo seu roteador de firewall a um host ou sub-rede durante um período finito. </li><li>Quando você deseja que um subconjunto de hosts em uma rede local acesse um host em uma rede remota protegida por um firewall. Com lock-and-key, você só pode habilitar o acesso ao host remoto para o conjunto desejado de hosts locais. Lock-and-key exige que os usuários se autentiquem por meio de um servidor <content-link target="{66C17097-1FF6-4E87-814F-9070BF6EB051}" type="glossary">AAA</content-link>, TACACS+ ou outro servidor de segurança antes de permitir a seus hosts acessar os hosts remotos.</li></ul></p> <p><b>Benefícios de ACLs dinâmicas </b></p> <p>As ACLs dinâmicas têm os seguintes benefícios de segurança em relação a ACLs padrão e estendidas estáticas:</p> <p><ul><li>Utilização de um mecanismo de desafio para autenticar usuários individuais.</li><li>Gerenciamento simplificado em grandes redes interconectadas.</li><li>Em muitos casos, a redução do volume do processamento do roteador obrigatório para ACLs.</li><li>Redução da oportunidade para invasões à rede por hackers.</li><li>Criação de acesso de usuário dinâmico por um firewall, sem comprometer outras restrições de segurança configuradas.</li></ul></p> <p>Na figura, o usuário em PC1 é um administrador que exige acesso backdoor à rede 192.168.30.0 /24 localizada no roteador R3. Uma ACL dinâmica foi configurada para permitir a FTP e HTTP acesso no roteador R3, mas apenas por um tempo limitado.</p></content-text>
</page>
<page type="OneColumn" id="tl1405040202">
<content-media type="StaticGraphic" id="cm1730026134">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040200/tl1405040202/cm1730026134.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040200/tl1405040202/cm1730026134text.xml"/></content-media>
<content-text><p><b>Exemplos de ACL dinâmica</b></p> <p>Considere um requisito para que um administrador de rede em PC1 obtenha acesso periódico à rede (192.168.30.0 /24) pelo roteador R3. Para facilitar esse requisito, uma ACL dinâmica é configurada na interface serial S0/0/1 no roteador R3. </p> <p>Embora uma descrição detalhada da configuração para uma ACL dinâmica esteja além do escopo deste curso, é útil revisar as etapas de configuração. </p> <p><b>Clique no botão Config na figura </b>para exibir um exemplo de uma configuração de ACL dinâmica. </p> <p><b>Passe o mouse sobre cada Etapa na figura</b> para revisar as etapas de configuração da ACL dinâmica.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405040300">
<title><content-text>ACLs reflexivas</content-text></title>
<page type="OneColumn" id="tl1405040301">
<content-media type="StaticGraphic" id="cm8961945188">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040300/tl1405040301/cm8961945188.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040300/tl1405040301/cm8961945188text.xml"/></content-media>
<content-text><p><b>O que são ACLs reflexivas?</b></p> <p>As ACLs reflexivas forçam o tráfego de resposta do destino de um pacote de saída conhecido recente a ir para a origem desse pacote de saída. Isso dá mais controle sobre o tráfego no qual você tem permissão na sua rede e aumenta os recursos das listas de acesso estendidas.</p> <p>Os administradores de rede utilizam ACLs reflexivas para permitir tráfego IP para sessões com origem em sua rede enquanto negam tráfego IP para sessões com origem fora da rede. Essas ACLs permitem ao roteador gerenciar tráfego de sessão dinamicamente. O roteador examina o tráfego de saída e, quando vê uma nova conexão, adiciona uma entrada a uma ACL temporária para permitir respostas. As ACLs reflexivas contêm apenas entradas temporárias. Essas entradas são criadas automaticamente quando uma nova sessão IP começa, por exemplo, com um pacote de saída, e as entradas são removidas automaticamente quando a sessão termina. </p> <p>As ACLs reflexivas fornecem uma forma de filtragem de sessão mais real que uma ACL estendida utilizando o parâmetro <span class="cmd"><b>established</b></span> apresentado anteriormente. Embora sejam semelhantes em termos conceituais ao parâmetro <span class="cmd"><b>established</b></span>, as ACLs reflexivas também funcionam com UDP e ICMP, que não têm bits ACK ou RST. A opção <span class="cmd"><b>established</b></span> também não funciona com aplicativos que alteram dinamicamente a porta de origem do tráfego de sessão. A instrução <span class="cmd"><b>permit established</b></span> só verifica bits ACK e RST, e não endereços de origem e destino.</p> <p>As ACLs reflexivas não são aplicadas diretamente a uma interface, mas são "aninhadas" em uma ACL IP nomeada estendida que se aplicada à interface.</p> <p>As ACLs reflexivas só podem ser definidas com ACLs IP nomeadas estendidas. Elas não podem ser definidas com ACLs numeradas ou nomeadas padrão ou com outras ACLs de protocolo. As ACLs reflexivas podem ser utilizadas com outras ACLs estendidas estáticas e padrão.</p> <p><b>Benefícios de ACLs reflexivas</b></p> <p>As ACLs reflexivas têm os seguintes benefícios:</p> <p><ul><li>Ajudam a proteger a sua rede contra hackers de rede e podem ser incluídas em uma defesa de firewall. </li><li>Fornecem um nível de segurança contra spoofing e determinados ataques DoS. As ACLs reflexivas são muito mais difíceis de falsificar porque mais critérios de filtro devem corresponder para que um pacote tenha permissão. Por exemplo, os endereços de origem e de destino e os números de porta, e não apenas os bits ACK e RST, são verificados.</li><li>Simples de utilizar e, em comparação com ACLs básicas, fornecem maior controle sobre quais pacotes entram na sua rede.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1405040302">
<content-media type="StaticGraphic" id="cm7697540152">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040300/tl1405040302/cm7697540152.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040300/tl1405040302/cm7697540152text.xml"/></content-media>
<content-text><p><b>Exemplo de ACL reflexiva</b></p> <p>A figura mostra um exemplo no qual o administrador precisa de uma ACL reflexiva que permita tráfego de saída e de entrada ICMP, enquanto permite apenas tráfego TCP iniciado dentro da rede. Suponhamos que todo o restante do tráfego seja negado. A ACL reflexiva é aplicada à interface de saída de R2. </p> <p><b>Clique no botão Config na figura.</b></p> <p>Embora a configuração completa de ACLs reflexivas esteja além do escopo deste curso, a figura mostra um exemplo das etapas obrigatórias para configurar uma ACL reflexiva.</p> <p><b>Passe o mouse sobre cada Etapa na figura</b> para revisar as etapas de configuração da ACL reflexiva.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405040400">
<title><content-text>ACLs baseada no tempo</content-text></title>
<page type="OneColumn" id="tl1405040401">
<content-media type="StaticGraphic" id="cm5060973014">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040400/tl1405040401/cm5060973014.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040400/tl1405040401/cm5060973014text.xml"/></content-media>
<content-text><p><b>O que são ACLs baseadas em tempo?</b></p> <p>As ACLs baseadas em tempo são semelhantes a ACLs estendidas em termos de função, mas permitem o controle de acesso com base na hora. Para implementar ACLs baseadas em hora, você cria um intervalo que define horas específicas do dia e da semana. Você identifica o intervalo com um nome e se refere a ele por uma função. As restrições de hora são impostas na própria função.</p> <p>As ACLs baseadas em tempo têm muitos benefícios, como:</p> <p><ul><li>Oferece ao administrador de rede mais controle sobre a permissão ou a negação de acesso a recursos. </li><li>Permite aos administradores de rede controlar mensagens de registro em log. As entradas ACL podem registrar o tráfego em log em determinadas horas do dia, mas não constantemente. Por isso, os administradores podem simplesmente negar acesso sem analisar os muitos logs gerados durante horários de pico.</li></ul></p></content-text>
</page>
<page type="OneColumn" id="tl1405040402">
<content-media type="StaticGraphic" id="cm9688194350">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040400/tl1405040402/cm9688194350.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040400/tl1405040402/cm9688194350text.xml"/></content-media>
<content-text><p><b>Exemplo de ACL baseada em tempo</b></p> <p>Embora os detalhes da configuração completa de ACLs baseadas em tempo estejam além do escopo deste curso, o seguinte exemplo mostra as etapas obrigatórias. No exemplo, uma conexão Telnet é permitida da rede interna para a rede externa às segundas, quartas e sextas durante o horário comercial. </p> <p><b>Clique no botão Config na figura.</b></p> <p><b>Etapa 1.</b> Definir o intervalo para implementar a ACL e dar a ela um nome EVERYOTHERDAY, neste caso.</p> <p><b>Etapa 2.</b> Aplicar o intervalo à ACL.</p> <p><b>Etapa 3.</b> Aplicar a ACL à interface.</p> <p>O intervalo depende do relógio de sistema do roteador. O recurso funciona melhor com a sincronização Network Time Protocol (NTP), mas o relógio do roteador pode ser utilizado.</p></content-text>
</page>
</topic>
<topic type="" id="tl1405040500">
<title><content-text>Identificação e solução de problemas de ACL comuns</content-text></title>
<page type="OneColumn" id="tl1405040501">
<content-media type="InteractiveGraphicHotspots" id="cm7525379986">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040500/tl1405040501/cm7525379986.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040500/tl1405040501/cm7525379986text.xml"/></content-media>
<content-text><p>A utilização dos comandos <span class="cmd"><b>show</b></span> descritos anteriormente revela a maioria dos erros ACL mais comuns antes que eles causem problemas na sua rede. Felizmente, você está utilizando um bom procedimento de teste para proteger a sua rede de erros durante o estágio de desenvolvimento da sua implementação de ACL.</p> <p>Ao observar uma ACL, verifique-a em relação às regras aprendidas sobre como criar ACLs corretamente. A maioria dos erros ocorre porque essas regras básicas são ignoradas. Na verdade, os erros mais comuns são inserir instruções ACL na ordem errada e não aplicar critérios apropriados às suas regras. </p> <p>Vejamos uma série de problemas comuns e as soluções. Clique em cada exemplo à medida que lê essas explicações.</p> <p><b>Clique no botão Erro n° 1 na figura.</b></p> <p>O host 192.168.10.10 não tem nenhuma conectividade com 192.168.30.12. Você consegue ver o erro na saída do comando <span class="cmd"><b>show access-lists</b></span>? </p> <p><b>Solução</b> – observar a ordem das instruções ACL. O host 192.168.10.10 não tem nenhuma conectividade telnet com 192.168.30.12 por conta da ordem da regra 10 na lista de acesso. Como o roteador processa as ACLs de cima para baixo, a instrução 10 nega o host 192.168.10.10, logo, a instrução 20 não é processada. As instruções 10 e 20 devem ser invertidas. A última linha permite todo o restante do tráfego não TCP em IP (ICMP, UDP etc.).</p> <p><b>Clique no botão Erro n° 2 na figura.</b></p> <p>A rede 192.168.10.0 /24 não pode utilizar TFTP para se conectar à rede 192.168.30.0 /24. Você consegue ver o erro na saída do comando <span class="cmd"><b>show access-lists</b></span>?</p> <p><b>Solução</b> – a rede 192.168.10.0 /24 não pode utilizar TFTP para se conectar à rede 192.168.30.0 /24 porque TFTP utiliza o protocolo de transporte UDP. A instrução 30 na lista de acesso 120 permite todo o restante do tráfego TCP. Como utiliza UDP, o TFTP é  negado implicitamente. A instrução 30 deve ser <span class="cmd"><b>ip any any</b></span>.</p> <p>Essa ACL funcionará se for aplicada a Fa0/0 de R1 ou S0/0/1 de R3, ou S0/0/0 ou R2 na direção de entrada. No entanto, com base na regra sobre como colocar as ACLs estendidas mais próximas da origem, a melhor opção está em Fa0/0 de R1 porque ela permite filtrar tráfego indesejável sem atravessar a infraestrutura de rede.</p> <p><b>Clique no botão Erro n° 3 na figura.</b></p> <p>A rede 192.168.10.0 /24 pode utilizar Telnet para se conectar a 192.168.30.0 /24, mas essa conexão não deve ser permitida. Analise a saída do comando <span class="cmd"><b>show access-lists</b></span> e veja se você consegue encontrar uma solução. Onde você aplicaria essa ACL?</p> <p><b>Solução</b> – a rede 192.168.10.0 /24 pode utilizar Telnet para se conectar à rede 192.168.30.0 /24, porque o número da porta Telnet na instrução 10 da lista de acesso 130 está listado na posição errada. Atualmente, a instrução 10 nega qualquer origem com um número de porta que seja igual à Telnet que tenta estabelecer uma conexão com qualquer endereço IP. Se quiser negar tráfego de entrada Telnet em S0/0/1, você deve negar o número de porta de destino que seja igual a Telnet, por exemplo, <span class="cmd"><b>deny tcp any any eq telnet</b></span>.</p> <p><b>Clique no botão Erro n° 4 na figura.</b></p> <p>O host 192.168.10.10 pode utilizar Telnet para se conectar a 192.168.30.12, mas essa conexão não deve ser permitida. Analise a saída do comando <span class="cmd"><b>show access-lists</b></span>. </p> <p><b>Solução</b> – o host 192.168.10.10 pode utilizar Telnet para se conectar a 192.168.30.12, porque não há regras que neguem o host 192.168.10.10 ou sua rede como a origem. A instrução 10 da lista de acesso 140 nega a interface do roteador da qual o tráfego sairia. No entanto, como esses pacotes saem do roteador, eles têm um endereço de origem 192.168.10.10, e não o endereço da interface do roteador.</p> <p>Assim como na solução do Erro 2, essa ACL deve ser se aplicada à Fa0/0 de R1 na direção de entrada.</p> <p><b>Clique no botão Erro n° 5 na figura.</b></p> <p>O host 192.168.30.12 pode utilizar Telnet para se conectar a 192.168.10.10, mas essa conexão não deve ser permitida. Observe a saída do comando <span class="cmd"><b>show access-lists</b></span> e procure o erro.</p> <p><b>Solução</b> – o host 192.168.30.12 pode utilizar Telnet para se conectar a 192.168.10.10 porque a direção na qual a lista de acesso 150 é aplicada a uma interface em R2 está incorreta. A instrução 10 nega o endereço de origem 192.168.30.12, mas esse endereço só seria a origem se o tráfego fosse de saída em S0/0/0 ou de entrada em S0/0/1. </p></content-text>
</page>
<page type="FullScreen" id="tl1405040502">
<content-media type="ActivityCustom" id="cm9784865559">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405040000/tl1405040500/tl1405040502/cm9784865559.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405040000/tl1405040500/tl1405040502/cm9784865559text.xml"/></content-media>
<content-text><p>Atividade de memória flash complexa: Configurar ACLs complexas</p></content-text>
</page>
</topic>
</section>
<section type="" id="tl1405050000">
<title><content-text>Laboratórios do capítulo</content-text></title>
<topic type="" id="tl1405050100">
<title><content-text>Listas de controle de acesso básico</content-text></title>
<page type="OneColumn" id="tl1405050101">
<content-media type="ActivityLab" id="cm8857404340">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405050000/tl1405050100/tl1405050101/cm8857404340/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405050000/tl1405050100/tl1405050101/cm8857404340/icontext.xml"/></content-media>
<content-text><p>Uma parte essencial da segurança de rede é poder controlar que tipo de tráfego está sendo permitido para alcançar a sua rede e de onde esse tráfego está vindo. Este laboratório ensinará como configurar listas de controle de acesso básicas e estendidas e atingir essa meta.</p></content-text>
</page>
<page type="OneColumn" id="tl1405050102">
<content-media type="ActivityPKA" id="cm8611793361">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405050000/tl1405050100/tl1405050102/cm8611793361/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405050000/tl1405050100/tl1405050102/cm8611793361/icontext.xml"/></content-media>
<content-text><p>Esta atividade é uma variação do Laboratório 5.5.1. O Packet Tracer pode não suportar todas as tarefas especificadas no laboratório prático. Esta atividade não deve ser considerada equivalente à conclusão do laboratório prático. O Packet Tracer não substitui um experimento em laboratório prático com equipamento real.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do PDF abaixo.</p> <p><content-link target="E4_PTAct_5_5_1.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl1405050200">
<title><content-text>Listas de controle de acesso avançado</content-text></title>
<page type="OneColumn" id="tl1405050201">
<content-media type="ActivityLab" id="cm2075601179">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405050000/tl1405050200/tl1405050201/cm2075601179/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405050000/tl1405050200/tl1405050201/cm2075601179/icontext.xml"/></content-media>
<content-text><p>No laboratório Lista de controle de acesso básica, você configurou listas de controle de acesso básicas e estendidas pela primeira vez como uma medida de segurança da rede. Neste laboratório, tente configurar a maior segurança de rede possível sem consultar o laboratório Básico. Isso permitirá a você avaliar o quanto aprendeu no laboratório Básico. Quando necessário, verifique o seu trabalho utilizando o laboratório Básico ou a resposta fornecida por seu instrutor. </p></content-text>
</page>
<page type="OneColumn" id="tl1405050202">
<content-media type="ActivityPKA" id="cm9758146967">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405050000/tl1405050200/tl1405050202/cm9758146967/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405050000/tl1405050200/tl1405050202/cm9758146967/icontext.xml"/></content-media>
<content-text><p>Esta atividade é uma variação do Laboratório 5.5.2. O Packet Tracer pode não suportar todas as tarefas especificadas no laboratório prático. Esta atividade não deve ser considerada equivalente à conclusão do laboratório prático. O Packet Tracer não substitui um experimento em laboratório prático com equipamento real.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do PDF abaixo.</p> <p><content-link target="E4_PTAct_5_5_2.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
<topic type="" id="tl1405050300">
<title><content-text>Identificação e solução de problemas de listas de controle de acesso</content-text></title>
<page type="OneColumn" id="tl1405050301">
<content-media type="ActivityLab" id="cm7960973984">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405050000/tl1405050300/tl1405050301/cm7960973984/" mime="application/pdf" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405050000/tl1405050300/tl1405050301/cm7960973984/icontext.xml"/></content-media>
<content-text><p>Você trabalha para um provedor de serviços regional que recentemente passou por várias falhas na segurança. O seu departamento foi solicitado a proteger os roteadores de borda do cliente para que apenas os PCs de gerenciamento local possam acessar as linhas VTY. Para resolver esse problema, você configurará as ACLs em R2 de forma que as redes diretamente conectadas a R3 não consigam se comunicar com redes diretamente conectadas a R1, mas ainda assim permitam todo o restante do tráfego. </p></content-text>
</page>
</topic>
</section>
<section type="ChapterSummary" id="tl1405060000">
<title><content-text>Resumo do capítulo</content-text></title>
<topic type="" id="tl1405060100">
<title><content-text>Sumarização</content-text></title>
<page type="OneColumn" id="tl1405060101">
<content-media type="ChapterSummary" id="cm5738420936">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405060000/tl1405060100/tl1405060101/cm5738420936.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405060000/tl1405060100/tl1405060101/cm5738420936text.xml"/></content-media>
<content-text><p>ACL é um script de configuração de roteador que utiliza filtragem de pacote para controlar se um roteador permite ou nega a passagem a pacotes com base nos critérios encontrados no cabeçalho de pacote. As ACLs também são utilizadas para selecionar tipos de tráfego a serem analisados, encaminhados ou processados de outras formas. As ACLs estão entre os objetos mais utilizados no software IOS Cisco.</p> <p>Há tipos diferentes de ACLs – padrão, estendida, nomeada e numerada. Neste capítulo, você aprendeu a finalidade de cada um desses tipos de ACL e onde elas precisam ser colocadas na sua rede. Você aprendeu a configurar as ACLs em interfaces de entrada e de saída. Os tipos de ACL especiais, dinâmicas, reflexivas e baseadas em tempo, foram descritas. Foram realçadas as diretrizes e as práticas recomendadas para desenvolver ACLs funcionais e efetivas.</p> <p>Com o conhecimento e as habilidades aprendidas neste capítulo, agora você pode configurar ACLs padrão, estendidas e complexas, além de verificar, identificar e solucionar problemas dessas configurações com confiança, mas com cuidado. </p></content-text>
</page>
<page type="FullScreen" id="tl1405060102">
<content-media type="StaticGraphic" id="cm1434218992">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405060000/tl1405060100/tl1405060102/cm1434218992.swf" mime="shockwave/flash" scale="true" type="file" width="400" height="200" external="tl1405000000/tl1405060000/tl1405060100/tl1405060102/cm1434218992text.xml"/></content-media>
<content-text></content-text>
</page>
<page type="OneColumn" id="tl1405060103">
<content-media type="ActivityPKA" id="cm8686006627">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405060000/tl1405060100/tl1405060103/cm8686006627/" mime="application/packettracer" scale="true" type="directory" width="0" height="0" external="tl1405000000/tl1405060000/tl1405060100/tl1405060103/cm8686006627/icontext.xml"/></content-media>
<content-text><p>Nesta atividade, você demonstrará a sua capacidade de configurar ACLs que aplicam cinco políticas de segurança. Além disso, você irá configurar o roteamento PPP e OSPF. Os dispositivos já estão configurados com endereçamento IP.</p> <p>São fornecidas instruções detalhadas na atividade, bem como no link do PDF abaixo.</p> <p><content-link target="E4_PTAct_5_6_1.pdf" type="internalfile">Instruções da atividade (PDF)</content-link></p> <p><b>Clique no ícone do Packet Tracer para obter mais detalhes.</b></p></content-text>
</page>
</topic>
</section>
<section type="ChapterQuiz" id="tl1405070000">
<title><content-text>Teste do capítulo</content-text></title>
<topic type="" id="tl1405070100">
<title><content-text>Teste do capítulo</content-text></title>
<page type="FullScreen" id="tl1405070101">
<content-media type="ChapterQuiz" id="cm9380024428">	<title><content-text></content-text></title>	<media ref="tl1405000000/tl1405070000/tl1405070100/tl1405070101/cm9380024428/" mime="" scale="true" type="directory" width="100%" height="100%" external="tl1405000000/tl1405070000/tl1405070100/tl1405070101/cm9380024428/icontext.xml"/></content-media>
<content-text></content-text>
</page>
</topic>
</section>
</chapter>
